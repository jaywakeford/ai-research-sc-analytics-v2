(()=>{var exports={};exports.id=214,exports.ids=[214],exports.modules={7849:a=>{"use strict";a.exports=require("next/dist/client/components/action-async-storage.external")},5403:a=>{"use strict";a.exports=require("next/dist/client/components/request-async-storage.external")},4749:a=>{"use strict";a.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:a=>{"use strict";a.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:a=>{"use strict";a.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:a=>{"use strict";a.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7147:a=>{"use strict";a.exports=require("fs")},3685:a=>{"use strict";a.exports=require("http")},5687:a=>{"use strict";a.exports=require("https")},7310:a=>{"use strict";a.exports=require("url")},9796:a=>{"use strict";a.exports=require("zlib")},9349:()=>{},3856:(a,h,d)=>{"use strict";d.r(h),d.d(h,{GlobalError:()=>m.a,__next_app__:()=>S,originalPathname:()=>_,pages:()=>A,routeModule:()=>E,tree:()=>y});var c=d(482),u=d(9108),g=d(2563),m=d.n(g),b=d(8300),v={};for(let a in b)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(a)&&(v[a]=()=>b[a]);d.d(h,v);let y=["",{children:["research",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(d.bind(d,4709)),"D:\\Projects\\webpage\\ai-research-sc-analytics-main\\jw-ai-sc-de\\src\\app\\research\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(d.bind(d,1342)),"D:\\Projects\\webpage\\ai-research-sc-analytics-main\\jw-ai-sc-de\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(d.bind(d,8206)),"D:\\Projects\\webpage\\ai-research-sc-analytics-main\\jw-ai-sc-de\\src\\app\\not-found.tsx"]}],A=["D:\\Projects\\webpage\\ai-research-sc-analytics-main\\jw-ai-sc-de\\src\\app\\research\\page.tsx"],_="/research/page",S={require:d,loadChunk:()=>Promise.resolve()},E=new c.AppPageRouteModule({definition:{kind:u.x.APP_PAGE,page:"/research/page",pathname:"/research",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:y}})},2385:(a,h,d)=>{Promise.resolve().then(d.t.bind(d,2583,23)),Promise.resolve().then(d.t.bind(d,6840,23)),Promise.resolve().then(d.t.bind(d,8771,23)),Promise.resolve().then(d.t.bind(d,3225,23)),Promise.resolve().then(d.t.bind(d,9295,23)),Promise.resolve().then(d.t.bind(d,3982,23))},7373:(a,h,d)=>{Promise.resolve().then(d.t.bind(d,1476,23))},8501:(a,h,d)=>{Promise.resolve().then(d.bind(d,3932))},6391:(a,h,d)=>{Promise.resolve().then(d.bind(d,4293))},9408:()=>{},1541:(a,h,d)=>{"use strict";var c=d(378);function u(){}function g(){}g.resetWarningCache=u,a.exports=function(){function a(a,h,d,u,g,m){if(m!==c){var b=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}function h(){return a}a.isRequired=a;var d={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:h,element:a,elementType:a,instanceOf:h,node:a,objectOf:h,oneOf:h,oneOfType:h,shape:h,exact:h,checkPropTypes:g,resetWarningCache:u};return d.PropTypes=d,d}},7470:(a,h,d)=>{a.exports=d(1541)()},378:a=>{"use strict";var h="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";a.exports=h},5852:(module,__unused_webpack_exports,__webpack_require__)=>{/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2023 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */!function(a,h){module.exports=h()}(globalThis,()=>(()=>{"use strict";var __webpack_modules__=[,(a,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.VerbosityLevel=h.Util=h.UnknownErrorException=h.UnexpectedResponseException=h.TextRenderingMode=h.RenderingIntentFlag=h.PromiseCapability=h.PermissionFlag=h.PasswordResponses=h.PasswordException=h.PageActionEventType=h.OPS=h.MissingPDFException=h.MAX_IMAGE_SIZE_TO_CACHE=h.LINE_FACTOR=h.LINE_DESCENT_FACTOR=h.InvalidPDFException=h.ImageKind=h.IDENTITY_MATRIX=h.FormatError=h.FeatureTest=h.FONT_IDENTITY_MATRIX=h.DocumentActionEventType=h.CMapCompressionType=h.BaseException=h.BASELINE_FACTOR=h.AnnotationType=h.AnnotationStateModelType=h.AnnotationReviewState=h.AnnotationReplyType=h.AnnotationMode=h.AnnotationMarkedState=h.AnnotationFlag=h.AnnotationFieldFlag=h.AnnotationEditorType=h.AnnotationEditorPrefix=h.AnnotationEditorParamsType=h.AnnotationBorderStyleType=h.AnnotationActionEventType=h.AbortException=void 0,h.assert=Y,h.bytesToString=eo,h.createValidAbsoluteUrl=J,h.getModificationDate=ex,h.getVerbosityLevel=V,h.info=W,h.isArrayBuffer=e_,h.isArrayEqual=eS,h.normalizeUnicode=eP,h.objectFromMap=ec,h.objectSize=ed,h.setVerbosityLevel=z,h.shadow=Q,h.string32=eh,h.stringToBytes=el,h.stringToPDFString=ev,h.stringToUTF8String=ey,h.unreachable=X,h.utf8StringToString=eA,h.warn=$;let d=[1,0,0,1,0,0];h.IDENTITY_MATRIX=d;let c=[.001,0,0,.001,0,0];h.FONT_IDENTITY_MATRIX=c;let u=1e7;h.MAX_IMAGE_SIZE_TO_CACHE=u;let g=1.35;h.LINE_FACTOR=g;let m=.35;h.LINE_DESCENT_FACTOR=m;let b=m/g;h.BASELINE_FACTOR=b;let v={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};h.RenderingIntentFlag=v;let y={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};h.AnnotationMode=y;let A="pdfjs_internal_editor_";h.AnnotationEditorPrefix=A;let _={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};h.AnnotationEditorType=_;let S={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};h.AnnotationEditorParamsType=S;let E={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};h.PermissionFlag=E;let C={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};h.TextRenderingMode=C;let T={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};h.ImageKind=T;let w={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};h.AnnotationType=w;let R={MARKED:"Marked",REVIEW:"Review"};h.AnnotationStateModelType=R;let k={MARKED:"Marked",UNMARKED:"Unmarked"};h.AnnotationMarkedState=k;let M={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};h.AnnotationReviewState=M;let F={GROUP:"Group",REPLY:"R"};h.AnnotationReplyType=F;let O={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};h.AnnotationFlag=O;let I={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};h.AnnotationFieldFlag=I;let D={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};h.AnnotationBorderStyleType=D;let L={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};h.AnnotationActionEventType=L;let N={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};h.DocumentActionEventType=N;let j={O:"PageOpen",C:"PageClose"};h.PageActionEventType=j;let B={ERRORS:0,WARNINGS:1,INFOS:5};h.VerbosityLevel=B;let U={NONE:0,BINARY:1};h.CMapCompressionType=U;let H={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};h.OPS=H;let G={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};h.PasswordResponses=G;let q=B.WARNINGS;function z(a){Number.isInteger(a)&&(q=a)}function V(){return q}function W(a){q>=B.INFOS&&console.log(`Info: ${a}`)}function $(a){q>=B.WARNINGS&&console.log(`Warning: ${a}`)}function X(a){throw Error(a)}function Y(a,h){a||X(h)}function K(a){switch(a?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function J(a,h=null,d=null){if(!a)return null;try{if(d&&"string"==typeof a){if(d.addDefaultProtocol&&a.startsWith("www.")){let h=a.match(/\./g);h?.length>=2&&(a=`http://${a}`)}if(d.tryConvertEncoding)try{a=ey(a)}catch(a){}}let c=h?new URL(a,h):new URL(a);if(K(c))return c}catch(a){}return null}function Q(a,h,d,c=!1){return Object.defineProperty(a,h,{value:d,enumerable:!c,configurable:!0,writable:!1}),d}let Z=function(){function a(h,d){this.constructor===a&&X("Cannot initialize BaseException."),this.message=h,this.name=d}return a.prototype=Error(),a.constructor=a,a}();h.BaseException=Z;class ee extends Z{constructor(a,h){super(a,"PasswordException"),this.code=h}}h.PasswordException=ee;class et extends Z{constructor(a,h){super(a,"UnknownErrorException"),this.details=h}}h.UnknownErrorException=et;class ei extends Z{constructor(a){super(a,"InvalidPDFException")}}h.InvalidPDFException=ei;class er extends Z{constructor(a){super(a,"MissingPDFException")}}h.MissingPDFException=er;class es extends Z{constructor(a,h){super(a,"UnexpectedResponseException"),this.status=h}}h.UnexpectedResponseException=es;class en extends Z{constructor(a){super(a,"FormatError")}}h.FormatError=en;class ea extends Z{constructor(a){super(a,"AbortException")}}function eo(a){("object"!=typeof a||a?.length===void 0)&&X("Invalid argument for bytesToString");let h=a.length,d=8192;if(h<8192)return String.fromCharCode.apply(null,a);let c=[];for(let u=0;u<h;u+=d){let g=Math.min(u+d,h),m=a.subarray(u,g);c.push(String.fromCharCode.apply(null,m))}return c.join("")}function el(a){"string"!=typeof a&&X("Invalid argument for stringToBytes");let h=a.length,d=new Uint8Array(h);for(let c=0;c<h;++c)d[c]=255&a.charCodeAt(c);return d}function eh(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a)}function ed(a){return Object.keys(a).length}function ec(a){let h=Object.create(null);for(let[d,c]of a)h[d]=c;return h}function eu(){let a=new Uint8Array(4);return a[0]=1,1===new Uint32Array(a.buffer,0,1)[0]}function ep(){try{return Function(""),!0}catch(a){return!1}}h.AbortException=ea;class ef{static get isLittleEndian(){return Q(this,"isLittleEndian",eu())}static get isEvalSupported(){return Q(this,"isEvalSupported",ep())}static get isOffscreenCanvasSupported(){return Q(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"==typeof navigator?Q(this,"platform",{isWin:!1,isMac:!1}):Q(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}h.FeatureTest=ef;let eg=[...Array(256).keys()].map(a=>a.toString(16).padStart(2,"0"));class em{static makeHexColor(a,h,d){return`#${eg[a]}${eg[h]}${eg[d]}`}static scaleMinMax(a,h){let d;a[0]?(a[0]<0&&(d=h[0],h[0]=h[1],h[1]=d),h[0]*=a[0],h[1]*=a[0],a[3]<0&&(d=h[2],h[2]=h[3],h[3]=d),h[2]*=a[3],h[3]*=a[3]):(d=h[0],h[0]=h[2],h[2]=d,d=h[1],h[1]=h[3],h[3]=d,a[1]<0&&(d=h[2],h[2]=h[3],h[3]=d),h[2]*=a[1],h[3]*=a[1],a[2]<0&&(d=h[0],h[0]=h[1],h[1]=d),h[0]*=a[2],h[1]*=a[2]),h[0]+=a[4],h[1]+=a[4],h[2]+=a[5],h[3]+=a[5]}static transform(a,h){return[a[0]*h[0]+a[2]*h[1],a[1]*h[0]+a[3]*h[1],a[0]*h[2]+a[2]*h[3],a[1]*h[2]+a[3]*h[3],a[0]*h[4]+a[2]*h[5]+a[4],a[1]*h[4]+a[3]*h[5]+a[5]]}static applyTransform(a,h){return[a[0]*h[0]+a[1]*h[2]+h[4],a[0]*h[1]+a[1]*h[3]+h[5]]}static applyInverseTransform(a,h){let d=h[0]*h[3]-h[1]*h[2];return[(a[0]*h[3]-a[1]*h[2]+h[2]*h[5]-h[4]*h[3])/d,(-a[0]*h[1]+a[1]*h[0]+h[4]*h[1]-h[5]*h[0])/d]}static getAxialAlignedBoundingBox(a,h){let d=em.applyTransform(a,h),c=em.applyTransform(a.slice(2,4),h),u=em.applyTransform([a[0],a[3]],h),g=em.applyTransform([a[2],a[1]],h);return[Math.min(d[0],c[0],u[0],g[0]),Math.min(d[1],c[1],u[1],g[1]),Math.max(d[0],c[0],u[0],g[0]),Math.max(d[1],c[1],u[1],g[1])]}static inverseTransform(a){let h=a[0]*a[3]-a[1]*a[2];return[a[3]/h,-a[1]/h,-a[2]/h,a[0]/h,(a[2]*a[5]-a[4]*a[3])/h,(a[4]*a[1]-a[5]*a[0])/h]}static singularValueDecompose2dScale(a){let h=[a[0],a[2],a[1],a[3]],d=a[0]*h[0]+a[1]*h[2],c=a[0]*h[1]+a[1]*h[3],u=a[2]*h[0]+a[3]*h[2],g=a[2]*h[1]+a[3]*h[3],m=(d+g)/2,b=Math.sqrt((d+g)**2-4*(d*g-u*c))/2;return[Math.sqrt(m+b||1),Math.sqrt(m-b||1)]}static normalizeRect(a){let h=a.slice(0);return a[0]>a[2]&&(h[0]=a[2],h[2]=a[0]),a[1]>a[3]&&(h[1]=a[3],h[3]=a[1]),h}static intersect(a,h){let d=Math.max(Math.min(a[0],a[2]),Math.min(h[0],h[2])),c=Math.min(Math.max(a[0],a[2]),Math.max(h[0],h[2]));if(d>c)return null;let u=Math.max(Math.min(a[1],a[3]),Math.min(h[1],h[3])),g=Math.min(Math.max(a[1],a[3]),Math.max(h[1],h[3]));return u>g?null:[d,u,c,g]}static bezierBoundingBox(a,h,d,c,u,g,m,b){let v,y,A,_,S,E,C,T;let w=[],R=[[],[]];for(let R=0;R<2;++R){if(0===R?(y=6*a-12*d+6*u,v=-3*a+9*d-9*u+3*m,A=3*d-3*a):(y=6*h-12*c+6*g,v=-3*h+9*c-9*g+3*b,A=3*c-3*h),1e-12>Math.abs(v)){if(1e-12>Math.abs(y))continue;0<(_=-A/y)&&_<1&&w.push(_);continue}T=Math.sqrt(C=y*y-4*A*v),!(C<0)&&(0<(S=(-y+T)/(2*v))&&S<1&&w.push(S),0<(E=(-y-T)/(2*v))&&E<1&&w.push(E))}let k=w.length,M,F=k;for(;k--;)M=1-(_=w[k]),R[0][k]=M*M*M*a+3*M*M*_*d+3*M*_*_*u+_*_*_*m,R[1][k]=M*M*M*h+3*M*M*_*c+3*M*_*_*g+_*_*_*b;return R[0][F]=a,R[1][F]=h,R[0][F+1]=m,R[1][F+1]=b,R[0].length=R[1].length=F+2,[Math.min(...R[0]),Math.min(...R[1]),Math.max(...R[0]),Math.max(...R[1])]}}h.Util=em;let eb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ev(a){if(a[0]>="\xef"){let h;if("\xfe"===a[0]&&"\xff"===a[1]?h="utf-16be":"\xff"===a[0]&&"\xfe"===a[1]?h="utf-16le":"\xef"===a[0]&&"\xbb"===a[1]&&"\xbf"===a[2]&&(h="utf-8"),h)try{let d=new TextDecoder(h,{fatal:!0}),c=el(a);return d.decode(c)}catch(a){$(`stringToPDFString: "${a}".`)}}let h=[];for(let d=0,c=a.length;d<c;d++){let c=eb[a.charCodeAt(d)];h.push(c?String.fromCharCode(c):a.charAt(d))}return h.join("")}function ey(a){return decodeURIComponent(escape(a))}function eA(a){return unescape(encodeURIComponent(a))}function e_(a){return"object"==typeof a&&a?.byteLength!==void 0}function eS(a,h){if(a.length!==h.length)return!1;for(let d=0,c=a.length;d<c;d++)if(a[d]!==h[d])return!1;return!0}function ex(a=new Date){return[a.getUTCFullYear().toString(),(a.getUTCMonth()+1).toString().padStart(2,"0"),a.getUTCDate().toString().padStart(2,"0"),a.getUTCHours().toString().padStart(2,"0"),a.getUTCMinutes().toString().padStart(2,"0"),a.getUTCSeconds().toString().padStart(2,"0")].join("")}class eE{#e;constructor(){this.#e=!1,this.promise=new Promise((a,h)=>{this.resolve=h=>{this.#e=!0,a(h)},this.reject=a=>{this.#e=!0,h(a)}})}get settled(){return this.#e}}h.PromiseCapability=eE;let eC=null,eT=null;function eP(a){return eC||(eC=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,eT=new Map([["ﬅ","ſt"]])),a.replaceAll(eC,(a,h,d)=>h?h.normalize("NFKC"):eT.get(d))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{let createPDFNetworkStream;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){let{NodeCanvasFactory,NodeCMapReaderFactory,NodeFilterFactory,NodeStandardFontDataFactory}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory,exports.DefaultFilterFactory=DefaultFilterFactory=NodeFilterFactory,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}if(_is_node.isNodeJS){let{PDFNodeStream}=__w_pdfjs_require__(21);createPDFNetworkStream=a=>new PDFNodeStream(a)}else{let{PDFNetworkStream}=__w_pdfjs_require__(24),{PDFFetchStream}=__w_pdfjs_require__(25);createPDFNetworkStream=a=>(0,_display_utils.isValidFetchUrl)(a.url)?new PDFFetchStream(a):new PDFNetworkStream(a)}function getDocument(a){if("string"==typeof a||a instanceof URL?a={url:a}:(0,_util.isArrayBuffer)(a)&&(a={data:a}),"object"!=typeof a)throw Error("Invalid parameter in getDocument, need parameter object.");if(!a.url&&!a.data&&!a.range)throw Error("Invalid parameter object: need either .data, .range or .url");let h=new PDFDocumentLoadingTask,{docId:d}=h,c=a.url?getUrlProp(a.url):null,u=a.data?getDataProp(a.data):null,g=a.httpHeaders||null,m=!0===a.withCredentials,b=a.password??null,v=a.range instanceof PDFDataRangeTransport?a.range:null,y=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,A=a.worker instanceof PDFWorker?a.worker:null,_=a.verbosity,S="string"!=typeof a.docBaseUrl||(0,_display_utils.isDataScheme)(a.docBaseUrl)?null:a.docBaseUrl,E="string"==typeof a.cMapUrl?a.cMapUrl:null,C=!1!==a.cMapPacked,T=a.CMapReaderFactory||DefaultCMapReaderFactory,w="string"==typeof a.standardFontDataUrl?a.standardFontDataUrl:null,R=a.StandardFontDataFactory||DefaultStandardFontDataFactory,k=!0!==a.stopAtErrors,M=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,F=!1!==a.isEvalSupported,O="boolean"==typeof a.isOffscreenCanvasSupported?a.isOffscreenCanvasSupported:!_is_node.isNodeJS,I=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,D="boolean"==typeof a.disableFontFace?a.disableFontFace:_is_node.isNodeJS,L=!0===a.fontExtraProperties,N=!0===a.enableXfa,j=a.ownerDocument||globalThis.document,B=!0===a.disableRange,U=!0===a.disableStream,H=!0===a.disableAutoFetch,G=!0===a.pdfBug,q=v?v.length:a.length??NaN,z="boolean"==typeof a.useSystemFonts?a.useSystemFonts:!_is_node.isNodeJS&&!D,V="boolean"==typeof a.useWorkerFetch?a.useWorkerFetch:T===_display_utils.DOMCMapReaderFactory&&R===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(E,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(w,document.baseURI),W=a.canvasFactory||new DefaultCanvasFactory({ownerDocument:j}),$=a.filterFactory||new DefaultFilterFactory({docId:d,ownerDocument:j}),X=null;(0,_util.setVerbosityLevel)(_);let Y={canvasFactory:W,filterFactory:$};if(V||(Y.cMapReaderFactory=new T({baseUrl:E,isCompressed:C}),Y.standardFontDataFactory=new R({baseUrl:w})),!A){let a={verbosity:_,port:_worker_options.GlobalWorkerOptions.workerPort};A=a.port?PDFWorker.fromPort(a):new PDFWorker(a),h._worker=A}let K={docId:d,apiVersion:"3.6.172",data:u,password:b,disableAutoFetch:H,rangeChunkSize:y,length:q,docBaseUrl:S,enableXfa:N,evaluatorOptions:{maxImageSize:M,disableFontFace:D,ignoreErrors:k,isEvalSupported:F,isOffscreenCanvasSupported:O,canvasMaxAreaInBytes:I,fontExtraProperties:L,useSystemFonts:z,cMapUrl:V?E:null,standardFontDataUrl:V?w:null}},J={ignoreErrors:k,isEvalSupported:F,disableFontFace:D,fontExtraProperties:L,enableXfa:N,ownerDocument:j,disableAutoFetch:H,pdfBug:G,styleElement:X};return A.promise.then(function(){if(h.destroyed)throw Error("Loading aborted");return Promise.all([_fetchDocument(A,K),new Promise(function(a){let h;v?h=new _transport_stream.PDFDataTransportStream({length:q,initialData:v.initialData,progressiveDone:v.progressiveDone,contentDispositionFilename:v.contentDispositionFilename,disableRange:B,disableStream:U},v):u||(h=createPDFNetworkStream({url:c,length:q,httpHeaders:g,withCredentials:m,rangeChunkSize:y,disableRange:B,disableStream:U})),a(h)})]).then(function([a,c]){if(h.destroyed)throw Error("Loading aborted");let u=new _message_handler.MessageHandler(d,a,A.port),g=new WorkerTransport(u,h,c,J,Y);h._transport=g,u.send("Ready",null)})}).catch(h._capability.reject),h}async function _fetchDocument(a,h){if(a.destroyed)throw Error("Worker was destroyed");let d=await a.messageHandler.sendWithPromise("GetDocRequest",h,h.data?[h.data.buffer]:null);if(a.destroyed)throw Error("Worker was destroyed");return d}function getUrlProp(a){if(a instanceof URL)return a.href;try{return new URL(a,window.location).href}catch(h){if(_is_node.isNodeJS&&"string"==typeof a)return a}throw Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(a){if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&a instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(a);if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if("string"==typeof a)return(0,_util.stringToBytes)(a);if("object"==typeof a&&!isNaN(a?.length)||(0,_util.isArrayBuffer)(a))return new Uint8Array(a);throw Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static #t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await this._transport?.destroy(),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(a,h,d=!1,c=null){this.length=a,this.initialData=h,this.progressiveDone=d,this.contentDispositionFilename=c,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,h){for(let d of this._rangeListeners)d(a,h)}onDataProgress(a,h){this._readyCapability.promise.then(()=>{for(let d of this._progressListeners)d(a,h)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(let h of this._progressiveReadListeners)h(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,h){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(a,h){this._pdfInfo=a,this._transport=h}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#i;#r;constructor(a,h,d,c=!1){this.#i=null,this.#r=!1,this._pageIndex=a,this._pageInfo=h,this._transport=d,this._stats=c?new _display_utils.StatTimer:null,this._pdfBug=c,this.commonObjs=d.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:h=this.rotate,offsetX:d=0,offsetY:c=0,dontFlip:u=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:a,rotation:h,offsetX:d,offsetY:c,dontFlip:u})}getAnnotations({intent:a="display"}={}){let h=this._transport.getRenderingIntent(a);return this._transport.getAnnotations(this._pageIndex,h.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:a,viewport:h,intent:d="display",annotationMode:c=_util.AnnotationMode.ENABLE,transform:u=null,background:g=null,optionalContentConfigPromise:m=null,annotationCanvasMap:b=null,pageColors:v=null,printAnnotationStorage:y=null}){if(arguments[0]?.canvasFactory)throw Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");this._stats?.time("Overall");let A=this._transport.getRenderingIntent(d,c,y);this.#r=!1,this.#s(),m||(m=this._transport.getOptionalContentConfig());let _=this._intentStates.get(A.cacheKey);_||(_=Object.create(null),this._intentStates.set(A.cacheKey,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);let S=!!(A.renderingIntent&_util.RenderingIntentFlag.PRINT);_.displayReadyCapability||(_.displayReadyCapability=new _util.PromiseCapability,_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(A));let E=a=>{_.renderTasks.delete(C),(this._maybeCleanupAfterRender||S)&&(this.#r=!0),this.#n(!S),a?(C.capability.reject(a),this._abortOperatorList({intentState:_,reason:a instanceof Error?a:Error(a)})):C.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},C=new InternalRenderTask({callback:E,params:{canvasContext:a,viewport:h,transform:u,background:g},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:b,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:v});(_.renderTasks||=new Set).add(C);let T=C.task;return Promise.all([_.displayReadyCapability.promise,m]).then(([a,h])=>{if(this.#r){E();return}this._stats?.time("Rendering"),C.initializeGraphics({transparency:a,optionalContentConfig:h}),C.operatorListChanged()}).catch(E),T}getOperatorList({intent:a="display",annotationMode:h=_util.AnnotationMode.ENABLE,printAnnotationStorage:d=null}={}){let c;function u(){m.operatorList.lastChunk&&(m.opListReadCapability.resolve(m.operatorList),m.renderTasks.delete(c))}let g=this._transport.getRenderingIntent(a,h,d,!0),m=this._intentStates.get(g.cacheKey);return m||(m=Object.create(null),this._intentStates.set(g.cacheKey,m)),m.opListReadCapability||((c=Object.create(null)).operatorListChanged=u,m.opListReadCapability=new _util.PromiseCapability,(m.renderTasks||=new Set).add(c),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(g)),m.opListReadCapability.promise}streamTextContent({includeMarkedContent:a=!1,disableNormalization:h=!1}={}){let d=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===a,disableNormalization:!0===h},{highWaterMark:d,size:a=>a.items.length})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(a=>_xfa_text.XfaText.textContent(a));let h=this.streamTextContent(a);return new Promise(function(a,d){function c(){u.read().then(function({value:h,done:d}){if(d){a(g);return}Object.assign(g.styles,h.styles),g.items.push(...h.items),c()},d)}let u=h.getReader(),g={items:[],styles:Object.create(null)};c()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let a=[];for(let h of this._intentStates.values())if(this._abortOperatorList({intentState:h,reason:Error("Page was destroyed."),force:!0}),!h.opListReadCapability)for(let d of h.renderTasks)a.push(d.completed),d.cancel();return this.objs.clear(),this.#r=!1,this.#s(),Promise.all(a)}cleanup(a=!1){this.#r=!0;let h=this.#n(!1);return a&&h&&(this._stats&&=new _display_utils.StatTimer),h}#n(a=!1){if(this.#s(),!this.#r)return!1;if(a)return this.#i=setTimeout(()=>{this.#i=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(let{renderTasks:a,operatorList:h}of this._intentStates.values())if(a.size>0||!h.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#r=!1,!0}#s(){this.#i&&(clearTimeout(this.#i),this.#i=null)}_startRenderPage(a,h){let d=this._intentStates.get(h);d&&(this._stats?.timeEnd("Page Request"),d.displayReadyCapability?.resolve(a))}_renderPageChunk(a,h){for(let d=0,c=a.length;d<c;d++)h.operatorList.fnArray.push(a.fnArray[d]),h.operatorList.argsArray.push(a.argsArray[d]);for(let d of(h.operatorList.lastChunk=a.lastChunk,h.operatorList.separateAnnots=a.separateAnnots,h.renderTasks))d.operatorListChanged();a.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:a,cacheKey:h,annotationStorageMap:d}){let c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:h,annotationStorage:d}).getReader(),u=this._intentStates.get(h);u.streamReader=c;let g=()=>{c.read().then(({value:a,done:h})=>{if(h){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(a,u),g())},a=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){for(let a of(u.operatorList.lastChunk=!0,u.renderTasks))a.operatorListChanged();this.#n(!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(a);else if(u.opListReadCapability)u.opListReadCapability.reject(a);else throw a}})};g()}_abortOperatorList({intentState:a,reason:h,force:d=!1}){if(a.streamReader){if(a.streamReaderCancelTimeout&&(clearTimeout(a.streamReaderCancelTimeout),a.streamReaderCancelTimeout=null),!d){if(a.renderTasks.size>0)return;if(h instanceof _display_utils.RenderingCancelledException){let d=RENDERING_CANCELLED_TIMEOUT;h.extraDelay>0&&h.extraDelay<1e3&&(d+=h.extraDelay),a.streamReaderCancelTimeout=setTimeout(()=>{a.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:a,reason:h,force:!0})},d);return}}if(a.streamReader.cancel(new _util.AbortException(h.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(let[h,d]of this._intentStates)if(d===a){this._intentStates.delete(h);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#a;#o;postMessage(a,h){let d={data:structuredClone(a,h?{transfer:h}:null)};this.#o.then(()=>{for(let a of this.#a)a.call(this,d)})}addEventListener(a,h){this.#a.add(h)}removeEventListener(a,h){this.#a.delete(h)}terminate(){this.#a.clear()}constructor(){this.#a=new Set,this.#o=Promise.resolve()}}exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){let pdfjsFilePath=document?.currentScript?.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(a,h){let d;try{if(!(d=new URL(a)).origin||"null"===d.origin)return!1}catch(a){return!1}let c=new URL(h,d);return d.origin===c.origin},PDFWorkerUtil.createCDNWrapper=function(a){let h=`importScripts("${a}");`;return URL.createObjectURL(new Blob([h]))};class PDFWorker{static #l=new WeakMap;constructor({name:a=null,port:h=null,verbosity:d=(0,_util.getVerbosityLevel)()}={}){if(h&&PDFWorker.#l.has(h))throw Error("Cannot use more than one PDFWorker per port.");if(this.name=a,this.destroyed=!1,this.verbosity=d,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,h){PDFWorker.#l.set(h,this),this._initializeFromPort(h);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(a){this._port=a,this._messageHandler=new _message_handler.MessageHandler("main","worker",a),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:a}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,a)||(a=PDFWorkerUtil.createCDNWrapper(new URL(a,window.location).href));let h=new Worker(a),d=new _message_handler.MessageHandler("main","worker",h),c=()=>{h.removeEventListener("error",u),d.destroy(),h.terminate(),this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()},u=()=>{this._webWorker||c()};h.addEventListener("error",u),d.on("test",a=>{if(h.removeEventListener("error",u),this.destroyed){c();return}a?(this._messageHandler=d,this._port=h,this._webWorker=h,this._readyCapability.resolve(),d.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),d.destroy(),h.terminate())}),d.on("ready",a=>{if(h.removeEventListener("error",u),this.destroyed){c();return}try{g()}catch(a){this._setupFakeWorker()}});let g=()=>{let a=new Uint8Array;d.send("test",a,[a.buffer])};g();return}catch(a){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(a=>{if(this.destroyed){this._readyCapability.reject(Error("Worker was destroyed"));return}let h=new LoopbackPort;this._port=h;let d=`fake${PDFWorkerUtil.fakeWorkerId++}`,c=new _message_handler.MessageHandler(d+"_worker",d,h);a.setup(c,h);let u=new _message_handler.MessageHandler(d,d+"_worker",h);this._messageHandler=u,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})}).catch(a=>{this._readyCapability.reject(Error(`Setting up fake worker failed: "${a.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#l.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(a){if(!a?.port)throw Error("PDFWorker.fromPort - invalid method signature.");return this.#l.has(a.port)?this.#l.get(a.port):new PDFWorker(a)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch(a){return null}}static get _setupFakeWorkerGlobal(){let loader=async()=>{let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await (0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#h;#d;#c;constructor(a,h,d,c,u){this.#h=new Map,this.#d=new Map,this.#c=new Map,this.messageHandler=a,this.loadingTask=h,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:c.ownerDocument,styleElement:c.styleElement}),this._params=c,this.canvasFactory=u.canvasFactory,this.filterFactory=u.filterFactory,this.cMapReaderFactory=u.cMapReaderFactory,this.standardFontDataFactory=u.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=d,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#u(a,h=null){let d=this.#h.get(a);if(d)return d;let c=this.messageHandler.sendWithPromise(a,h);return this.#h.set(a,c),c}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(a,h=_util.AnnotationMode.ENABLE,d=null,c=!1){let u=_util.RenderingIntentFlag.DISPLAY,g=null;switch(a){case"any":u=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":u=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${a}`)}switch(h){case _util.AnnotationMode.DISABLE:u+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:u+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:g=((u+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE)&_util.RenderingIntentFlag.PRINT&&d instanceof _annotation_storage.PrintAnnotationStorage?d:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${h}`)}return c&&(u+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:u,cacheKey:`${u}_${_annotation_storage.AnnotationStorage.getHash(g)}`,annotationStorageMap:g}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(Error("Worker was destroyed during onPassword callback"));let a=[];for(let h of this.#d.values())a.push(h._destroy());this.#d.clear(),this.#c.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let h=this.messageHandler.sendWithPromise("Terminate",null);return a.push(h),Promise.all(a).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#h.clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:a,loadingTask:h}=this;a.on("GetReader",(a,h)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},h.onPull=()=>{this._fullReader.read().then(function({value:a,done:d}){if(d){h.close();return}(0,_util.assert)(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),h.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{h.error(a)})},h.onCancel=a=>{this._fullReader.cancel(a),h.ready.catch(a=>{if(!this.destroyed)throw a})}}),a.on("ReaderHeadersReady",a=>{let d=new _util.PromiseCapability,c=this._fullReader;return c.headersReady.then(()=>{c.isStreamingSupported&&c.isRangeSupported||(this._lastProgress&&h.onProgress?.(this._lastProgress),c.onProgress=a=>{h.onProgress?.({loaded:a.loaded,total:a.total})}),d.resolve({isStreamingSupported:c.isStreamingSupported,isRangeSupported:c.isRangeSupported,contentLength:c.contentLength})},d.reject),d.promise}),a.on("GetRangeReader",(a,h)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let d=this._networkStream.getRangeReader(a.begin,a.end);if(!d){h.close();return}h.onPull=()=>{d.read().then(function({value:a,done:d}){if(d){h.close();return}(0,_util.assert)(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),h.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{h.error(a)})},h.onCancel=a=>{d.cancel(a),h.ready.catch(a=>{if(!this.destroyed)throw a})}}),a.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,h._capability.resolve(new PDFDocumentProxy(a,this))}),a.on("DocException",function(a){let d;switch(a.name){case"PasswordException":d=new _util.PasswordException(a.message,a.code);break;case"InvalidPDFException":d=new _util.InvalidPDFException(a.message);break;case"MissingPDFException":d=new _util.MissingPDFException(a.message);break;case"UnexpectedResponseException":d=new _util.UnexpectedResponseException(a.message,a.status);break;case"UnknownErrorException":d=new _util.UnknownErrorException(a.message,a.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}h._capability.reject(d)}),a.on("PasswordRequest",a=>{if(this._passwordCapability=new _util.PromiseCapability,h.onPassword){let d=a=>{a instanceof Error?this._passwordCapability.reject(a):this._passwordCapability.resolve({password:a})};try{h.onPassword(d,a.code)}catch(a){this._passwordCapability.reject(a)}}else this._passwordCapability.reject(new _util.PasswordException(a.message,a.code));return this._passwordCapability.promise}),a.on("DataLoaded",a=>{h.onProgress?.({loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),a.on("StartRenderPage",a=>{this.destroyed||this.#d.get(a.pageIndex)._startRenderPage(a.transparency,a.cacheKey)}),a.on("commonobj",([h,d,c])=>{if(!(this.destroyed||this.commonObjs.has(h)))switch(d){case"Font":let u=this._params;if("error"in c){let a=c.error;(0,_util.warn)(`Error during font loading: ${a}`),this.commonObjs.resolve(h,a);break}let g=u.pdfBug&&globalThis.FontInspector?.enabled?(a,h)=>globalThis.FontInspector.fontAdded(a,h):null,m=new _font_loader.FontFaceObject(c,{isEvalSupported:u.isEvalSupported,disableFontFace:u.disableFontFace,ignoreErrors:u.ignoreErrors,inspectFont:g});this.fontLoader.bind(m).catch(d=>a.sendWithPromise("FontFallback",{id:h})).finally(()=>{!u.fontExtraProperties&&m.data&&(m.data=null),this.commonObjs.resolve(h,m)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(h,c);break;default:throw Error(`Got unknown common object type ${d}`)}}),a.on("obj",([a,h,d,c])=>{if(this.destroyed)return;let u=this.#d.get(h);if(!u.objs.has(a))switch(d){case"Image":if(u.objs.resolve(a,c),c){let a;if(c.bitmap){let{width:h,height:d}=c;a=h*d*4}else a=c.data?.length||0;a>_util.MAX_IMAGE_SIZE_TO_CACHE&&(u._maybeCleanupAfterRender=!0)}break;case"Pattern":u.objs.resolve(a,c);break;default:throw Error(`Got unknown object type ${d}`)}}),a.on("DocProgress",a=>{this.destroyed||h.onProgress?.({loaded:a.loaded,total:a.total})}),a.on("FetchBuiltInCMap",a=>this.destroyed?Promise.reject(Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(a):Promise.reject(Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",a=>this.destroyed?Promise.reject(Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(a):Promise.reject(Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(Error("Invalid page request."));let h=a-1,d=this.#c.get(h);if(d)return d;let c=this.messageHandler.sendWithPromise("GetPage",{pageIndex:h}).then(a=>{if(this.destroyed)throw Error("Transport destroyed");let d=new PDFPageProxy(h,a,this,this._params.pdfBug);return this.#d.set(h,d),d});return this.#c.set(h,c),c}getPageIndex(a){return"object"!=typeof a||null===a||!Number.isInteger(a.num)||a.num<0||!Number.isInteger(a.gen)||a.gen<0?Promise.reject(Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen})}getAnnotations(a,h){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:h})}getFieldObjects(){return this.#u("GetFieldObjects")}hasJSActions(){return this.#u("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return"string"!=typeof a?Promise.reject(Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(a=>new _optional_content_config.OptionalContentConfig(a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let a="GetMetadata",h=this.#h.get(a);if(h)return h;let d=this.messageHandler.sendWithPromise(a,null).then(a=>({info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#h.set(a,d),d}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(a=!1){if(!this.destroyed){for(let a of(await this.messageHandler.sendWithPromise("Cleanup",null),this.#d.values()))if(!a.cleanup())throw Error(`startCleanup: Page ${a.pageNumber} is currently rendering.`);this.commonObjs.clear(),a||this.fontLoader.clear(),this.#h.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){let{disableAutoFetch:a,enableXfa:h}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:a,enableXfa:h})}}class PDFObjects{#p;#f(a){return this.#p[a]||(this.#p[a]={capability:new _util.PromiseCapability,data:null})}get(a,h=null){if(h){let d=this.#f(a);return d.capability.promise.then(()=>h(d.data)),null}let d=this.#p[a];if(!d?.capability.settled)throw Error(`Requesting object that isn't resolved yet ${a}.`);return d.data}has(a){let h=this.#p[a];return h?.capability.settled||!1}resolve(a,h=null){let d=this.#f(a);d.data=h,d.capability.resolve()}clear(){for(let a in this.#p){let{data:h}=this.#p[a];h?.bitmap?.close()}this.#p=Object.create(null)}constructor(){this.#p=Object.create(null)}}class RenderTask{#g;constructor(a){this.#g=null,this.#g=a,this.onContinue=null}get promise(){return this.#g.capability.promise}cancel(a=0){this.#g.cancel(null,a)}get separateAnnots(){let{separateAnnots:a}=this.#g.operatorList;if(!a)return!1;let{annotationCanvasMap:h}=this.#g;return a.form||a.canvas&&h?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static #m=new WeakSet;constructor({callback:a,params:h,objs:d,commonObjs:c,annotationCanvasMap:u,operatorList:g,pageIndex:m,canvasFactory:b,filterFactory:v,useRequestAnimationFrame:y=!1,pdfBug:A=!1,pageColors:_=null}){this.callback=a,this.params=h,this.objs=d,this.commonObjs=c,this.annotationCanvasMap=u,this.operatorListIdx=null,this.operatorList=g,this._pageIndex=m,this.canvasFactory=b,this.filterFactory=v,this._pdfBug=A,this.pageColors=_,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===y&&!1,this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=h.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:h}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#m.has(this._canvas))throw Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#m.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:d,viewport:c,transform:u,background:g}=this.params;this.gfx=new _canvas.CanvasGraphics(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:h},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:u,viewport:c,transparency:a,background:g}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(a=null,h=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this._canvas&&InternalRenderTask.#m.delete(this._canvas),this.callback(a||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",h))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){!this.cancelled&&(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&InternalRenderTask.#m.delete(this._canvas),this.callback())))}}let version="3.6.172";exports.version=version;let build="4d3dfe254";exports.build=build},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PrintAnnotationStorage=h.AnnotationStorage=void 0;var c=d(1),u=d(4),g=d(8);class m{#b;#v;constructor(){this.#b=!1,this.#v=new Map,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(a,h){let d=this.#v.get(a);return void 0===d?h:Object.assign(h,d)}getRawValue(a){return this.#v.get(a)}remove(a){if(this.#v.delete(a),0===this.#v.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(let a of this.#v.values())if(a instanceof u.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(a,h){let d=this.#v.get(a),c=!1;if(void 0!==d)for(let[a,u]of Object.entries(h))d[a]!==u&&(c=!0,d[a]=u);else c=!0,this.#v.set(a,h);c&&this.#y(),h instanceof u.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(h.constructor._type)}has(a){return this.#v.has(a)}getAll(){return this.#v.size>0?(0,c.objectFromMap)(this.#v):null}setAll(a){for(let[h,d]of Object.entries(a))this.setValue(h,d)}get size(){return this.#v.size}#y(){this.#b||(this.#b=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#b&&(this.#b=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new b(this)}get serializable(){if(0===this.#v.size)return null;let a=new Map;for(let[h,d]of this.#v){let c=d instanceof u.AnnotationEditor?d.serialize():d;c&&a.set(h,c)}return a}static getHash(a){if(!a)return"";let h=new g.MurmurHash3_64;for(let[d,c]of a)h.update(`${d}:${JSON.stringify(c)}`);return h.hexdigest()}}h.AnnotationStorage=m;class b extends m{#A;constructor(a){super(),this.#A=null,this.#A=structuredClone(a.serializable)}get print(){(0,c.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#A}}h.PrintAnnotationStorage=b},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AnnotationEditor=void 0;var c=d(5),u=d(1);class g{#_;#S;#x;#E;#C;#T;static{this._colorManager=new c.ColorManager}static{this._zIndex=1}constructor(a){this.#_=this.focusin.bind(this),this.#S=this.focusout.bind(this),this.#x=!1,this.#E=!1,this.#C=!1,this._uiManager=null,this.#T=g._zIndex++,this.constructor===g&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null,this._uiManager=a.uiManager;let{rotation:h,rawDims:{pageWidth:d,pageHeight:c,pageX:m,pageY:b}}=this.parent.viewport;this.rotation=h,this.pageRotation=(360+h-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,c],this.pageTranslation=[m,b];let[v,y]=this.parentDimensions;this.x=a.x/v,this.y=a.y/y,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(a){this._uiManager.addCommands(a)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#T}setParent(a){null!==a&&(this.pageIndex=a.pageIndex,this.pageDimensions=a.pageDimensions),this.parent=a}focusin(a){this.#x?this.#x=!1:this.parent.setSelected(this)}focusout(a){if(!this.isAttachedToDOM)return;let h=a.relatedTarget;!h?.closest(`#${this.id}`)&&(a.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(a){let h=this.parent.div.getBoundingClientRect();this.startX=a.clientX-h.x,this.startY=a.clientY-h.y,a.dataTransfer.setData("text/plain",this.id),a.dataTransfer.effectAllowed="move"}setAt(a,h,d,c){let[u,g]=this.parentDimensions;[d,c]=this.screenToPageTranslation(d,c),this.x=(a+d)/u,this.y=(h+c)/g,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(a,h){let[d,c]=this.parentDimensions;[a,h]=this.screenToPageTranslation(a,h),this.x+=a/d,this.y+=h/c,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(a,h){switch(this.parentRotation){case 90:return[h,-a];case 180:return[-a,-h];case 270:return[-h,a];default:return[a,h]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{realScale:a}=this._uiManager.viewParameters,[h,d]=this.pageDimensions;return[h*a,d*a]}setDims(a,h){let[d,c]=this.parentDimensions;this.div.style.width=`${100*a/d}%`,this.div.style.height=`${100*h/c}%`}fixDims(){let{style:a}=this.div,{height:h,width:d}=a,c=d.endsWith("%"),u=h.endsWith("%");if(c&&u)return;let[g,m]=this.parentDimensions;c||(a.width=`${100*parseFloat(d)/g}%`),u||(a.height=`${100*parseFloat(h)/m}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#_),this.div.addEventListener("focusout",this.#S);let[a,h]=this.getInitialTranslation();return this.translate(a,h),(0,c.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(a){let{isMac:h}=u.FeatureTest.platform;if(0!==a.button||a.ctrlKey&&h){a.preventDefault();return}a.ctrlKey&&!h||a.shiftKey||a.metaKey&&h?this.parent.toggleSelected(this):this.parent.setSelected(this),this.#x=!0}getRect(a,h){let d=this.parentScale,[c,u]=this.pageDimensions,[g,m]=this.pageTranslation,b=a/d,v=h/d,y=this.x*c,A=this.y*u,_=this.width*c,S=this.height*u;switch(this.rotation){case 0:return[y+b+g,u-A-v-S+m,y+b+_+g,u-A-v+m];case 90:return[y+v+g,u-A+b+m,y+v+S+g,u-A+b+_+m];case 180:return[y-b-_+g,u-A+v+m,y-b+g,u-A+v+S+m];case 270:return[y-v-S+g,u-A-b-_+m,y-v+g,u-A-b+m];default:throw Error("Invalid rotation")}}getRectInCurrentCoords(a,h){let[d,c,u,g]=a,m=u-d,b=g-c;switch(this.rotation){case 0:return[d,h-g,m,b];case 90:return[d,h-c,b,m];case 180:return[u,h-c,m,b];case 270:return[u,h-g,b,m];default:throw Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#C=!0}disableEditMode(){this.#C=!1}isInEditMode(){return this.#C}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#_)}serialize(){(0,u.unreachable)("An editor must be serializable")}static deserialize(a,h,d){let c=new this.prototype.constructor({parent:h,id:h.getNextId(),uiManager:d});c.rotation=a.rotation;let[u,g]=c.pageDimensions,[m,b,v,y]=c.getRectInCurrentCoords(a.rect,g);return c.x=m/u,c.y=b/g,c.width=v/u,c.height=y/g,c}remove(){this.div.removeEventListener("focusin",this.#_),this.div.removeEventListener("focusout",this.#S),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(a,h){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return this.#E}set isEditing(a){this.#E=a,a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}h.AnnotationEditor=g},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.KeyboardManager=h.CommandManager=h.ColorManager=h.AnnotationEditorUIManager=void 0,h.bindEvents=g,h.opacityToHex=m;var c=d(1),u=d(6);function g(a,h,d){for(let c of d)h.addEventListener(c,a[c].bind(a))}function m(a){return Math.round(Math.min(255,Math.max(1,255*a))).toString(16).padStart(2,"0")}class b{#P;getId(){return`${c.AnnotationEditorPrefix}${this.#P++}`}constructor(){this.#P=0}}class v{#w;#R;#k;#M;constructor(a=128){this.#w=[],this.#R=!1,this.#M=-1,this.#k=a}add({cmd:a,undo:h,mustExec:d,type:c=NaN,overwriteIfSameType:u=!1,keepUndo:g=!1}){if(d&&a(),this.#R)return;let m={cmd:a,undo:h,type:c};if(-1===this.#M){this.#w.length>0&&(this.#w.length=0),this.#M=0,this.#w.push(m);return}if(u&&this.#w[this.#M].type===c){g&&(m.undo=this.#w[this.#M].undo),this.#w[this.#M]=m;return}let b=this.#M+1;b===this.#k?this.#w.splice(0,1):(this.#M=b,b<this.#w.length&&this.#w.splice(b)),this.#w.push(m)}undo(){-1!==this.#M&&(this.#R=!0,this.#w[this.#M].undo(),this.#R=!1,this.#M-=1)}redo(){this.#M<this.#w.length-1&&(this.#M+=1,this.#R=!0,this.#w[this.#M].cmd(),this.#R=!1)}hasSomethingToUndo(){return -1!==this.#M}hasSomethingToRedo(){return this.#M<this.#w.length-1}destroy(){this.#w=null}}h.CommandManager=v;class y{constructor(a){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:h}=c.FeatureTest.platform;for(let[d,c]of a)for(let a of d){let d=a.startsWith("mac+");h&&d?(this.callbacks.set(a.slice(4),c),this.allKeys.add(a.split("+").at(-1))):h||d||(this.callbacks.set(a,c),this.allKeys.add(a.split("+").at(-1)))}}#F(a){a.altKey&&this.buffer.push("alt"),a.ctrlKey&&this.buffer.push("ctrl"),a.metaKey&&this.buffer.push("meta"),a.shiftKey&&this.buffer.push("shift"),this.buffer.push(a.key);let h=this.buffer.join("+");return this.buffer.length=0,h}exec(a,h){if(!this.allKeys.has(h.key))return;let d=this.callbacks.get(this.#F(h));d&&(d.bind(a)(),h.stopPropagation(),h.preventDefault())}}h.KeyboardManager=y;class A{static{this._colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])}get _colors(){let a=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(a),(0,c.shadow)(this,"_colors",a)}convert(a){let h=(0,u.getRGB)(a);if(!window.matchMedia("(forced-colors: active)").matches)return h;for(let[a,d]of this._colors)if(d.every((a,d)=>a===h[d]))return A._colorsMapping.get(a);return h}getHexCode(a){let h=this._colors.get(a);return h?c.Util.makeHexColor(...h):a}}h.ColorManager=A;class _{#O;#I;#D;#L;#N;#j;#B;#U;#H;#G;#q;#z;#V;#W;#$;#X;#Y;#K;#J;#Q;#Z;#ee;#et;static{this._keyboardManager=new y([[["ctrl+a","mac+meta+a"],_.prototype.selectAll],[["ctrl+z","mac+meta+z"],_.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],_.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],_.prototype.delete],[["Escape","mac+Escape"],_.prototype.unselectAll]])}constructor(a,h,d){this.#O=null,this.#I=new Map,this.#D=new Map,this.#L=null,this.#N=new v,this.#j=0,this.#B=null,this.#U=new Set,this.#H=null,this.#G=new b,this.#q=!1,this.#z=c.AnnotationEditorType.NONE,this.#V=new Set,this.#W=this.copy.bind(this),this.#$=this.cut.bind(this),this.#X=this.paste.bind(this),this.#Y=this.keydown.bind(this),this.#K=this.onEditingAction.bind(this),this.#J=this.onPageChanging.bind(this),this.#Q=this.onScaleChanging.bind(this),this.#Z=this.onRotationChanging.bind(this),this.#ee={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1},this.#et=null,this.#et=a,this.#H=h,this.#H._on("editingaction",this.#K),this.#H._on("pagechanging",this.#J),this.#H._on("scalechanging",this.#Q),this.#H._on("rotationchanging",this.#Z),this.#L=d,this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){for(let a of(this.#ei(),this.#H._off("editingaction",this.#K),this.#H._off("pagechanging",this.#J),this.#H._off("scalechanging",this.#Q),this.#H._off("rotationchanging",this.#Z),this.#D.values()))a.destroy();this.#D.clear(),this.#I.clear(),this.#U.clear(),this.#O=null,this.#V.clear(),this.#N.destroy()}onPageChanging({pageNumber:a}){this.#j=a-1}focusMainContainer(){this.#et.focus()}addShouldRescale(a){this.#U.add(a)}removeShouldRescale(a){this.#U.delete(a)}onScaleChanging({scale:a}){for(let h of(this.commitOrRemove(),this.viewParameters.realScale=a*u.PixelsPerInch.PDF_TO_CSS_UNITS,this.#U))h.onScaleChanging()}onRotationChanging({pagesRotation:a}){this.commitOrRemove(),this.viewParameters.rotation=a}addToAnnotationStorage(a){a.isEmpty()||!this.#L||this.#L.has(a.id)||this.#L.setValue(a.id,a)}#er(){this.#et.addEventListener("keydown",this.#Y)}#ei(){this.#et.removeEventListener("keydown",this.#Y)}#es(){document.addEventListener("copy",this.#W),document.addEventListener("cut",this.#$),document.addEventListener("paste",this.#X)}#en(){document.removeEventListener("copy",this.#W),document.removeEventListener("cut",this.#$),document.removeEventListener("paste",this.#X)}copy(a){if(a.preventDefault(),this.#O&&this.#O.commitOrRemove(),!this.hasSelection)return;let h=[];for(let a of this.#V)a.isEmpty()||h.push(a.serialize());0!==h.length&&a.clipboardData.setData("application/pdfjs",JSON.stringify(h))}cut(a){this.copy(a),this.delete()}paste(a){a.preventDefault();let h=a.clipboardData.getData("application/pdfjs");if(!h)return;try{h=JSON.parse(h)}catch(a){(0,c.warn)(`paste: "${a.message}".`);return}if(!Array.isArray(h))return;this.unselectAll();let d=this.#D.get(this.#j);try{let a=[];for(let c of h){let h=d.deserialize(c);if(!h)return;a.push(h)}let c=()=>{for(let h of a)this.#ea(h);this.#eo(a)},u=()=>{for(let h of a)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(a){(0,c.warn)(`paste: "${a.message}".`)}}keydown(a){this.getActive()?.shouldGetKeyboardEvents()||_._keyboardManager.exec(this,a)}onEditingAction(a){["undo","redo","delete","selectAll"].includes(a.name)&&this[a.name]()}#el(a){Object.entries(a).some(([a,h])=>this.#ee[a]!==h)&&this.#H.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#ee,a)})}#eh(a){this.#H.dispatch("annotationeditorparamschanged",{source:this,details:a})}setEditingState(a){a?(this.#er(),this.#es(),this.#el({isEditing:this.#z!==c.AnnotationEditorType.NONE,isEmpty:this.#ed(),hasSomethingToUndo:this.#N.hasSomethingToUndo(),hasSomethingToRedo:this.#N.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ei(),this.#en(),this.#el({isEditing:!1}))}registerEditorTypes(a){if(!this.#B)for(let h of(this.#B=a,this.#B))this.#eh(h.defaultPropertiesToUpdate)}getId(){return this.#G.getId()}get currentLayer(){return this.#D.get(this.#j)}get currentPageIndex(){return this.#j}addLayer(a){this.#D.set(a.pageIndex,a),this.#q?a.enable():a.disable()}removeLayer(a){this.#D.delete(a.pageIndex)}updateMode(a){if(this.#z=a,a===c.AnnotationEditorType.NONE)this.setEditingState(!1),this.#ec();else for(let h of(this.setEditingState(!0),this.#eu(),this.#D.values()))h.updateMode(a)}updateToolbar(a){a!==this.#z&&this.#H.dispatch("switchannotationeditormode",{source:this,mode:a})}updateParams(a,h){if(this.#B){for(let d of this.#V)d.updateParams(a,h);for(let d of this.#B)d.updateDefaultParams(a,h)}}#eu(){if(!this.#q)for(let a of(this.#q=!0,this.#D.values()))a.enable()}#ec(){if(this.unselectAll(),this.#q)for(let a of(this.#q=!1,this.#D.values()))a.disable()}getEditors(a){let h=[];for(let d of this.#I.values())d.pageIndex===a&&h.push(d);return h}getEditor(a){return this.#I.get(a)}addEditor(a){this.#I.set(a.id,a)}removeEditor(a){this.#I.delete(a.id),this.unselect(a),this.#L?.remove(a.id)}#ea(a){let h=this.#D.get(a.pageIndex);h?h.addOrRebuild(a):this.addEditor(a)}setActiveEditor(a){this.#O!==a&&(this.#O=a,a&&this.#eh(a.propertiesToUpdate))}toggleSelected(a){if(this.#V.has(a)){this.#V.delete(a),a.unselect(),this.#el({hasSelectedEditor:this.hasSelection});return}this.#V.add(a),a.select(),this.#eh(a.propertiesToUpdate),this.#el({hasSelectedEditor:!0})}setSelected(a){for(let h of this.#V)h!==a&&h.unselect();this.#V.clear(),this.#V.add(a),a.select(),this.#eh(a.propertiesToUpdate),this.#el({hasSelectedEditor:!0})}isSelected(a){return this.#V.has(a)}unselect(a){a.unselect(),this.#V.delete(a),this.#el({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#V.size}undo(){this.#N.undo(),this.#el({hasSomethingToUndo:this.#N.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#ed()})}redo(){this.#N.redo(),this.#el({hasSomethingToUndo:!0,hasSomethingToRedo:this.#N.hasSomethingToRedo(),isEmpty:this.#ed()})}addCommands(a){this.#N.add(a),this.#el({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#ed()})}#ed(){if(0===this.#I.size)return!0;if(1===this.#I.size)for(let a of this.#I.values())return a.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let a=[...this.#V],h=()=>{for(let h of a)h.remove()},d=()=>{for(let h of a)this.#ea(h)};this.addCommands({cmd:h,undo:d,mustExec:!0})}commitOrRemove(){this.#O?.commitOrRemove()}#eo(a){for(let h of(this.#V.clear(),a))h.isEmpty()||(this.#V.add(h),h.select());this.#el({hasSelectedEditor:!0})}selectAll(){for(let a of this.#V)a.commit();this.#eo(this.#I.values())}unselectAll(){if(this.#O){this.#O.commitOrRemove();return}if(0!==this.#V.size){for(let a of this.#V)a.unselect();this.#V.clear(),this.#el({hasSelectedEditor:!1})}}isActive(a){return this.#O===a}getActive(){return this.#O}getMode(){return this.#z}}h.AnnotationEditorUIManager=_},(a,h,d)=>{let c;Object.defineProperty(h,"__esModule",{value:!0}),h.StatTimer=h.RenderingCancelledException=h.PixelsPerInch=h.PageViewport=h.PDFDateString=h.DOMStandardFontDataFactory=h.DOMSVGFactory=h.DOMFilterFactory=h.DOMCanvasFactory=h.DOMCMapReaderFactory=h.AnnotationPrefix=void 0,h.deprecated=L,h.getColorValues=U,h.getCurrentTransform=H,h.getCurrentTransformInverse=G,h.getFilenameFromUrl=M,h.getPdfFilenameFromUrl=F,h.getRGB=B,h.getXfaPageViewport=j,h.isDataScheme=R,h.isPdfFile=k,h.isValidFetchUrl=I,h.loadScript=D,h.setLayerDimensions=q;var u=d(7),g=d(1);let m="http://www.w3.org/2000/svg",b="pdfjs_internal_id_";h.AnnotationPrefix=b;class v{static{this.CSS=96}static{this.PDF=72}static{this.PDF_TO_CSS_UNITS=this.CSS/this.PDF}}h.PixelsPerInch=v;class y extends u.BaseFilterFactory{#ep;#ef;#t;#eg;#em;#eb;#ev;#P;constructor({docId:a,ownerDocument:h=globalThis.document}={}){super(),this.#P=0,this.#t=a,this.#eg=h}get #ey(){return this.#ep||=new Map}get #eA(){if(!this.#ef){let a=this.#eg.createElement("div"),{style:h}=a;h.visibility="hidden",h.contain="strict",h.width=h.height=0,h.position="absolute",h.top=h.left=0,h.zIndex=-1;let d=this.#eg.createElementNS(m,"svg");d.setAttribute("width",0),d.setAttribute("height",0),this.#ef=this.#eg.createElementNS(m,"defs"),a.append(d),d.append(this.#ef),this.#eg.body.append(a)}return this.#ef}#e_(a,h,d){let c=this.#eg.createElementNS(m,h);c.setAttribute("type","discrete"),c.setAttribute("tableValues",d),a.append(c)}addFilter(a){let h,d,c,u;if(!a)return"none";let g=this.#ey.get(a);if(g)return g;if(1===a.length){let g=a[0],m=Array(256);for(let a=0;a<256;a++)m[a]=g[a]/255;u=h=d=c=m.join(",")}else{let[g,m,b]=a,v=Array(256),y=Array(256),A=Array(256);for(let a=0;a<256;a++)v[a]=g[a]/255,y[a]=m[a]/255,A[a]=b[a]/255;h=v.join(","),d=y.join(","),c=A.join(","),u=`${h}${d}${c}`}if(g=this.#ey.get(u))return this.#ey.set(a,g),g;let b=`g_${this.#t}_transfer_map_${this.#P++}`,v=`url(#${b})`;this.#ey.set(a,v),this.#ey.set(u,v);let y=this.#eg.createElementNS(m,"filter",m);y.setAttribute("id",b),y.setAttribute("color-interpolation-filters","sRGB");let A=this.#eg.createElementNS(m,"feComponentTransfer");return y.append(A),this.#e_(A,"feFuncR",h),this.#e_(A,"feFuncG",d),this.#e_(A,"feFuncB",c),this.#eA.append(y),v}addHCMFilter(a,h){let d=`${a}-${h}`;if(this.#eb===d||(this.#eb=d,this.#ev="none",this.#em?.remove(),!a||!h))return this.#ev;this.#eA.style.color=a;let c=B(a=getComputedStyle(this.#eA).getPropertyValue("color"));a=g.Util.makeHexColor(...c),this.#eA.style.color=h;let u=B(h=getComputedStyle(this.#eA).getPropertyValue("color"));if(h=g.Util.makeHexColor(...u),this.#eA.style.color="","#000000"===a&&"#ffffff"===h||a===h)return this.#ev;let b=Array(256);for(let a=0;a<=255;a++){let h=a/255;b[a]=h<=.03928?h/12.92:((h+.055)/1.055)**2.4}let v=b.join(","),y=`g_${this.#t}_hcm_filter`,A=this.#em=this.#eg.createElementNS(m,"filter",m);A.setAttribute("id",y),A.setAttribute("color-interpolation-filters","sRGB");let _=this.#eg.createElementNS(m,"feComponentTransfer");A.append(_),this.#e_(_,"feFuncR",v),this.#e_(_,"feFuncG",v),this.#e_(_,"feFuncB",v);let S=this.#eg.createElementNS(m,"feColorMatrix");S.setAttribute("type","matrix"),S.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),A.append(S),_=this.#eg.createElementNS(m,"feComponentTransfer"),A.append(_);let E=(a,h)=>{let d=c[a]/255,g=u[a]/255,m=Array(h+1);for(let a=0;a<=h;a++)m[a]=d+a/h*(g-d);return m.join(",")};return this.#e_(_,"feFuncR",E(0,5)),this.#e_(_,"feFuncG",E(1,5)),this.#e_(_,"feFuncB",E(2,5)),this.#eA.append(A),this.#ev=`url(#${y})`,this.#ev}destroy(a=!1){a&&this.#ev||(this.#ef&&(this.#ef.parentNode.parentNode.remove(),this.#ef=null),this.#ep&&(this.#ep.clear(),this.#ep=null),this.#P=0)}}h.DOMFilterFactory=y;class A extends u.BaseCanvasFactory{constructor({ownerDocument:a=globalThis.document}={}){super(),this._document=a}_createCanvas(a,h){let d=this._document.createElement("canvas");return d.width=a,d.height=h,d}}async function _(a,h=!1){if(I(a,document.baseURI)){let d=await fetch(a);if(!d.ok)throw Error(d.statusText);return h?new Uint8Array(await d.arrayBuffer()):(0,g.stringToBytes)(await d.text())}return new Promise((d,c)=>{let u=new XMLHttpRequest;u.open("GET",a,!0),h&&(u.responseType="arraybuffer"),u.onreadystatechange=()=>{if(u.readyState===XMLHttpRequest.DONE){if(200===u.status||0===u.status){let a;if(h&&u.response?a=new Uint8Array(u.response):!h&&u.responseText&&(a=(0,g.stringToBytes)(u.responseText)),a){d(a);return}}c(Error(u.statusText))}},u.send(null)})}h.DOMCanvasFactory=A;class S extends u.BaseCMapReaderFactory{_fetchData(a,h){return _(a,this.isCompressed).then(a=>({cMapData:a,compressionType:h}))}}h.DOMCMapReaderFactory=S;class E extends u.BaseStandardFontDataFactory{_fetchData(a){return _(a,!0)}}h.DOMStandardFontDataFactory=E;class C extends u.BaseSVGFactory{_createSVG(a){return document.createElementNS(m,a)}}h.DOMSVGFactory=C;class T{constructor({viewBox:a,scale:h,rotation:d,offsetX:c=0,offsetY:u=0,dontFlip:g=!1}){let m,b,v,y,A,_,S,E;this.viewBox=a,this.scale=h,this.rotation=d,this.offsetX=c,this.offsetY=u;let C=(a[2]+a[0])/2,T=(a[3]+a[1])/2;switch((d%=360)<0&&(d+=360),d){case 180:m=-1,b=0,v=0,y=1;break;case 90:m=0,b=1,v=1,y=0;break;case 270:m=0,b=-1,v=-1,y=0;break;case 0:m=1,b=0,v=0,y=-1;break;default:throw Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}g&&(v=-v,y=-y),0===m?(A=Math.abs(T-a[1])*h+c,_=Math.abs(C-a[0])*h+u,S=(a[3]-a[1])*h,E=(a[2]-a[0])*h):(A=Math.abs(C-a[0])*h+c,_=Math.abs(T-a[1])*h+u,S=(a[2]-a[0])*h,E=(a[3]-a[1])*h),this.transform=[m*h,b*h,v*h,y*h,A-m*h*C-v*h*T,_-b*h*C-y*h*T],this.width=S,this.height=E}get rawDims(){let{viewBox:a}=this;return(0,g.shadow)(this,"rawDims",{pageWidth:a[2]-a[0],pageHeight:a[3]-a[1],pageX:a[0],pageY:a[1]})}clone({scale:a=this.scale,rotation:h=this.rotation,offsetX:d=this.offsetX,offsetY:c=this.offsetY,dontFlip:u=!1}={}){return new T({viewBox:this.viewBox.slice(),scale:a,rotation:h,offsetX:d,offsetY:c,dontFlip:u})}convertToViewportPoint(a,h){return g.Util.applyTransform([a,h],this.transform)}convertToViewportRectangle(a){let h=g.Util.applyTransform([a[0],a[1]],this.transform),d=g.Util.applyTransform([a[2],a[3]],this.transform);return[h[0],h[1],d[0],d[1]]}convertToPdfPoint(a,h){return g.Util.applyInverseTransform([a,h],this.transform)}}h.PageViewport=T;class w extends g.BaseException{constructor(a,h,d=0){super(a,"RenderingCancelledException"),this.type=h,this.extraDelay=d}}function R(a){let h=a.length,d=0;for(;d<h&&""===a[d].trim();)d++;return"data:"===a.substring(d,d+5).toLowerCase()}function k(a){return"string"==typeof a&&/\.pdf$/i.test(a)}function M(a,h=!1){return h||([a]=a.split(/[#?]/,1)),a.substring(a.lastIndexOf("/")+1)}function F(a,h="document.pdf"){if("string"!=typeof a)return h;if(R(a))return(0,g.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),h;let d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,c=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(a),u=d.exec(c[1])||d.exec(c[2])||d.exec(c[3]);if(u&&(u=u[0]).includes("%"))try{u=d.exec(decodeURIComponent(u))[0]}catch(a){}return u||h}h.RenderingCancelledException=w;class O{time(a){a in this.started&&(0,g.warn)(`Timer is already running for ${a}`),this.started[a]=Date.now()}timeEnd(a){a in this.started||(0,g.warn)(`Timer has not been started for ${a}`),this.times.push({name:a,start:this.started[a],end:Date.now()}),delete this.started[a]}toString(){let a=[],h=0;for(let{name:a}of this.times)h=Math.max(a.length,h);for(let{name:d,start:c,end:u}of this.times)a.push(`${d.padEnd(h)} ${u-c}ms
`);return a.join("")}constructor(){this.started=Object.create(null),this.times=[]}}function I(a,h){try{let{protocol:d}=h?new URL(a,h):new URL(a);return"http:"===d||"https:"===d}catch(a){return!1}}function D(a,h=!1){return new Promise((d,c)=>{let u=document.createElement("script");u.src=a,u.onload=function(a){h&&u.remove(),d(a)},u.onerror=function(){c(Error(`Cannot load script at: ${u.src}`))},(document.head||document.documentElement).append(u)})}function L(a){console.log("Deprecated API usage: "+a)}h.StatTimer=O;class N{static toDateObject(a){if(!a||"string"!=typeof a)return null;c||(c=RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let h=c.exec(a);if(!h)return null;let d=parseInt(h[1],10),u=parseInt(h[2],10);u=u>=1&&u<=12?u-1:0;let g=parseInt(h[3],10);g=g>=1&&g<=31?g:1;let m=parseInt(h[4],10);m=m>=0&&m<=23?m:0;let b=parseInt(h[5],10);b=b>=0&&b<=59?b:0;let v=parseInt(h[6],10);v=v>=0&&v<=59?v:0;let y=h[7]||"Z",A=parseInt(h[8],10);A=A>=0&&A<=23?A:0;let _=parseInt(h[9],10)||0;return _=_>=0&&_<=59?_:0,"-"===y?(m+=A,b+=_):"+"===y&&(m-=A,b-=_),new Date(Date.UTC(d,u,g,m,b,v))}}function j(a,{scale:h=1,rotation:d=0}){let{width:c,height:u}=a.attributes.style;return new T({viewBox:[0,0,parseInt(c),parseInt(u)],scale:h,rotation:d})}function B(a){if(a.startsWith("#")){let h=parseInt(a.slice(1),16);return[(16711680&h)>>16,(65280&h)>>8,255&h]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(a=>parseInt(a)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(a=>parseInt(a)).slice(0,3):((0,g.warn)(`Not a valid color format: "${a}"`),[0,0,0])}function U(a){let h=document.createElement("span");for(let d of(h.style.visibility="hidden",document.body.append(h),a.keys())){h.style.color=d;let c=window.getComputedStyle(h).color;a.set(d,B(c))}h.remove()}function H(a){let{a:h,b:d,c:c,d:u,e:g,f:m}=a.getTransform();return[h,d,c,u,g,m]}function G(a){let{a:h,b:d,c:c,d:u,e:g,f:m}=a.getTransform().invertSelf();return[h,d,c,u,g,m]}function q(a,h,d=!1,c=!0){if(h instanceof T){let{pageWidth:c,pageHeight:u}=h.rawDims,{style:g}=a,m=`calc(var(--scale-factor) * ${c}px)`,b=`calc(var(--scale-factor) * ${u}px)`;d&&h.rotation%180!=0?(g.width=b,g.height=m):(g.width=m,g.height=b)}c&&a.setAttribute("data-main-rotation",h.rotation)}h.PDFDateString=N},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BaseStandardFontDataFactory=h.BaseSVGFactory=h.BaseFilterFactory=h.BaseCanvasFactory=h.BaseCMapReaderFactory=void 0;var c=d(1);class u{constructor(){this.constructor===u&&(0,c.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(a){return"none"}addHCMFilter(a,h){return"none"}destroy(a=!1){}}h.BaseFilterFactory=u;class g{constructor(){this.constructor===g&&(0,c.unreachable)("Cannot initialize BaseCanvasFactory.")}create(a,h){if(a<=0||h<=0)throw Error("Invalid canvas size");let d=this._createCanvas(a,h);return{canvas:d,context:d.getContext("2d")}}reset(a,h,d){if(!a.canvas)throw Error("Canvas is not specified");if(h<=0||d<=0)throw Error("Invalid canvas size");a.canvas.width=h,a.canvas.height=d}destroy(a){if(!a.canvas)throw Error("Canvas is not specified");a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}_createCanvas(a,h){(0,c.unreachable)("Abstract method `_createCanvas` called.")}}h.BaseCanvasFactory=g;class m{constructor({baseUrl:a=null,isCompressed:h=!0}){this.constructor===m&&(0,c.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=a,this.isCompressed=h}async fetch({name:a}){if(!this.baseUrl)throw Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!a)throw Error("CMap name must be specified.");let h=this.baseUrl+a+(this.isCompressed?".bcmap":""),d=this.isCompressed?c.CMapCompressionType.BINARY:c.CMapCompressionType.NONE;return this._fetchData(h,d).catch(a=>{throw Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${h}`)})}_fetchData(a,h){(0,c.unreachable)("Abstract method `_fetchData` called.")}}h.BaseCMapReaderFactory=m;class b{constructor({baseUrl:a=null}){this.constructor===b&&(0,c.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=a}async fetch({filename:a}){if(!this.baseUrl)throw Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!a)throw Error("Font filename must be specified.");let h=`${this.baseUrl}${a}`;return this._fetchData(h).catch(a=>{throw Error(`Unable to load font data at: ${h}`)})}_fetchData(a){(0,c.unreachable)("Abstract method `_fetchData` called.")}}h.BaseStandardFontDataFactory=b;class v{constructor(){this.constructor===v&&(0,c.unreachable)("Cannot initialize BaseSVGFactory.")}create(a,h,d=!1){if(a<=0||h<=0)throw Error("Invalid SVG dimensions");let c=this._createSVG("svg:svg");return c.setAttribute("version","1.1"),d||(c.setAttribute("width",`${a}px`),c.setAttribute("height",`${h}px`)),c.setAttribute("preserveAspectRatio","none"),c.setAttribute("viewBox",`0 0 ${a} ${h}`),c}createElement(a){if("string"!=typeof a)throw Error("Invalid SVG element type");return this._createSVG(a)}_createSVG(a){(0,c.unreachable)("Abstract method `_createSVG` called.")}}h.BaseSVGFactory=v},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.MurmurHash3_64=void 0;var c=d(1);let u=3285377520,g=4294901760,m=65535;class b{constructor(a){this.h1=a?4294967295&a:u,this.h2=a?4294967295&a:u}update(a){let h,d;if("string"==typeof a){h=new Uint8Array(2*a.length),d=0;for(let c=0,u=a.length;c<u;c++){let u=a.charCodeAt(c);u<=255?h[d++]=u:(h[d++]=u>>>8,h[d++]=255&u)}}else if((0,c.isArrayBuffer)(a))d=(h=a.slice()).byteLength;else throw Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");let u=d>>2,b=d-4*u,v=new Uint32Array(h.buffer,0,u),y=0,A=0,_=this.h1,S=this.h2,E=3432918353,C=461845907,T=3432918353&m,w=461845907&m;for(let a=0;a<u;a++)1&a?(_^=y=(y=(y=(y=v[a])*E&g|y*T&m)<<15|y>>>17)*C&g|y*w&m,_=5*(_=_<<13|_>>>19)+3864292196):(S^=A=(A=(A=(A=v[a])*E&g|A*T&m)<<15|A>>>17)*C&g|A*w&m,S=5*(S=S<<13|S>>>19)+3864292196);switch(y=0,b){case 3:y^=h[4*u+2]<<16;case 2:y^=h[4*u+1]<<8;case 1:y^=h[4*u],y=(y=(y=y*E&g|y*T&m)<<15|y>>>17)*C&g|y*w&m,1&u?_^=y:S^=y}this.h1=_,this.h2=S}hexdigest(){let a=this.h1,h=this.h2;return a^=h>>>1,a=3981806797*a&g|36045*a&m,h=4283543511*h&g|((h<<16|a>>>16)*2950163797&g)>>>16,a^=h>>>1,a=444984403*a&g|60499*a&m,h=3301882366*h&g|((h<<16|a>>>16)*3120437893&g)>>>16,((a^=h>>>1)>>>0).toString(16).padStart(8,"0")+(h>>>0).toString(16).padStart(8,"0")}}h.MurmurHash3_64=b},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.FontLoader=h.FontFaceObject=void 0;var c=d(1),u=d(10);class g{constructor({ownerDocument:a=globalThis.document,styleElement:h=null}){this._document=a,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(a){this.nativeFontFaces.push(a),this._document.fonts.add(a)}insertRule(a){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let h=this.styleElement.sheet;h.insertRule(a,h.cssRules.length)}clear(){for(let a of this.nativeFontFaces)this._document.fonts.delete(a);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(a){if(a.attached||a.missingFile)return;if(a.attached=!0,this.isFontLoadingAPISupported){let h=a.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(d){throw(0,c.warn)(`Failed to load font '${h.family}': '${d}'.`),a.disableFontFace=!0,d}}return}let h=a.createFontFaceRule();if(h){if(this.insertRule(h),this.isSyncFontLoadingSupported)return;await new Promise(h=>{let d=this._queueLoadingCallback(h);this._prepareFontLoadEvent(a,d)})}}get isFontLoadingAPISupported(){let a=!!this._document?.fonts;return(0,c.shadow)(this,"isFontLoadingAPISupported",a)}get isSyncFontLoadingSupported(){let a=!1;return u.isNodeJS?a=!0:"undefined"!=typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent)&&(a=!0),(0,c.shadow)(this,"isSyncFontLoadingSupported",a)}_queueLoadingCallback(a){let{loadingRequests:h}=this,d={done:!1,complete:function(){for((0,c.assert)(!d.done,"completeRequest() cannot be called twice."),d.done=!0;h.length>0&&h[0].done;)setTimeout(h.shift().callback,0)},callback:a};return h.push(d),d}get _loadTestFont(){let a=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,c.shadow)(this,"_loadTestFont",a)}_prepareFontLoadEvent(a,h){let d,u;function g(a,h){return a.charCodeAt(h)<<24|a.charCodeAt(h+1)<<16|a.charCodeAt(h+2)<<8|255&a.charCodeAt(h+3)}function m(a,h,d,c){return a.substring(0,h)+c+a.substring(h+d)}let b=this._document.createElement("canvas");b.width=1,b.height=1;let v=b.getContext("2d"),y=0;function A(a,h){if(++y>30){(0,c.warn)("Load test font never loaded."),h();return}if(v.font="30px "+a,v.fillText(".",0,20),v.getImageData(0,0,1,1).data[3]>0){h();return}setTimeout(A.bind(null,a,h))}let _=`lt${Date.now()}${this.loadTestFontId++}`,S=this._loadTestFont;S=m(S,976,_.length,_);let E=16,C=1482184792,T=g(S,16);for(d=0,u=_.length-3;d<u;d+=4)T=T-C+g(_,d)|0;d<_.length&&(T=T-C+g(_+"XXX",d)|0),S=m(S,E,4,(0,c.string32)(T));let w=`url(data:font/opentype;base64,${btoa(S)});`,R=`@font-face {font-family:"${_}";src:${w}}`;this.insertRule(R);let k=this._document.createElement("div");for(let h of(k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px",[a.loadedName,_])){let a=this._document.createElement("span");a.textContent="Hi",a.style.fontFamily=h,k.append(a)}this._document.body.append(k),A(_,()=>{k.remove(),h.complete()})}}h.FontLoader=g;class m{constructor(a,{isEvalSupported:h=!0,disableFontFace:d=!1,ignoreErrors:c=!1,inspectFont:u=null}){for(let h in this.compiledGlyphs=Object.create(null),a)this[h]=a[h];this.isEvalSupported=!1!==h,this.disableFontFace=!0===d,this.ignoreErrors=!0===c,this._inspectFont=u}createNativeFontFace(){let a;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){let h={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(h.style=`oblique ${this.cssFontInfo.italicAngle}deg`),a=new FontFace(this.cssFontInfo.fontFamily,this.data,h)}else a=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),a}createFontFaceRule(){let a;if(!this.data||this.disableFontFace)return null;let h=(0,c.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(h)});`;if(this.cssFontInfo){let h=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(h+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${h}src:${d}}`}else a=`@font-face {font-family:"${this.loadedName}";src:${d}}`;return this._inspectFont?.(this,d),a}getPathGenerator(a,h){let d;if(void 0!==this.compiledGlyphs[h])return this.compiledGlyphs[h];try{d=a.get(this.loadedName+"_path_"+h)}catch(a){if(!this.ignoreErrors)throw a;return(0,c.warn)(`getPathGenerator - ignoring character: "${a}".`),this.compiledGlyphs[h]=function(a,h){}}if(this.isEvalSupported&&c.FeatureTest.isEvalSupported){let a=[];for(let h of d){let d=void 0!==h.args?h.args.join(","):"";a.push("c.",h.cmd,"(",d,");\n")}return this.compiledGlyphs[h]=Function("c","size",a.join(""))}return this.compiledGlyphs[h]=function(a,h){for(let c of d)"scale"===c.cmd&&(c.args=[h,-h]),a[c.cmd].apply(a,c.args)}}}h.FontFaceObject=m},(a,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.isNodeJS=void 0;let d="object"==typeof process&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type);h.isNodeJS=d},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CanvasGraphics=void 0;var c=d(1),u=d(6),g=d(12),m=d(13),b=d(10);let v=16,y=100,A=4096,_=15,S=10,E=1e3,C=16;function T(a,h){if(a._removeMirroring)throw Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){h.save(),this.__originalSave()},a.restore=function(){h.restore(),this.__originalRestore()},a.translate=function(a,d){h.translate(a,d),this.__originalTranslate(a,d)},a.scale=function(a,d){h.scale(a,d),this.__originalScale(a,d)},a.transform=function(a,d,c,u,g,m){h.transform(a,d,c,u,g,m),this.__originalTransform(a,d,c,u,g,m)},a.setTransform=function(a,d,c,u,g,m){h.setTransform(a,d,c,u,g,m),this.__originalSetTransform(a,d,c,u,g,m)},a.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},a.rotate=function(a){h.rotate(a),this.__originalRotate(a)},a.clip=function(a){h.clip(a),this.__originalClip(a)},a.moveTo=function(a,d){h.moveTo(a,d),this.__originalMoveTo(a,d)},a.lineTo=function(a,d){h.lineTo(a,d),this.__originalLineTo(a,d)},a.bezierCurveTo=function(a,d,c,u,g,m){h.bezierCurveTo(a,d,c,u,g,m),this.__originalBezierCurveTo(a,d,c,u,g,m)},a.rect=function(a,d,c,u){h.rect(a,d,c,u),this.__originalRect(a,d,c,u)},a.closePath=function(){h.closePath(),this.__originalClosePath()},a.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}class w{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,h,d){let c;return void 0!==this.cache[a]?(c=this.cache[a],this.canvasFactory.reset(c,h,d)):(c=this.canvasFactory.create(h,d),this.cache[a]=c),c}delete(a){delete this.cache[a]}clear(){for(let a in this.cache){let h=this.cache[a];this.canvasFactory.destroy(h),delete this.cache[a]}}}function R(a,h,d,c,g,m,b,v,y,A){let[_,S,E,C,T,w]=(0,u.getCurrentTransform)(a);if(0===S&&0===E){let u=Math.round(b*_+T),R=Math.round(v*C+w),k=Math.abs(Math.round((b+y)*_+T)-u)||1,M=Math.abs(Math.round((v+A)*C+w)-R)||1;return a.setTransform(Math.sign(_),0,0,Math.sign(C),u,R),a.drawImage(h,d,c,g,m,0,0,k,M),a.setTransform(_,S,E,C,T,w),[k,M]}if(0===_&&0===C){let u=Math.round(v*E+T),R=Math.round(b*S+w),k=Math.abs(Math.round((v+A)*E+T)-u)||1,M=Math.abs(Math.round((b+y)*S+w)-R)||1;return a.setTransform(0,Math.sign(S),Math.sign(E),0,u,R),a.drawImage(h,d,c,g,m,0,0,M,k),a.setTransform(_,S,E,C,T,w),[M,k]}return a.drawImage(h,d,c,g,m,b,v,y,A),[Math.hypot(_,S)*y,Math.hypot(E,C)*A]}function k(a){let h,d,c;let{width:u,height:g}=a;if(u>E||g>E)return null;let m=1e3,b=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),v=u+1,y=new Uint8Array(v*(g+1)),A=u+7&-8,_=new Uint8Array(A*g),S=0;for(let h of a.data){let a=128;for(;a>0;)_[S++]=h&a?0:255,a>>=1}let C=0;for(0!==_[S=0]&&(y[0]=1,++C),d=1;d<u;d++)_[S]!==_[S+1]&&(y[d]=_[S]?2:1,++C),S++;for(0!==_[S]&&(y[d]=2,++C),h=1;h<g;h++){S=h*A,c=h*v,_[S-A]!==_[S]&&(y[c]=_[S]?1:8,++C);let a=(_[S]?4:0)+(_[S-A]?8:0);for(d=1;d<u;d++)b[a=(a>>2)+(_[S+1]?4:0)+(_[S-A+1]?8:0)]&&(y[c+d]=b[a],++C),S++;if(_[S-A]!==_[S]&&(y[c+d]=_[S]?2:4,++C),C>m)return null}for(S=A*(g-1),c=h*v,0!==_[S]&&(y[c]=8,++C),d=1;d<u;d++)_[S]!==_[S+1]&&(y[c+d]=_[S]?4:8,++C),S++;if(0!==_[S]&&(y[c+d]=4,++C),C>m)return null;let T=new Int32Array([0,v,-1,0,-v,0,0,0,1]),w=new Path2D;for(h=0;C&&h<=g;h++){let a=h*v,d=a+u;for(;a<d&&!y[a];)a++;if(a===d)continue;w.moveTo(a%v,h);let c=a,g=y[a];do{let h=T[g];do a+=h;while(!y[a]);let d=y[a];5!==d&&10!==d?(g=d,y[a]=0):(g=d&51*g>>4,y[a]&=g>>2|g<<2),w.lineTo(a%v,a/v|0),!y[a]&&--C}while(c!==a);--h}return _=null,y=null,function(a){a.save(),a.scale(1/u,-1/g),a.translate(0,-g),a.fill(w),a.beginPath(),a.restore()}}class M{constructor(a,h){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=c.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=c.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,a,h])}clone(){let a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,h){this.x=a,this.y=h}updatePathMinMax(a,h,d){[h,d]=c.Util.applyTransform([h,d],a),this.minX=Math.min(this.minX,h),this.minY=Math.min(this.minY,d),this.maxX=Math.max(this.maxX,h),this.maxY=Math.max(this.maxY,d)}updateRectMinMax(a,h){let d=c.Util.applyTransform(h,a),u=c.Util.applyTransform(h.slice(2),a);this.minX=Math.min(this.minX,d[0],u[0]),this.minY=Math.min(this.minY,d[1],u[1]),this.maxX=Math.max(this.maxX,d[0],u[0]),this.maxY=Math.max(this.maxY,d[1],u[1])}updateScalingPathMinMax(a,h){c.Util.scaleMinMax(a,h),this.minX=Math.min(this.minX,h[0]),this.maxX=Math.max(this.maxX,h[1]),this.minY=Math.min(this.minY,h[2]),this.maxY=Math.max(this.maxY,h[3])}updateCurvePathMinMax(a,h,d,u,g,m,b,v,y,A){let _=c.Util.bezierBoundingBox(h,d,u,g,m,b,v,y);if(A){A[0]=Math.min(A[0],_[0],_[2]),A[1]=Math.max(A[1],_[0],_[2]),A[2]=Math.min(A[2],_[1],_[3]),A[3]=Math.max(A[3],_[1],_[3]);return}this.updateRectMinMax(a,_)}getPathBoundingBox(a=g.PathType.FILL,h=null){let d=[this.minX,this.minY,this.maxX,this.maxY];if(a===g.PathType.STROKE){h||(0,c.unreachable)("Stroke bounding box must include transform.");let a=c.Util.singularValueDecompose2dScale(h),u=a[0]*this.lineWidth/2,g=a[1]*this.lineWidth/2;d[0]-=u,d[1]-=g,d[2]+=u,d[3]+=g}return d}updateClipFromPath(){let a=c.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=g.PathType.FILL,h=null){return c.Util.intersect(this.clipBox,this.getPathBoundingBox(a,h))}}function F(a,h){let d,u,g,m;if("undefined"!=typeof ImageData&&h instanceof ImageData){a.putImageData(h,0,0);return}let b=h.height,v=h.width,y=b%C,A=(b-y)/C,_=0===y?A:A+1,S=a.createImageData(v,C),E=0,T,w=h.data,R=S.data;if(h.kind===c.ImageKind.GRAYSCALE_1BPP){let h=w.byteLength,m=new Uint32Array(R.buffer,0,R.byteLength>>2),b=m.length,k=v+7>>3,M=4294967295,F=c.FeatureTest.isLittleEndian?4278190080:255;for(d=0;d<_;d++){for(u=0,g=d<A?C:y,T=0;u<g;u++){let a=h-E,d=0,c=a>k?v:8*a-7,u=-8&c,g=0,b=0;for(;d<u;d+=8)b=w[E++],m[T++]=128&b?M:F,m[T++]=64&b?M:F,m[T++]=32&b?M:F,m[T++]=16&b?M:F,m[T++]=8&b?M:F,m[T++]=4&b?M:F,m[T++]=2&b?M:F,m[T++]=1&b?M:F;for(;d<c;d++)0===g&&(b=w[E++],g=128),m[T++]=b&g?M:F,g>>=1}for(;T<b;)m[T++]=0;a.putImageData(S,0,d*C)}}else if(h.kind===c.ImageKind.RGBA_32BPP){for(d=0,u=0,m=v*C*4;d<A;d++)R.set(w.subarray(E,E+m)),E+=m,a.putImageData(S,0,u),u+=C;d<_&&(m=v*y*4,R.set(w.subarray(E,E+m)),a.putImageData(S,0,u))}else if(h.kind===c.ImageKind.RGB_24BPP)for(d=0,m=v*(g=C);d<_;d++){for(d>=A&&(m=v*(g=y)),T=0,u=m;u--;)R[T++]=w[E++],R[T++]=w[E++],R[T++]=w[E++],R[T++]=255;a.putImageData(S,0,d*C)}else throw Error(`bad image kind: ${h.kind}`)}function O(a,h){if(h.bitmap){a.drawImage(h.bitmap,0,0);return}let d=h.height,c=h.width,u=d%C,g=(d-u)/C,b=0===u?g:g+1,v=a.createImageData(c,C),y=0,A=h.data,_=v.data;for(let h=0;h<b;h++){let d=h<g?C:u;({srcPos:y}=(0,m.convertBlackAndWhiteToRGBA)({src:A,srcPos:y,dest:_,width:c,height:d,nonBlackColor:0})),a.putImageData(v,0,h*C)}}function I(a,h){for(let d of["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"])void 0!==a[d]&&(h[d]=a[d]);void 0!==a.setLineDash&&(h.setLineDash(a.getLineDash()),h.lineDashOffset=a.lineDashOffset)}function D(a){a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",void 0!==a.setLineDash&&(a.setLineDash([]),a.lineDashOffset=0),b.isNodeJS||(a.filter="none")}function L(a,h,d,c){let u=a.length;for(let g=3;g<u;g+=4){let u=a[g];if(0===u)a[g-3]=h,a[g-2]=d,a[g-1]=c;else if(u<255){let m=255-u;a[g-3]=a[g-3]*u+h*m>>8,a[g-2]=a[g-2]*u+d*m>>8,a[g-1]=a[g-1]*u+c*m>>8}}}function N(a,h,d){let c=a.length,u=1/255;for(let g=3;g<c;g+=4){let c=d?d[a[g]]:a[g];h[g]=h[g]*c*u|0}}function j(a,h,d){let c=a.length;for(let u=3;u<c;u+=4){let c=77*a[u-3]+152*a[u-2]+28*a[u-1];h[u]=d?h[u]*d[c>>8]>>8:h[u]*c>>16}}function B(a,h,d,c,u,g,m,b,v,y,A){let _;let S=!!g,E=S?g[0]:0,C=S?g[1]:0,T=S?g[2]:0;_="Luminosity"===u?j:N;let w=Math.min(c,Math.ceil(1048576/d));for(let u=0;u<c;u+=w){let g=Math.min(w,c-u),R=a.getImageData(b-y,u+(v-A),d,g),k=h.getImageData(b,u+v,d,g);S&&L(R.data,E,C,T),_(R.data,k.data,m),h.putImageData(k,b,u+v)}}function U(a,h,d,c){let u=c[0],g=c[1],m=c[2]-u,b=c[3]-g;0!==m&&0!==b&&(B(h.context,d,m,b,h.subtype,h.backdrop,h.transferMap,u,g,h.offsetX,h.offsetY),a.save(),a.globalAlpha=1,a.globalCompositeOperation="source-over",a.setTransform(1,0,0,1,0,0),a.drawImage(d.canvas,0,0),a.restore())}function H(a,h){let d=c.Util.singularValueDecompose2dScale(a);d[0]=Math.fround(d[0]),d[1]=Math.fround(d[1]);let g=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==h?h:d[0]<=g||d[1]<=g}let G=["butt","round","square"],q=["miter","round","bevel"],z={},V={};class W{constructor(a,h,d,c,u,{optionalContentConfig:g,markedContentStack:m=null},b,v){this.ctx=a,this.current=new M(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=h,this.objs=d,this.canvasFactory=c,this.filterFactory=u,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=m||[],this.optionalContentConfig=g,this.cachedCanvases=new w(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=b,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=v,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,h=null){return"string"==typeof a?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):h}beginDrawing({transform:a,viewport:h,transparency:d=!1,background:c=null}){let g=this.ctx.canvas.width,m=this.ctx.canvas.height,b=this.ctx.fillStyle;if(this.ctx.fillStyle=c||"#ffffff",this.ctx.fillRect(0,0,g,m),this.ctx.fillStyle=b,d){let a=this.cachedCanvases.getCanvas("transparent",g,m);this.compositeCtx=this.ctx,this.transparentCanvas=a.canvas,this.ctx=a.context,this.ctx.save(),this.ctx.transform(...(0,u.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),D(this.ctx),a&&(this.ctx.transform(...a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform(...h.transform),this.viewportScale=h.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx)}executeOperatorList(a,h,d,u){let g;let m=a.argsArray,b=a.fnArray,v=h||0,y=m.length;if(y===v)return v;let A=y-v>S&&"function"==typeof d,E=A?Date.now()+_:0,C=0,T=this.commonObjs,w=this.objs;for(;;){if(void 0!==u&&v===u.nextBreakPoint)return u.breakIt(v,d),v;if((g=b[v])!==c.OPS.dependency)this[g].apply(this,m[v]);else for(let a of m[v]){let h=a.startsWith("g_")?T:w;if(!h.has(a))return h.get(a,d),v}if(++v===y)return v;if(A&&++C>S){if(Date.now()>E)return d(),v;C=0}}}#eS(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){for(let a of(this.#eS(),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this._cachedBitmapsMap.values())){for(let h of a.values())"undefined"!=typeof HTMLCanvasElement&&h instanceof HTMLCanvasElement&&(h.width=h.height=0);a.clear()}this._cachedBitmapsMap.clear(),this.#ex()}#ex(){if(this.pageColors){let a=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==a){let h=this.ctx.filter;this.ctx.filter=a,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=h}}}_scaleImage(a,h){let d,c;let u=a.width,g=a.height,m=Math.max(Math.hypot(h[0],h[1]),1),b=Math.max(Math.hypot(h[2],h[3]),1),v=u,y=g,A="prescale1";for(;m>2&&v>1||b>2&&y>1;){let h=v,u=y;m>2&&v>1&&(h=v>=16384?Math.floor(v/2)-1||1:Math.ceil(v/2),m/=v/h),b>2&&y>1&&(u=y>=16384?Math.floor(y/2)-1||1:Math.ceil(y)/2,b/=y/u),(c=(d=this.cachedCanvases.getCanvas(A,h,u)).context).clearRect(0,0,h,u),c.drawImage(a,0,0,v,y,0,0,h,u),a=d.canvas,v=h,y=u,A="prescale1"===A?"prescale2":"prescale1"}return{img:a,paintWidth:v,paintHeight:y}}_createMaskCanvas(a){let h,d,m,b;let v=this.ctx,{width:y,height:A}=a,_=this.current.fillColor,S=this.current.patternFill,E=(0,u.getCurrentTransform)(v);if((a.bitmap||a.data)&&a.count>1){let c=a.bitmap||a.data.buffer;d=JSON.stringify(S?E:[E.slice(0,4),_]),(h=this._cachedBitmapsMap.get(c))||(h=new Map,this._cachedBitmapsMap.set(c,h));let u=h.get(d);if(u&&!S)return{canvas:u,offsetX:Math.round(Math.min(E[0],E[2])+E[4]),offsetY:Math.round(Math.min(E[1],E[3])+E[5])};m=u}m||O((b=this.cachedCanvases.getCanvas("maskCanvas",y,A)).context,a);let C=c.Util.transform(E,[1/y,0,0,-1/A,0,0]);C=c.Util.transform(C,[1,0,0,1,0,-A]);let T=c.Util.applyTransform([0,0],C),w=c.Util.applyTransform([y,A],C),k=c.Util.normalizeRect([T[0],T[1],w[0],w[1]]),M=Math.round(k[2]-k[0])||1,F=Math.round(k[3]-k[1])||1,I=this.cachedCanvases.getCanvas("fillCanvas",M,F),D=I.context,L=Math.min(T[0],w[0]),N=Math.min(T[1],w[1]);D.translate(-L,-N),D.transform(...C),!m&&(m=(m=this._scaleImage(b.canvas,(0,u.getCurrentTransformInverse)(D))).img,h&&S&&h.set(d,m)),D.imageSmoothingEnabled=H((0,u.getCurrentTransform)(D),a.interpolate),R(D,m,0,0,m.width,m.height,0,0,y,A),D.globalCompositeOperation="source-in";let j=c.Util.transform((0,u.getCurrentTransformInverse)(D),[1,0,0,1,-L,-N]);return D.fillStyle=S?_.getPattern(v,this,j,g.PathType.FILL):_,D.fillRect(0,0,y,A),h&&!S&&(this.cachedCanvases.delete("fillCanvas"),h.set(d,I.canvas)),{canvas:I.canvas,offsetX:Math.round(L),offsetY:Math.round(N)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=G[a]}setLineJoin(a){this.ctx.lineJoin=q[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,h){let d=this.ctx;void 0!==d.setLineDash&&(d.setLineDash(a),d.lineDashOffset=h)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(let[h,d]of a)switch(h){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d[0],d[1]);break;case"CA":this.current.strokeAlpha=d;break;case"ca":this.current.fillAlpha=d,this.ctx.globalAlpha=d;break;case"BM":this.ctx.globalCompositeOperation=d;break;case"SMask":this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw Error("beginSMaskMode called while already in smask mode");let a=this.ctx.canvas.width,h=this.ctx.canvas.height,d="smaskGroupAt"+this.groupLevel,c=this.cachedCanvases.getCanvas(d,a,h);this.suspendedCtx=this.ctx,this.ctx=c.context;let g=this.ctx;g.setTransform(...(0,u.getCurrentTransform)(this.suspendedCtx)),I(this.suspendedCtx,g),T(g,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),I(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){if(!this.current.activeSMask)return;a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let h=this.current.activeSMask;U(this.suspendedCtx,h,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(I(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),I(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(a,h,d,c,u,g){this.ctx.transform(a,h,d,c,u,g),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(a,h,d){let g,m;let b=this.ctx,v=this.current,y=v.x,A=v.y,_=(0,u.getCurrentTransform)(b),S=0===_[0]&&0===_[3]||0===_[1]&&0===_[2],E=S?d.slice(0):null;for(let d=0,u=0,C=a.length;d<C;d++)switch(0|a[d]){case c.OPS.rectangle:y=h[u++],A=h[u++];let C=h[u++],T=h[u++],w=y+C,R=A+T;b.moveTo(y,A),0===C||0===T?b.lineTo(w,R):(b.lineTo(w,A),b.lineTo(w,R),b.lineTo(y,R)),S||v.updateRectMinMax(_,[y,A,w,R]),b.closePath();break;case c.OPS.moveTo:y=h[u++],A=h[u++],b.moveTo(y,A),S||v.updatePathMinMax(_,y,A);break;case c.OPS.lineTo:y=h[u++],A=h[u++],b.lineTo(y,A),S||v.updatePathMinMax(_,y,A);break;case c.OPS.curveTo:g=y,m=A,y=h[u+4],A=h[u+5],b.bezierCurveTo(h[u],h[u+1],h[u+2],h[u+3],y,A),v.updateCurvePathMinMax(_,g,m,h[u],h[u+1],h[u+2],h[u+3],y,A,E),u+=6;break;case c.OPS.curveTo2:g=y,m=A,b.bezierCurveTo(y,A,h[u],h[u+1],h[u+2],h[u+3]),v.updateCurvePathMinMax(_,g,m,y,A,h[u],h[u+1],h[u+2],h[u+3],E),y=h[u+2],A=h[u+3],u+=4;break;case c.OPS.curveTo3:g=y,m=A,y=h[u+2],A=h[u+3],b.bezierCurveTo(h[u],h[u+1],y,A,y,A),v.updateCurvePathMinMax(_,g,m,h[u],h[u+1],y,A,y,A,E),u+=4;break;case c.OPS.closePath:b.closePath()}S&&v.updateScalingPathMinMax(_,E),v.setCurrentPoint(y,A)}closePath(){this.ctx.closePath()}stroke(a=!0){let h=this.ctx,d=this.current.strokeColor;h.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof d&&d?.getPattern?(h.save(),h.strokeStyle=d.getPattern(h,this,(0,u.getCurrentTransformInverse)(h),g.PathType.STROKE),this.rescaleAndStroke(!1),h.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),h.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a=!0){let h=this.ctx,d=this.current.fillColor,c=this.current.patternFill,m=!1;c&&(h.save(),h.fillStyle=d.getPattern(h,this,(0,u.getCurrentTransformInverse)(h),g.PathType.FILL),m=!0);let b=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==b&&(this.pendingEOFill?(h.fill("evenodd"),this.pendingEOFill=!1):h.fill()),m&&h.restore(),a&&this.consumePath(b)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=z}eoClip(){this.pendingClip=V}beginText(){this.current.textMatrix=c.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let a=this.pendingTextPaths,h=this.ctx;if(void 0===a){h.beginPath();return}for(let d of(h.save(),h.beginPath(),a))h.setTransform(...d.transform),h.translate(d.x,d.y),d.addToPath(h,d.fontSize);h.restore(),h.clip(),h.beginPath(),delete this.pendingTextPaths}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,h){let d=this.commonObjs.get(a),u=this.current;if(!d)throw Error(`Can't find font for ${a}`);if(u.fontMatrix=d.fontMatrix||c.FONT_IDENTITY_MATRIX,(0===u.fontMatrix[0]||0===u.fontMatrix[3])&&(0,c.warn)("Invalid font matrix for font "+a),h<0?(h=-h,u.fontDirection=-1):u.fontDirection=1,this.current.font=d,this.current.fontSize=h,d.isType3Font)return;let g=d.loadedName||"sans-serif",m="normal";d.black?m="900":d.bold&&(m="bold");let b=d.italic?"italic":"normal",A=`"${g}", ${d.fallbackName}`,_=h;h<v?_=v:h>y&&(_=y),this.current.fontSizeScale=h/_,this.ctx.font=`${b} ${m} ${_}px ${A}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,h){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=h}setLeadingMoveText(a,h){this.setLeading(-h),this.moveText(a,h)}setTextMatrix(a,h,d,c,u,g){this.current.textMatrix=[a,h,d,c,u,g],this.current.textMatrixScale=Math.hypot(a,h),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,h,d,g){let m;let b=this.ctx,v=this.current,y=v.font,A=v.textRenderingMode,_=v.fontSize/v.fontSizeScale,S=A&c.TextRenderingMode.FILL_STROKE_MASK,E=!!(A&c.TextRenderingMode.ADD_TO_PATH_FLAG),C=v.patternFill&&!y.missingFile;(y.disableFontFace||E||C)&&(m=y.getPathGenerator(this.commonObjs,a)),y.disableFontFace||C?(b.save(),b.translate(h,d),b.beginPath(),m(b,_),g&&b.setTransform(...g),(S===c.TextRenderingMode.FILL||S===c.TextRenderingMode.FILL_STROKE)&&b.fill(),(S===c.TextRenderingMode.STROKE||S===c.TextRenderingMode.FILL_STROKE)&&b.stroke(),b.restore()):((S===c.TextRenderingMode.FILL||S===c.TextRenderingMode.FILL_STROKE)&&b.fillText(a,h,d),(S===c.TextRenderingMode.STROKE||S===c.TextRenderingMode.FILL_STROKE)&&b.strokeText(a,h,d)),E&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,u.getCurrentTransform)(b),x:h,y:d,fontSize:_,addToPath:m})}get isFontSubpixelAAEnabled(){let{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);a.scale(1.5,1),a.fillText("I",0,10);let h=a.getImageData(0,0,10,10).data,d=!1;for(let a=3;a<h.length;a+=4)if(h[a]>0&&h[a]<255){d=!0;break}return(0,c.shadow)(this,"isFontSubpixelAAEnabled",d)}showText(a){let h;let d=this.current,m=d.font;if(m.isType3Font)return this.showType3Text(a);let b=d.fontSize;if(0===b)return;let v=this.ctx,y=d.fontSizeScale,A=d.charSpacing,_=d.wordSpacing,S=d.fontDirection,E=d.textHScale*S,C=a.length,T=m.vertical,w=T?1:-1,R=m.defaultVMetrics,k=b*d.fontMatrix[0],M=d.textRenderingMode===c.TextRenderingMode.FILL&&!m.disableFontFace&&!d.patternFill;if(v.save(),v.transform(...d.textMatrix),v.translate(d.x,d.y+d.textRise),S>0?v.scale(E,-1):v.scale(E,1),d.patternFill){v.save();let a=d.fillColor.getPattern(v,this,(0,u.getCurrentTransformInverse)(v),g.PathType.FILL);h=(0,u.getCurrentTransform)(v),v.restore(),v.fillStyle=a}let F=d.lineWidth,O=d.textMatrixScale;if(0===O||0===F){let a=d.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;(a===c.TextRenderingMode.STROKE||a===c.TextRenderingMode.FILL_STROKE)&&(F=this.getSinglePixelWidth())}else F/=O;if(1!==y&&(v.scale(y,y),F/=y),v.lineWidth=F,m.isInvalidPDFjsFont){let h=[],c=0;for(let d of a)h.push(d.unicode),c+=d.width;v.fillText(h.join(""),0,0),d.x+=c*k*E,v.restore(),this.compose();return}let I=0,D;for(D=0;D<C;++D){let d,c,u;let g=a[D];if("number"==typeof g){I+=w*g*b/1e3;continue}let E=!1,C=(g.isSpace?_:0)+A,F=g.fontChar,O=g.accent,L=g.width;if(T){let a=g.vmetric||R,h=-(g.vmetric?a[1]:.5*L)*k,u=a[2]*k;L=a?-a[0]:L,d=h/y,c=(I+u)/y}else d=I/y,c=0;if(m.remeasure&&L>0){let a=1e3*v.measureText(F).width/b*y;if(L<a&&this.isFontSubpixelAAEnabled){let h=L/a;E=!0,v.save(),v.scale(h,1),d/=h}else L!==a&&(d+=(L-a)/2e3*b/y)}if(this.contentVisible&&(g.isInFont||m.missingFile)){if(M&&!O)v.fillText(F,d,c);else if(this.paintChar(F,d,c,h),O){let a=d+b*O.offset.x/y,u=c-b*O.offset.y/y;this.paintChar(O.fontChar,a,u,h)}}I+=u=T?L*k-C*S:L*k+C*S,E&&v.restore()}T?d.y-=I:d.x+=I*E,v.restore(),this.compose()}showType3Text(a){let h,d,u,g;let m=this.ctx,b=this.current,v=b.font,y=b.fontSize,A=b.fontDirection,_=v.vertical?1:-1,S=b.charSpacing,E=b.wordSpacing,C=b.textHScale*A,T=b.fontMatrix||c.FONT_IDENTITY_MATRIX,w=a.length;if(b.textRenderingMode!==c.TextRenderingMode.INVISIBLE&&0!==y){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,m.save(),m.transform(...b.textMatrix),m.translate(b.x,b.y),m.scale(C,A),h=0;h<w;++h){if("number"==typeof(d=a[h])){g=_*d*y/1e3,this.ctx.translate(g,0),b.x+=g*C;continue}let A=(d.isSpace?E:0)+S,w=v.charProcOperatorList[d.operatorListId];if(!w){(0,c.warn)(`Type3 character "${d.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=d,this.save(),m.scale(y,y),m.transform(...T),this.executeOperatorList(w),this.restore()),u=c.Util.applyTransform([d.width,0],T)[0]*y+A,m.translate(u,0),b.x+=u*C}m.restore(),this.processingType3=null}}setCharWidth(a,h){}setCharWidthAndBounds(a,h,d,c,u,g){this.ctx.rect(d,c,u-d,g-c),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let h;if("TilingPattern"===a[0]){let d=a[1],c=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),m={createCanvasGraphics:a=>new W(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};h=new g.TilingPattern(a,d,this.ctx,m,c)}else h=this._getPattern(a[1],a[2]);return h}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,h,d){let u=c.Util.makeHexColor(a,h,d);this.ctx.strokeStyle=u,this.current.strokeColor=u}setFillRGBColor(a,h,d){let u=c.Util.makeHexColor(a,h,d);this.ctx.fillStyle=u,this.current.fillColor=u,this.current.patternFill=!1}_getPattern(a,h=null){let d;return this.cachedPatterns.has(a)?d=this.cachedPatterns.get(a):(d=(0,g.getShadingPattern)(this.getObject(a)),this.cachedPatterns.set(a,d)),h&&(d.matrix=h),d}shadingFill(a){if(!this.contentVisible)return;let h=this.ctx;this.save();let d=this._getPattern(a);h.fillStyle=d.getPattern(h,this,(0,u.getCurrentTransformInverse)(h),g.PathType.SHADING);let m=(0,u.getCurrentTransformInverse)(h);if(m){let a=h.canvas,d=a.width,u=a.height,g=c.Util.applyTransform([0,0],m),b=c.Util.applyTransform([0,u],m),v=c.Util.applyTransform([d,0],m),y=c.Util.applyTransform([d,u],m),A=Math.min(g[0],b[0],v[0],y[0]),_=Math.min(g[1],b[1],v[1],y[1]),S=Math.max(g[0],b[0],v[0],y[0]),E=Math.max(g[1],b[1],v[1],y[1]);this.ctx.fillRect(A,_,S-A,E-_)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,c.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,c.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,h){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&6===a.length&&this.transform(...a),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),h)){let a=h[2]-h[0],d=h[3]-h[1];this.ctx.rect(h[0],h[1],a,d),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),h),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let h=this.ctx;a.isolated||(0,c.info)("TODO: Support non-isolated groups."),a.knockout&&(0,c.warn)("Knockout groups not supported.");let d=(0,u.getCurrentTransform)(h);if(a.matrix&&h.transform(...a.matrix),!a.bbox)throw Error("Bounding box is required.");let g=c.Util.getAxialAlignedBoundingBox(a.bbox,(0,u.getCurrentTransform)(h)),m=[0,0,h.canvas.width,h.canvas.height],b=Math.floor((g=c.Util.intersect(g,m)||[0,0,0,0])[0]),v=Math.floor(g[1]),y=Math.max(Math.ceil(g[2])-b,1),_=Math.max(Math.ceil(g[3])-v,1),S=1,E=1;y>A&&(S=y/A,y=A),_>A&&(E=_/A,_=A),this.current.startNewPathAndClipBox([0,0,y,_]);let C="groupAt"+this.groupLevel;a.smask&&(C+="_smask_"+this.smaskCounter++%2);let T=this.cachedCanvases.getCanvas(C,y,_),w=T.context;w.scale(1/S,1/E),w.translate(-b,-v),w.transform(...d),a.smask?this.smaskStack.push({canvas:T.canvas,context:w,offsetX:b,offsetY:v,scaleX:S,scaleY:E,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(h.setTransform(1,0,0,1,0,0),h.translate(b,v),h.scale(S,E),h.save()),I(h,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(h),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;let h=this.ctx,d=this.groupStack.pop();if(this.ctx=d,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let a=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);let d=c.Util.getAxialAlignedBoundingBox([0,0,h.canvas.width,h.canvas.height],a);this.ctx.drawImage(h.canvas,0,0),this.ctx.restore(),this.compose(d)}}beginAnnotation(a,h,d,g,m){if(this.#eS(),D(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(h)&&4===h.length){let g=h[2]-h[0],b=h[3]-h[1];if(m&&this.annotationCanvasMap){d=d.slice(),d[4]-=h[0],d[5]-=h[1],(h=h.slice())[0]=h[1]=0,h[2]=g,h[3]=b;let[m,v]=c.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),{viewportScale:y}=this,A=Math.ceil(g*this.outputScaleX*y),_=Math.ceil(b*this.outputScaleY*y);this.annotationCanvas=this.canvasFactory.create(A,_);let{canvas:S,context:E}=this.annotationCanvas;this.annotationCanvasMap.set(a,S),this.annotationCanvas.savedCtx=this.ctx,this.ctx=E,this.ctx.save(),this.ctx.setTransform(m,0,0,-v,0,b*v),D(this.ctx)}else D(this.ctx),this.ctx.rect(h[0],h[1],g,b),this.ctx.clip(),this.endPath()}this.current=new M(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...d),this.transform(...g)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#ex(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(a){if(!this.contentVisible)return;let h=a.count;(a=this.getObject(a.data,a)).count=h;let d=this.ctx,c=this.processingType3;if(c&&(void 0===c.compiled&&(c.compiled=k(a)),c.compiled)){c.compiled(d);return}let u=this._createMaskCanvas(a),g=u.canvas;d.save(),d.setTransform(1,0,0,1,0,0),d.drawImage(g,u.offsetX,u.offsetY),d.restore(),this.compose()}paintImageMaskXObjectRepeat(a,h,d=0,g=0,m,b){if(!this.contentVisible)return;a=this.getObject(a.data,a);let v=this.ctx;v.save();let y=(0,u.getCurrentTransform)(v);v.transform(h,d,g,m,0,0);let A=this._createMaskCanvas(a);v.setTransform(1,0,0,1,A.offsetX-y[4],A.offsetY-y[5]);for(let a=0,u=b.length;a<u;a+=2){let u=c.Util.transform(y,[h,d,g,m,b[a],b[a+1]]),[_,S]=c.Util.applyTransform([0,0],u);v.drawImage(A.canvas,_,S)}v.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;let h=this.ctx,d=this.current.fillColor,c=this.current.patternFill;for(let m of a){let{data:a,width:b,height:v,transform:y}=m,A=this.cachedCanvases.getCanvas("maskCanvas",b,v),_=A.context;_.save(),O(_,this.getObject(a,m)),_.globalCompositeOperation="source-in",_.fillStyle=c?d.getPattern(_,this,(0,u.getCurrentTransformInverse)(h),g.PathType.FILL):d,_.fillRect(0,0,b,v),_.restore(),h.save(),h.transform(...y),h.scale(1,-1),R(h,A.canvas,0,0,b,v,0,-1,1,1),h.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;let h=this.getObject(a);if(!h){(0,c.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(h)}paintImageXObjectRepeat(a,h,d,u){if(!this.contentVisible)return;let g=this.getObject(a);if(!g){(0,c.warn)("Dependent image isn't ready yet");return}let m=g.width,b=g.height,v=[];for(let a=0,c=u.length;a<c;a+=2)v.push({transform:[h,0,0,d,u[a],u[a+1]],x:0,y:0,w:m,h:b});this.paintInlineImageXObjectGroup(g,v)}applyTransferMapsToCanvas(a){return"none"!==this.current.transferMaps&&(a.filter=this.current.transferMaps,a.drawImage(a.canvas,0,0),a.filter="none"),a.canvas}applyTransferMapsToBitmap(a){if("none"===this.current.transferMaps)return a.bitmap;let{bitmap:h,width:d,height:c}=a,u=this.cachedCanvases.getCanvas("inlineImage",d,c),g=u.context;return g.filter=this.current.transferMaps,g.drawImage(h,0,0),g.filter="none",u.canvas}paintInlineImageXObject(a){let h;if(!this.contentVisible)return;let d=a.width,c=a.height,g=this.ctx;if(this.save(),b.isNodeJS||(g.filter="none"),g.scale(1/d,-1/c),a.bitmap)h=this.applyTransferMapsToBitmap(a);else if("function"==typeof HTMLElement&&a instanceof HTMLElement||!a.data)h=a;else{let u=this.cachedCanvases.getCanvas("inlineImage",d,c).context;F(u,a),h=this.applyTransferMapsToCanvas(u)}let m=this._scaleImage(h,(0,u.getCurrentTransformInverse)(g));g.imageSmoothingEnabled=H((0,u.getCurrentTransform)(g),a.interpolate),R(g,m.img,0,0,m.paintWidth,m.paintHeight,0,-c,d,c),this.compose(),this.restore()}paintInlineImageXObjectGroup(a,h){let d;if(!this.contentVisible)return;let c=this.ctx;if(a.bitmap)d=a.bitmap;else{let h=a.width,c=a.height,u=this.cachedCanvases.getCanvas("inlineImage",h,c).context;F(u,a),d=this.applyTransferMapsToCanvas(u)}for(let a of h)c.save(),c.transform(...a.transform),c.scale(1,-1),R(c,d,a.x,a.y,a.w,a.h,0,-1,1,1),c.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,h){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,h){"OC"===a?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(h)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){let h=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);let d=this.ctx;this.pendingClip&&(h||(this.pendingClip===V?d.clip("evenodd"):d.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),d.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let a=(0,u.getCurrentTransform)(this.ctx);if(0===a[1]&&0===a[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{let h=Math.abs(a[0]*a[3]-a[2]*a[1]),d=Math.hypot(a[0],a[2]),c=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(d,c)/h}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){let a,h;let{lineWidth:d}=this.current,c=(0,u.getCurrentTransform)(this.ctx);if(0===c[1]&&0===c[2]){let u=Math.abs(c[0]),g=Math.abs(c[3]);if(0===d)a=1/u,h=1/g;else{let c=u*d,m=g*d;a=c<1?1/c:1,h=m<1?1/m:1}}else{let u=Math.abs(c[0]*c[3]-c[2]*c[1]),g=Math.hypot(c[0],c[1]),m=Math.hypot(c[2],c[3]);if(0===d)a=m/u,h=g/u;else{let c=d*u;a=m>c?m/c:1,h=g>c?g/c:1}}this._cachedScaleForStroking=[a,h]}return this._cachedScaleForStroking}rescaleAndStroke(a){let h,d,c;let{ctx:g}=this,{lineWidth:m}=this.current,[b,v]=this.getScaleForStroking();if(g.lineWidth=m||1,1===b&&1===v){g.stroke();return}a&&(h=(0,u.getCurrentTransform)(g),d=g.getLineDash().slice(),c=g.lineDashOffset),g.scale(b,v);let y=Math.max(b,v);g.setLineDash(g.getLineDash().map(a=>a/y)),g.lineDashOffset/=y,g.stroke(),a&&(g.setTransform(...h),g.setLineDash(d),g.lineDashOffset=c)}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}}for(let a in h.CanvasGraphics=W,c.OPS)void 0!==W.prototype[a]&&(W.prototype[c.OPS[a]]=W.prototype[a])},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TilingPattern=h.PathType=void 0,h.getShadingPattern=E;var c=d(1),u=d(6);let g={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function m(a,h){if(!h)return;let d=h[2]-h[0],c=h[3]-h[1],u=new Path2D;u.rect(h[0],h[1],d,c),a.clip(u)}h.PathType=g;class b{constructor(){this.constructor===b&&(0,c.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,c.unreachable)("Abstract method `getPattern` called.")}}class v extends b{constructor(a){super(),this._type=a[1],this._bbox=a[2],this._colorStops=a[3],this._p0=a[4],this._p1=a[5],this._r0=a[6],this._r1=a[7],this.matrix=null}_createGradient(a){let h;for(let d of("axial"===this._type?h=a.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(h=a.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1)),this._colorStops))h.addColorStop(d[0],d[1]);return h}getPattern(a,h,d,b){let v;if(b===g.STROKE||b===g.FILL){let g=h.current.getClippedPathBoundingBox(b,(0,u.getCurrentTransform)(a))||[0,0,0,0],y=Math.ceil(g[2]-g[0])||1,A=Math.ceil(g[3]-g[1])||1,_=h.cachedCanvases.getCanvas("pattern",y,A,!0),S=_.context;S.clearRect(0,0,S.canvas.width,S.canvas.height),S.beginPath(),S.rect(0,0,S.canvas.width,S.canvas.height),S.translate(-g[0],-g[1]),d=c.Util.transform(d,[1,0,0,1,g[0],g[1]]),S.transform(...h.baseTransform),this.matrix&&S.transform(...this.matrix),m(S,this._bbox),S.fillStyle=this._createGradient(S),S.fill(),v=a.createPattern(_.canvas,"no-repeat");let E=new DOMMatrix(d);v.setTransform(E)}else m(a,this._bbox),v=this._createGradient(a);return v}}function y(a,h,d,c,u,g,m,b){let v,y,A,_,S,E,C,T,w;let R=h.coords,k=h.colors,M=a.data,F=4*a.width;R[d+1]>R[c+1]&&(v=d,d=c,c=v,v=g,g=m,m=v),R[c+1]>R[u+1]&&(v=c,c=u,u=v,v=m,m=b,b=v),R[d+1]>R[c+1]&&(v=d,d=c,c=v,v=g,g=m,m=v);let O=(R[d]+h.offsetX)*h.scaleX,I=(R[d+1]+h.offsetY)*h.scaleY,D=(R[c]+h.offsetX)*h.scaleX,L=(R[c+1]+h.offsetY)*h.scaleY,N=(R[u]+h.offsetX)*h.scaleX,j=(R[u+1]+h.offsetY)*h.scaleY;if(I>=j)return;let B=k[g],U=k[g+1],H=k[g+2],G=k[m],q=k[m+1],z=k[m+2],V=k[b],W=k[b+1],$=k[b+2],X=Math.round(I),Y=Math.round(j);for(let a=X;a<=Y;a++){let h;if(a<L){let h;y=O-(O-D)*(h=a<I?0:(I-a)/(I-L)),A=B-(B-G)*h,_=U-(U-q)*h,S=H-(H-z)*h}else{let h;y=D-(D-N)*(h=a>j?1:L===j?0:(L-a)/(L-j)),A=G-(G-V)*h,_=q-(q-W)*h,S=z-(z-$)*h}E=O-(O-N)*(h=a<I?0:a>j?1:(I-a)/(I-j)),C=B-(B-V)*h,T=U-(U-W)*h,w=H-(H-$)*h;let d=Math.round(Math.min(y,E)),c=Math.round(Math.max(y,E)),u=F*a+4*d;for(let a=d;a<=c;a++)(h=(y-a)/(y-E))<0?h=0:h>1&&(h=1),M[u++]=A-(A-C)*h|0,M[u++]=_-(_-T)*h|0,M[u++]=S-(S-w)*h|0,M[u++]=255}}function A(a,h,d){let c,u;let g=h.coords,m=h.colors;switch(h.type){case"lattice":let b=h.verticesPerRow,v=Math.floor(g.length/b)-1,A=b-1;for(c=0;c<v;c++){let h=c*b;for(let c=0;c<A;c++,h++)y(a,d,g[h],g[h+1],g[h+b],m[h],m[h+1],m[h+b]),y(a,d,g[h+b+1],g[h+1],g[h+b],m[h+b+1],m[h+1],m[h+b])}break;case"triangles":for(c=0,u=g.length;c<u;c+=3)y(a,d,g[c],g[c+1],g[c+2],m[c],m[c+1],m[c+2]);break;default:throw Error("illegal figure")}}class _ extends b{constructor(a){super(),this._coords=a[2],this._colors=a[3],this._figures=a[4],this._bounds=a[5],this._bbox=a[7],this._background=a[8],this.matrix=null}_createMeshCanvas(a,h,d){let c=1.1,u=3e3,g=2,m=Math.floor(this._bounds[0]),b=Math.floor(this._bounds[1]),v=Math.ceil(this._bounds[2])-m,y=Math.ceil(this._bounds[3])-b,_=Math.min(Math.ceil(Math.abs(v*a[0]*c)),u),S=Math.min(Math.ceil(Math.abs(y*a[1]*c)),u),E=v/_,C=y/S,T={coords:this._coords,colors:this._colors,offsetX:-m,offsetY:-b,scaleX:1/E,scaleY:1/C},w=_+2*g,R=S+2*g,k=d.getCanvas("mesh",w,R,!1),M=k.context,F=M.createImageData(_,S);if(h){let a=F.data;for(let d=0,c=a.length;d<c;d+=4)a[d]=h[0],a[d+1]=h[1],a[d+2]=h[2],a[d+3]=255}for(let a of this._figures)A(F,a,T);return M.putImageData(F,g,g),{canvas:k.canvas,offsetX:m-g*E,offsetY:b-g*C,scaleX:E,scaleY:C}}getPattern(a,h,d,b){let v;if(m(a,this._bbox),b===g.SHADING)v=c.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(a));else if(v=c.Util.singularValueDecompose2dScale(h.baseTransform),this.matrix){let a=c.Util.singularValueDecompose2dScale(this.matrix);v=[v[0]*a[0],v[1]*a[1]]}let y=this._createMeshCanvas(v,b===g.SHADING?null:this._background,h.cachedCanvases);return b!==g.SHADING&&(a.setTransform(...h.baseTransform),this.matrix&&a.transform(...this.matrix)),a.translate(y.offsetX,y.offsetY),a.scale(y.scaleX,y.scaleY),a.createPattern(y.canvas,"no-repeat")}}class S extends b{getPattern(){return"hotpink"}}function E(a){switch(a[0]){case"RadialAxial":return new v(a);case"Mesh":return new _(a);case"Dummy":return new S}throw Error(`Unknown IR type: ${a[0]}`)}let C={COLORED:1,UNCOLORED:2};class T{static{this.MAX_PATTERN_SIZE=3e3}constructor(a,h,d,c,u){this.operatorList=a[2],this.matrix=a[3]||[1,0,0,1,0,0],this.bbox=a[4],this.xstep=a[5],this.ystep=a[6],this.paintType=a[7],this.tilingType=a[8],this.color=h,this.ctx=d,this.canvasGraphicsFactory=c,this.baseTransform=u}createPatternCanvas(a){let h=this.operatorList,d=this.bbox,g=this.xstep,m=this.ystep,b=this.paintType,v=this.tilingType,y=this.color,A=this.canvasGraphicsFactory;(0,c.info)("TilingType: "+v);let _=d[0],S=d[1],E=d[2],C=d[3],T=c.Util.singularValueDecompose2dScale(this.matrix),w=c.Util.singularValueDecompose2dScale(this.baseTransform),R=[T[0]*w[0],T[1]*w[1]],k=this.getSizeAndScale(g,this.ctx.canvas.width,R[0]),M=this.getSizeAndScale(m,this.ctx.canvas.height,R[1]),F=a.cachedCanvases.getCanvas("pattern",k.size,M.size,!0),O=F.context,I=A.createCanvasGraphics(O);I.groupLevel=a.groupLevel,this.setFillAndStrokeStyleToContext(I,b,y);let D=_,L=S,N=E,j=C;return _<0&&(D=0,N+=Math.abs(_)),S<0&&(L=0,j+=Math.abs(S)),O.translate(-(k.scale*D),-(M.scale*L)),I.transform(k.scale,0,0,M.scale,0,0),O.save(),this.clipBbox(I,D,L,N,j),I.baseTransform=(0,u.getCurrentTransform)(I.ctx),I.executeOperatorList(h),I.endDrawing(),{canvas:F.canvas,scaleX:k.scale,scaleY:M.scale,offsetX:D,offsetY:L}}getSizeAndScale(a,h,d){a=Math.abs(a);let c=Math.max(T.MAX_PATTERN_SIZE,h),u=Math.ceil(a*d);return u>=c?u=c:d=u/a,{scale:d,size:u}}clipBbox(a,h,d,c,g){let m=c-h,b=g-d;a.ctx.rect(h,d,m,b),a.current.updateRectMinMax((0,u.getCurrentTransform)(a.ctx),[h,d,c,g]),a.clip(),a.endPath()}setFillAndStrokeStyleToContext(a,h,d){let u=a.ctx,g=a.current;switch(h){case C.COLORED:let m=this.ctx;u.fillStyle=m.fillStyle,u.strokeStyle=m.strokeStyle,g.fillColor=m.fillStyle,g.strokeColor=m.strokeStyle;break;case C.UNCOLORED:let b=c.Util.makeHexColor(d[0],d[1],d[2]);u.fillStyle=b,u.strokeStyle=b,g.fillColor=b,g.strokeColor=b;break;default:throw new c.FormatError(`Unsupported paint type: ${h}`)}}getPattern(a,h,d,u){let m=d;u!==g.SHADING&&(m=c.Util.transform(m,h.baseTransform),this.matrix&&(m=c.Util.transform(m,this.matrix)));let b=this.createPatternCanvas(h),v=new DOMMatrix(m);v=(v=v.translate(b.offsetX,b.offsetY)).scale(1/b.scaleX,1/b.scaleY);let y=a.createPattern(b.canvas,"repeat");return y.setTransform(v),y}}h.TilingPattern=T},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.convertBlackAndWhiteToRGBA=g,h.convertToRGBA=u,h.grayToRGBA=b;var c=d(1);function u(a){switch(a.kind){case c.ImageKind.GRAYSCALE_1BPP:return g(a);case c.ImageKind.RGB_24BPP:return m(a)}return null}function g({src:a,srcPos:h=0,dest:d,width:u,height:g,nonBlackColor:m=4294967295,inverseDecode:b=!1}){let v=c.FeatureTest.isLittleEndian?4278190080:255,[y,A]=b?[m,v]:[v,m],_=u>>3,S=7&u,E=a.length;d=new Uint32Array(d.buffer);let C=0;for(let c=0;c<g;c++){for(let c=h+_;h<c;h++){let c=h<E?a[h]:255;d[C++]=128&c?A:y,d[C++]=64&c?A:y,d[C++]=32&c?A:y,d[C++]=16&c?A:y,d[C++]=8&c?A:y,d[C++]=4&c?A:y,d[C++]=2&c?A:y,d[C++]=1&c?A:y}if(0===S)continue;let c=h<E?a[h++]:255;for(let a=0;a<S;a++)d[C++]=c&1<<7-a?A:y}return{srcPos:h,destPos:C}}function m({src:a,srcPos:h=0,dest:d,destPos:u=0,width:g,height:m}){let b=0,v=a.length>>2,y=new Uint32Array(a.buffer,h,v);if(c.FeatureTest.isLittleEndian){for(;b<v-2;b+=3,u+=4){let a=y[b],h=y[b+1],c=y[b+2];d[u]=4278190080|a,d[u+1]=a>>>24|h<<8|4278190080,d[u+2]=h>>>16|c<<16|4278190080,d[u+3]=c>>>8|4278190080}for(let h=4*b,c=a.length;h<c;h+=3)d[u++]=a[h]|a[h+1]<<8|a[h+2]<<16|4278190080}else{for(;b<v-2;b+=3,u+=4){let a=y[b],h=y[b+1],c=y[b+2];d[u]=255|a,d[u+1]=a<<24|h>>>8|255,d[u+2]=h<<16|c>>>16|255,d[u+3]=c<<8|255}for(let h=4*b,c=a.length;h<c;h+=3)d[u++]=a[h]<<24|a[h+1]<<16|a[h+2]<<8|255}return{srcPos:h,destPos:u}}function b(a,h){if(c.FeatureTest.isLittleEndian)for(let d=0,c=a.length;d<c;d++)h[d]=65793*a[d]|4278190080;else for(let d=0,c=a.length;d<c;d++)h[d]=16843008*a[d]|255}},(a,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.GlobalWorkerOptions=void 0;let d=Object.create(null);h.GlobalWorkerOptions=d,d.workerPort=null,d.workerSrc=""},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.MessageHandler=void 0;var c=d(1);let u={DATA:1,ERROR:2},g={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function m(a){switch(a instanceof Error||"object"==typeof a&&null!==a||(0,c.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new c.AbortException(a.message);case"MissingPDFException":return new c.MissingPDFException(a.message);case"PasswordException":return new c.PasswordException(a.message,a.code);case"UnexpectedResponseException":return new c.UnexpectedResponseException(a.message,a.status);case"UnknownErrorException":return new c.UnknownErrorException(a.message,a.details);default:return new c.UnknownErrorException(a.message,a.toString())}}class b{constructor(a,h,d){this.sourceName=a,this.targetName=h,this.comObj=d,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=a=>{let h=a.data;if(h.targetName!==this.sourceName)return;if(h.stream){this.#eE(h);return}if(h.callback){let a=h.callbackId,d=this.callbackCapabilities[a];if(!d)throw Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],h.callback===u.DATA)d.resolve(h.data);else if(h.callback===u.ERROR)d.reject(m(h.reason));else throw Error("Unexpected callback case");return}let c=this.actionHandler[h.action];if(!c)throw Error(`Unknown action from worker: ${h.action}`);if(h.callbackId){let a=this.sourceName,g=h.sourceName;new Promise(function(a){a(c(h.data))}).then(function(c){d.postMessage({sourceName:a,targetName:g,callback:u.DATA,callbackId:h.callbackId,data:c})},function(c){d.postMessage({sourceName:a,targetName:g,callback:u.ERROR,callbackId:h.callbackId,reason:m(c)})});return}if(h.streamId){this.#eC(h);return}c(h.data)},d.addEventListener("message",this._onComObjOnMessage)}on(a,h){let d=this.actionHandler;if(d[a])throw Error(`There is already an actionName called "${a}"`);d[a]=h}send(a,h,d){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,data:h},d)}sendWithPromise(a,h,d){let u=this.callbackId++,g=new c.PromiseCapability;this.callbackCapabilities[u]=g;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,callbackId:u,data:h},d)}catch(a){g.reject(a)}return g.promise}sendWithStream(a,h,d,u){let b=this.streamId++,v=this.sourceName,y=this.targetName,A=this.comObj;return new ReadableStream({start:d=>{let g=new c.PromiseCapability;return this.streamControllers[b]={controller:d,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},A.postMessage({sourceName:v,targetName:y,action:a,streamId:b,data:h,desiredSize:d.desiredSize},u),g.promise},pull:a=>{let h=new c.PromiseCapability;return this.streamControllers[b].pullCall=h,A.postMessage({sourceName:v,targetName:y,stream:g.PULL,streamId:b,desiredSize:a.desiredSize}),h.promise},cancel:a=>{(0,c.assert)(a instanceof Error,"cancel must have a valid reason");let h=new c.PromiseCapability;return this.streamControllers[b].cancelCall=h,this.streamControllers[b].isClosed=!0,A.postMessage({sourceName:v,targetName:y,stream:g.CANCEL,streamId:b,reason:m(a)}),h.promise}},d)}#eC(a){let h=a.streamId,d=this.sourceName,u=a.sourceName,b=this.comObj,v=this,y=this.actionHandler[a.action],A={enqueue(a,m=1,v){if(this.isCancelled)return;let y=this.desiredSize;this.desiredSize-=m,y>0&&this.desiredSize<=0&&(this.sinkCapability=new c.PromiseCapability,this.ready=this.sinkCapability.promise),b.postMessage({sourceName:d,targetName:u,stream:g.ENQUEUE,streamId:h,chunk:a},v)},close(){this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:d,targetName:u,stream:g.CLOSE,streamId:h}),delete v.streamSinks[h])},error(a){(0,c.assert)(a instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:d,targetName:u,stream:g.ERROR,streamId:h,reason:m(a)}))},sinkCapability:new c.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:a.desiredSize,ready:null};A.sinkCapability.resolve(),A.ready=A.sinkCapability.promise,this.streamSinks[h]=A,new Promise(function(h){h(y(a.data,A))}).then(function(){b.postMessage({sourceName:d,targetName:u,stream:g.START_COMPLETE,streamId:h,success:!0})},function(a){b.postMessage({sourceName:d,targetName:u,stream:g.START_COMPLETE,streamId:h,reason:m(a)})})}#eE(a){let h=a.streamId,d=this.sourceName,u=a.sourceName,b=this.comObj,v=this.streamControllers[h],y=this.streamSinks[h];switch(a.stream){case g.START_COMPLETE:a.success?v.startCall.resolve():v.startCall.reject(m(a.reason));break;case g.PULL_COMPLETE:a.success?v.pullCall.resolve():v.pullCall.reject(m(a.reason));break;case g.PULL:if(!y){b.postMessage({sourceName:d,targetName:u,stream:g.PULL_COMPLETE,streamId:h,success:!0});break}y.desiredSize<=0&&a.desiredSize>0&&y.sinkCapability.resolve(),y.desiredSize=a.desiredSize,new Promise(function(a){a(y.onPull?.())}).then(function(){b.postMessage({sourceName:d,targetName:u,stream:g.PULL_COMPLETE,streamId:h,success:!0})},function(a){b.postMessage({sourceName:d,targetName:u,stream:g.PULL_COMPLETE,streamId:h,reason:m(a)})});break;case g.ENQUEUE:if((0,c.assert)(v,"enqueue should have stream controller"),v.isClosed)break;v.controller.enqueue(a.chunk);break;case g.CLOSE:if((0,c.assert)(v,"close should have stream controller"),v.isClosed)break;v.isClosed=!0,v.controller.close(),this.#eT(v,h);break;case g.ERROR:(0,c.assert)(v,"error should have stream controller"),v.controller.error(m(a.reason)),this.#eT(v,h);break;case g.CANCEL_COMPLETE:a.success?v.cancelCall.resolve():v.cancelCall.reject(m(a.reason)),this.#eT(v,h);break;case g.CANCEL:if(!y)break;new Promise(function(h){h(y.onCancel?.(m(a.reason)))}).then(function(){b.postMessage({sourceName:d,targetName:u,stream:g.CANCEL_COMPLETE,streamId:h,success:!0})},function(a){b.postMessage({sourceName:d,targetName:u,stream:g.CANCEL_COMPLETE,streamId:h,reason:m(a)})}),y.sinkCapability.reject(m(a.reason)),y.isCancelled=!0,delete this.streamSinks[h];break;default:throw Error("Unexpected stream case")}}async #eT(a,h){await Promise.allSettled([a.startCall?.promise,a.pullCall?.promise,a.cancelCall?.promise]),delete this.streamControllers[h]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}h.MessageHandler=b},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Metadata=void 0;var c=d(1);class u{#eP;#ew;constructor({parsedData:a,rawData:h}){this.#eP=a,this.#ew=h}getRaw(){return this.#ew}get(a){return this.#eP.get(a)??null}getAll(){return(0,c.objectFromMap)(this.#eP)}has(a){return this.#eP.has(a)}}h.Metadata=u},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.OptionalContentConfig=void 0;var c=d(1),u=d(8);let g=Symbol("INTERNAL");class m{#eR;constructor(a,h){this.#eR=!0,this.name=a,this.intent=h}get visible(){return this.#eR}_setVisible(a,h){a!==g&&(0,c.unreachable)("Internal method `_setVisible` called."),this.#eR=h}}class b{#ek;#eM;#eF;#eO;constructor(a){if(this.#ek=null,this.#eM=new Map,this.#eF=null,this.#eO=null,this.name=null,this.creator=null,null===a)return;for(let h of(this.name=a.name,this.creator=a.creator,this.#eO=a.order,a.groups))this.#eM.set(h.id,new m(h.name,h.intent));if("OFF"===a.baseState)for(let a of this.#eM.values())a._setVisible(g,!1);for(let h of a.on)this.#eM.get(h)._setVisible(g,!0);for(let h of a.off)this.#eM.get(h)._setVisible(g,!1);this.#eF=this.getHash()}#eI(a){let h=a.length;if(h<2)return!0;let d=a[0];for(let u=1;u<h;u++){let h;let g=a[u];if(Array.isArray(g))h=this.#eI(g);else{if(!this.#eM.has(g))return(0,c.warn)(`Optional content group not found: ${g}`),!0;h=this.#eM.get(g).visible}switch(d){case"And":if(!h)return!1;break;case"Or":if(h)return!0;break;case"Not":return!h;default:return!0}}return"And"===d}isVisible(a){if(0===this.#eM.size)return!0;if(!a)return(0,c.warn)("Optional content group not defined."),!0;if("OCG"===a.type)return this.#eM.has(a.id)?this.#eM.get(a.id).visible:((0,c.warn)(`Optional content group not found: ${a.id}`),!0);if("OCMD"===a.type){if(a.expression)return this.#eI(a.expression);if(a.policy&&"AnyOn"!==a.policy){if("AllOn"===a.policy){for(let h of a.ids){if(!this.#eM.has(h)){(0,c.warn)(`Optional content group not found: ${h}`);break}if(!this.#eM.get(h).visible)return!1}return!0}if("AnyOff"===a.policy){for(let h of a.ids){if(!this.#eM.has(h))return(0,c.warn)(`Optional content group not found: ${h}`),!0;if(!this.#eM.get(h).visible)return!0}return!1}if("AllOff"===a.policy){for(let h of a.ids){if(!this.#eM.has(h)){(0,c.warn)(`Optional content group not found: ${h}`);break}if(this.#eM.get(h).visible)return!1}return!0}}else{for(let h of a.ids){if(!this.#eM.has(h))return(0,c.warn)(`Optional content group not found: ${h}`),!0;if(this.#eM.get(h).visible)return!0}return!1}return(0,c.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,c.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,h=!0){if(!this.#eM.has(a)){(0,c.warn)(`Optional content group not found: ${a}`);return}this.#eM.get(a)._setVisible(g,!!h),this.#ek=null}get hasInitialVisibility(){return this.getHash()===this.#eF}getOrder(){return this.#eM.size?this.#eO?this.#eO.slice():[...this.#eM.keys()]:null}getGroups(){return this.#eM.size>0?(0,c.objectFromMap)(this.#eM):null}getGroup(a){return this.#eM.get(a)||null}getHash(){if(null!==this.#ek)return this.#ek;let a=new u.MurmurHash3_64;for(let[h,d]of this.#eM)a.update(`${h}:${d.visible}`);return this.#ek=a.hexdigest()}}h.OptionalContentConfig=b},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PDFDataTransportStream=void 0;var c=d(1),u=d(6);class g{constructor({length:a,initialData:h,progressiveDone:d=!1,contentDispositionFilename:u=null,disableRange:g=!1,disableStream:m=!1},b){if((0,c.assert)(b,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=d,this._contentDispositionFilename=u,h?.length>0){let a=h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength?h.buffer:new Uint8Array(h).buffer;this._queuedChunks.push(a)}this._pdfDataRangeTransport=b,this._isStreamingSupported=!m,this._isRangeSupported=!g,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((a,h)=>{this._onReceiveData({begin:a,chunk:h})}),this._pdfDataRangeTransport.addProgressListener((a,h)=>{this._onProgress({loaded:a,total:h})}),this._pdfDataRangeTransport.addProgressiveReadListener(a=>{this._onReceiveData({chunk:a})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:a,chunk:h}){let d=h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength?h.buffer:new Uint8Array(h).buffer;if(void 0===a)this._fullRequestReader?this._fullRequestReader._enqueue(d):this._queuedChunks.push(d);else{let h=this._rangeReaders.some(function(h){return h._begin===a&&(h._enqueue(d),!0)});(0,c.assert)(h,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(a){void 0===a.total?this._rangeReaders[0]?.onProgress?.({loaded:a.loaded}):this._fullRequestReader?.onProgress?.({loaded:a.loaded,total:a.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(a){let h=this._rangeReaders.indexOf(a);h>=0&&this._rangeReaders.splice(h,1)}getFullReader(){(0,c.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let a=this._queuedChunks;return this._queuedChunks=null,new m(this,a,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(a,h){if(h<=this._progressiveDataLength)return null;let d=new b(this,a,h);return this._pdfDataRangeTransport.requestDataRange(a,h),this._rangeReaders.push(d),d}cancelAllRequests(a){for(let h of(this._fullRequestReader?.cancel(a),this._rangeReaders.slice(0)))h.cancel(a);this._pdfDataRangeTransport.abort()}}h.PDFDataTransportStream=g;class m{constructor(a,h,d=!1,c=null){for(let g of(this._stream=a,this._done=d||!1,this._filename=(0,u.isPdfFile)(c)?c:null,this._queuedChunks=h||[],this._loaded=0,this._queuedChunks))this._loaded+=g.byteLength;this._requests=[],this._headersReady=Promise.resolve(),a._fullRequestReader=this,this.onProgress=null}_enqueue(a){this._done||(this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunks.push(a),this._loaded+=a.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let a=new c.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){for(let a of(this._done=!0,this._requests))a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class b{constructor(a,h,d){this._stream=a,this._begin=h,this._end=d,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(a){if(!this._done){if(0===this._requests.length)this._queuedChunk=a;else{for(let h of(this._requests.shift().resolve({value:a,done:!1}),this._requests))h.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};let a=new c.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){for(let a of(this._done=!0,this._requests))a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(a,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.XfaText=void 0;class d{static textContent(a){let h=[],c={items:h,styles:Object.create(null)};function u(a){if(!a)return;let c=null,g=a.name;if("#text"===g)c=a.value;else{if(!d.shouldBuildText(g))return;a?.attributes?.textContent?c=a.attributes.textContent:a.value&&(c=a.value)}if(null!==c&&h.push({str:c}),a.children)for(let h of a.children)u(h)}return u(a),c}static shouldBuildText(a){return!("textarea"===a||"input"===a||"option"===a||"select"===a)}}h.XfaText=d},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.NodeStandardFontDataFactory=h.NodeFilterFactory=h.NodeCanvasFactory=h.NodeCMapReaderFactory=void 0;var c=d(7);let u=function(a){return new Promise((h,d)=>{__webpack_require__(7147).readFile(a,(a,c)=>{if(a||!c){d(Error(a));return}h(new Uint8Array(c))})})};class g extends c.BaseFilterFactory{}h.NodeFilterFactory=g;class m extends c.BaseCanvasFactory{_createCanvas(a,h){return __webpack_require__(9349).createCanvas(a,h)}}h.NodeCanvasFactory=m;class b extends c.BaseCMapReaderFactory{_fetchData(a,h){return u(a).then(a=>({cMapData:a,compressionType:h}))}}h.NodeCMapReaderFactory=b;class v extends c.BaseStandardFontDataFactory{_fetchData(a){return u(a)}}h.NodeStandardFontDataFactory=v},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PDFNodeStream=void 0;var c=d(1),u=d(22);let g=__webpack_require__(7147),m=__webpack_require__(3685),b=__webpack_require__(5687),v=__webpack_require__(7310),y=/^file:\/\/\/[a-zA-Z]:\//;function A(a){let h=v.parse(a);return"file:"===h.protocol||h.host?h:/^[a-z]:[/\\]/i.test(a)?v.parse(`file:///${a}`):(h.host||(h.protocol="file:"),h)}class _{constructor(a){this.source=a,this.url=A(a.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&a.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new R(this):new T(this),this._fullRequestReader}getRangeReader(a,h){if(h<=this._progressiveDataLength)return null;let d=this.isFsUrl?new k(this,a,h):new w(this,a,h);return this._rangeRequestReaders.push(d),d}cancelAllRequests(a){for(let h of(this._fullRequestReader?.cancel(a),this._rangeRequestReaders.slice(0)))h.cancel(a)}}h.PDFNodeStream=_;class S{constructor(a){this._url=a.url,this._done=!1,this._storedError=null,this.onProgress=null;let h=a.source;this._contentLength=h.length,this._loaded=0,this._filename=null,this._disableRange=h.disableRange||!1,this._rangeChunkSize=h.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!h.disableStream,this._isRangeSupported=!h.disableRange,this._readableStream=null,this._readCapability=new c.PromiseCapability,this._headersCapability=new c.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let a=this._readableStream.read();return null===a?(this._readCapability=new c.PromiseCapability,this.read()):(this._loaded+=a.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(a).buffer,done:!1})}cancel(a){if(!this._readableStream){this._error(a);return}this._readableStream.destroy(a)}_error(a){this._storedError=a,this._readCapability.resolve()}_setReadableStream(a){this._readableStream=a,a.on("readable",()=>{this._readCapability.resolve()}),a.on("end",()=>{a.destroy(),this._done=!0,this._readCapability.resolve()}),a.on("error",a=>{this._error(a)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new c.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class E{constructor(a){this._url=a.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new c.PromiseCapability;let h=a.source;this._isStreamingSupported=!h.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let a=this._readableStream.read();return null===a?(this._readCapability=new c.PromiseCapability,this.read()):(this._loaded+=a.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(a).buffer,done:!1})}cancel(a){if(!this._readableStream){this._error(a);return}this._readableStream.destroy(a)}_error(a){this._storedError=a,this._readCapability.resolve()}_setReadableStream(a){this._readableStream=a,a.on("readable",()=>{this._readCapability.resolve()}),a.on("end",()=>{a.destroy(),this._done=!0,this._readCapability.resolve()}),a.on("error",a=>{this._error(a)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function C(a,h){return{protocol:a.protocol,auth:a.auth,host:a.hostname,port:a.port,path:a.path,method:"GET",headers:h}}class T extends S{constructor(a){super(a);let h=h=>{if(404===h.statusCode){let a=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(h);let d=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:g,suggestedLength:m}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:a.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=m||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(d)};this._request=null,"http:"===this._url.protocol?this._request=m.request(C(this._url,a.httpHeaders),h):this._request=b.request(C(this._url,a.httpHeaders),h),this._request.on("error",a=>{this._storedError=a,this._headersCapability.reject(a)}),this._request.end()}}class w extends E{constructor(a,h,d){for(let h in super(a),this._httpHeaders={},a.httpHeaders){let d=a.httpHeaders[h];void 0!==d&&(this._httpHeaders[h]=d)}this._httpHeaders.Range=`bytes=${h}-${d-1}`;let u=a=>{if(404===a.statusCode){let a=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(a)};this._request=null,"http:"===this._url.protocol?this._request=m.request(C(this._url,this._httpHeaders),u):this._request=b.request(C(this._url,this._httpHeaders),u),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class R extends S{constructor(a){super(a);let h=decodeURIComponent(this._url.path);y.test(this._url.href)&&(h=h.replace(/^\//,"")),g.lstat(h,(a,d)=>{if(a){"ENOENT"===a.code&&(a=new c.MissingPDFException(`Missing PDF "${h}".`)),this._storedError=a,this._headersCapability.reject(a);return}this._contentLength=d.size,this._setReadableStream(g.createReadStream(h)),this._headersCapability.resolve()})}}class k extends E{constructor(a,h,d){super(a);let c=decodeURIComponent(this._url.path);y.test(this._url.href)&&(c=c.replace(/^\//,"")),this._setReadableStream(g.createReadStream(c,{start:h,end:d-1}))}}},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.createResponseStatusError=v,h.extractFilenameFromHeader=b,h.validateRangeRequestCapabilities=m,h.validateResponseStatus=y;var c=d(1),u=d(23),g=d(6);function m({getResponseHeader:a,isHttp:h,rangeChunkSize:d,disableRange:c}){let u={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(a("Content-Length"),10);return Number.isInteger(g)&&(u.suggestedLength=g,g<=2*d||c||!h||"bytes"!==a("Accept-Ranges")||"identity"!==(a("Content-Encoding")||"identity")||(u.allowRangeRequests=!0)),u}function b(a){let h=a("Content-Disposition");if(h){let a=(0,u.getFilenameFromContentDispositionHeader)(h);if(a.includes("%"))try{a=decodeURIComponent(a)}catch(a){}if((0,g.isPdfFile)(a))return a}return null}function v(a,h){return 404===a||0===a&&h.startsWith("file:")?new c.MissingPDFException('Missing PDF "'+h+'".'):new c.UnexpectedResponseException(`Unexpected server response (${a}) while retrieving PDF "${h}".`,a)}function y(a){return 200===a||206===a}},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getFilenameFromContentDispositionHeader=u;var c=d(1);function u(a){let h=!0,d=u("filename\\*","i").exec(a);if(d){let a=v(d=d[1]);return m(a=A(a=y(a=unescape(a))))}if(d=b(a))return m(A(d));if(d=u("filename","i").exec(a)){let a=v(d=d[1]);return m(a=A(a))}function u(a,h){return RegExp("(?:^|;)\\s*"+a+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function g(a,d){if(a){if(!/^[\x00-\xFF]+$/.test(d))return d;try{let u=new TextDecoder(a,{fatal:!0}),g=(0,c.stringToBytes)(d);d=u.decode(g),h=!1}catch(a){}}return d}function m(a){return h&&/[\x80-\xff]/.test(a)&&(a=g("utf-8",a),h&&(a=g("iso-8859-1",a))),a}function b(a){let h;let d=[],c=u("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(h=c.exec(a));){let[,a,c,u]=h;if((a=parseInt(a,10))in d){if(0===a)break;continue}d[a]=[c,u]}let g=[];for(let a=0;a<d.length&&(a in d);++a){let[h,c]=d[a];c=v(c),h&&(c=unescape(c),0===a&&(c=y(c))),g.push(c)}return g.join("")}function v(a){if(a.startsWith('"')){let h=a.slice(1).split('\\"');for(let a=0;a<h.length;++a){let d=h[a].indexOf('"');-1!==d&&(h[a]=h[a].slice(0,d),h.length=a+1),h[a]=h[a].replaceAll(/\\(.)/g,"$1")}a=h.join('"')}return a}function y(a){let h=a.indexOf("'");return -1===h?a:g(a.slice(0,h),a.slice(h+1).replace(/^[^']*'/,""))}function A(a){return!a.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(a)?a:a.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(a,h,d,c){if("q"===d||"Q"===d)return g(h,c=(c=c.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(a,h){return String.fromCharCode(parseInt(h,16))}));try{c=atob(c)}catch(a){}return g(h,c)})}return""}},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PDFNetworkStream=void 0;var c=d(1),u=d(22);let g=200,m=206;function b(a){let h=a.response;return"string"!=typeof h?h:(0,c.stringToBytes)(h).buffer}class v{constructor(a,h={}){this.url=a,this.isHttp=/^https?:/i.test(a),this.httpHeaders=this.isHttp&&h.httpHeaders||Object.create(null),this.withCredentials=h.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(a,h,d){let c={begin:a,end:h};for(let a in d)c[a]=d[a];return this.request(c)}requestFull(a){return this.request(a)}request(a){let h=new XMLHttpRequest,d=this.currXhrId++,c=this.pendingRequests[d]={xhr:h};for(let a in h.open("GET",this.url),h.withCredentials=this.withCredentials,this.httpHeaders){let d=this.httpHeaders[a];void 0!==d&&h.setRequestHeader(a,d)}return this.isHttp&&"begin"in a&&"end"in a?(h.setRequestHeader("Range",`bytes=${a.begin}-${a.end-1}`),c.expectedStatus=m):c.expectedStatus=g,h.responseType="arraybuffer",a.onError&&(h.onerror=function(d){a.onError(h.status)}),h.onreadystatechange=this.onStateChange.bind(this,d),h.onprogress=this.onProgress.bind(this,d),c.onHeadersReceived=a.onHeadersReceived,c.onDone=a.onDone,c.onError=a.onError,c.onProgress=a.onProgress,h.send(null),d}onProgress(a,h){let d=this.pendingRequests[a];d&&d.onProgress?.(h)}onStateChange(a,h){let d=this.pendingRequests[a];if(!d)return;let c=d.xhr;if(c.readyState>=2&&d.onHeadersReceived&&(d.onHeadersReceived(),delete d.onHeadersReceived),4!==c.readyState||!(a in this.pendingRequests))return;if(delete this.pendingRequests[a],0===c.status&&this.isHttp){d.onError?.(c.status);return}let u=c.status||g;if(!(u===g&&d.expectedStatus===m)&&u!==d.expectedStatus){d.onError?.(c.status);return}let v=b(c);if(u===m){let a=c.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(a);d.onDone({begin:parseInt(h[1],10),chunk:v})}else v?d.onDone({begin:0,chunk:v}):d.onError?.(c.status)}getRequestXhr(a){return this.pendingRequests[a].xhr}isPendingRequest(a){return a in this.pendingRequests}abortRequest(a){let h=this.pendingRequests[a].xhr;delete this.pendingRequests[a],h.abort()}}class y{constructor(a){this._source=a,this._manager=new v(a.url,{httpHeaders:a.httpHeaders,withCredentials:a.withCredentials}),this._rangeChunkSize=a.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(a){let h=this._rangeRequestReaders.indexOf(a);h>=0&&this._rangeRequestReaders.splice(h,1)}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new A(this._manager,this._source),this._fullRequestReader}getRangeReader(a,h){let d=new _(this._manager,a,h);return d.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(d),d}cancelAllRequests(a){for(let h of(this._fullRequestReader?.cancel(a),this._rangeRequestReaders.slice(0)))h.cancel(a)}}h.PDFNetworkStream=y;class A{constructor(a,h){this._manager=a;let d={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._fullRequestId=a.requestFull(d),this._headersReceivedCapability=new c.PromiseCapability,this._disableRange=h.disableRange||!1,this._contentLength=h.length,this._rangeChunkSize=h.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let a=this._fullRequestId,h=this._manager.getRequestXhr(a),d=a=>h.getResponseHeader(a),{allowRangeRequests:c,suggestedLength:g}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});c&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(d),this._isRangeSupported&&this._manager.abortRequest(a),this._headersReceivedCapability.resolve()}_onDone(a){if(a&&(this._requests.length>0?this._requests.shift().resolve({value:a.chunk,done:!1}):this._cachedChunks.push(a.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(a){for(let h of(this._storedError=(0,u.createResponseStatusError)(a,this._url),this._headersReceivedCapability.reject(this._storedError),this._requests))h.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(a){this.onProgress?.({loaded:a.loaded,total:a.lengthComputable?a.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let a=new c.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){for(let h of(this._done=!0,this._headersReceivedCapability.reject(a),this._requests))h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _{constructor(a,h,d){this._manager=a;let c={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=a.url,this._requestId=a.requestRange(h,d,c),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(a){let h=a.chunk;for(let a of(this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunk=h,this._done=!0,this._requests))a.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(a){for(let h of(this._storedError=(0,u.createResponseStatusError)(a,this._url),this._requests))h.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(a){this.isStreamingSupported||this.onProgress?.({loaded:a.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){let a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};let a=new c.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){for(let a of(this._done=!0,this._requests))a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PDFFetchStream=void 0;var c=d(1),u=d(22);function g(a,h,d){return{method:"GET",headers:a,signal:d.signal,mode:"cors",credentials:h?"include":"same-origin",redirect:"follow"}}function m(a){let h=new Headers;for(let d in a){let c=a[d];void 0!==c&&h.append(d,c)}return h}function b(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:((0,c.warn)(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class v{constructor(a){this.source=a,this.isHttp=/^https?:/i.test(a.url),this.httpHeaders=this.isHttp&&a.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new y(this),this._fullRequestReader}getRangeReader(a,h){if(h<=this._progressiveDataLength)return null;let d=new A(this,a,h);return this._rangeRequestReaders.push(d),d}cancelAllRequests(a){for(let h of(this._fullRequestReader?.cancel(a),this._rangeRequestReaders.slice(0)))h.cancel(a)}}h.PDFFetchStream=v;class y{constructor(a){this._stream=a,this._reader=null,this._loaded=0,this._filename=null;let h=a.source;this._withCredentials=h.withCredentials||!1,this._contentLength=h.length,this._headersCapability=new c.PromiseCapability,this._disableRange=h.disableRange||!1,this._rangeChunkSize=h.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!h.disableStream,this._isRangeSupported=!h.disableRange,this._headers=m(this._stream.httpHeaders);let d=h.url;fetch(d,g(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!(0,u.validateResponseStatus)(a.status))throw(0,u.createResponseStatusError)(a.status,d);this._reader=a.body.getReader(),this._headersCapability.resolve();let h=h=>a.headers.get(h),{allowRangeRequests:g,suggestedLength:m}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:h,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=m||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(h),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new c.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:a,done:h}=await this._reader.read();return h?{value:a,done:h}:(this._loaded+=a.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:b(a),done:!1})}cancel(a){this._reader?.cancel(a),this._abortController.abort()}}class A{constructor(a,h,d){this._stream=a,this._reader=null,this._loaded=0;let b=a.source;this._withCredentials=b.withCredentials||!1,this._readCapability=new c.PromiseCapability,this._isStreamingSupported=!b.disableStream,this._abortController=new AbortController,this._headers=m(this._stream.httpHeaders),this._headers.append("Range",`bytes=${h}-${d-1}`);let v=b.url;fetch(v,g(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!(0,u.validateResponseStatus)(a.status))throw(0,u.createResponseStatusError)(a.status,v);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:a,done:h}=await this._reader.read();return h?{value:a,done:h}:(this._loaded+=a.byteLength,this.onProgress?.({loaded:this._loaded}),{value:b(a),done:!1})}cancel(a){this._reader?.cancel(a),this._abortController.abort()}}},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TextLayerRenderTask=void 0,h.renderTextLayer=T,h.updateTextLayer=w;var c=d(1),u=d(6);let g=1e5,m=30,b=.8,v=new Map;function y(a,h){let d;if(h&&c.FeatureTest.isOffscreenCanvasSupported)d=new OffscreenCanvas(a,a).getContext("2d",{alpha:!1});else{let h=document.createElement("canvas");h.width=h.height=a,d=h.getContext("2d",{alpha:!1})}return d}function A(a,h){let d=v.get(a);if(d)return d;let c=y(m,h);c.font=`${m}px ${a}`;let u=c.measureText(""),g=u.fontBoundingBoxAscent,A=Math.abs(u.fontBoundingBoxDescent);if(g){let h=g/(g+A);return v.set(a,h),c.canvas.width=c.canvas.height=0,h}c.strokeStyle="red",c.clearRect(0,0,m,m),c.strokeText("g",0,0);let _=c.getImageData(0,0,m,m).data;A=0;for(let a=_.length-1-3;a>=0;a-=4)if(_[a]>0){A=Math.ceil(a/4/m);break}c.clearRect(0,0,m,m),c.strokeText("A",0,m),_=c.getImageData(0,0,m,m).data,g=0;for(let a=0,h=_.length;a<h;a+=4)if(_[a]>0){g=m-Math.floor(a/4/m);break}if(c.canvas.width=c.canvas.height=0,g){let h=g/(g+A);return v.set(a,h),h}return v.set(a,b),b}function _(a,h,d){let u,g;let m=document.createElement("span"),b={angle:0,canvasWidth:0,hasText:""!==h.str,hasEOL:h.hasEOL,fontSize:0};a._textDivs.push(m);let v=c.Util.transform(a._transform,h.transform),y=Math.atan2(v[1],v[0]),_=d[h.fontName];_.vertical&&(y+=Math.PI/2);let S=Math.hypot(v[2],v[3]),E=S*A(_.fontFamily,a._isOffscreenCanvasSupported);0===y?(u=v[4],g=v[5]-E):(u=v[4]+E*Math.sin(y),g=v[5]-E*Math.cos(y));let C="calc(var(--scale-factor)*",T=m.style;a._container===a._rootContainer?(T.left=`${(100*u/a._pageWidth).toFixed(2)}%`,T.top=`${(100*g/a._pageHeight).toFixed(2)}%`):(T.left=`${C}${u.toFixed(2)}px)`,T.top=`${C}${g.toFixed(2)}px)`),T.fontSize=`${C}${S.toFixed(2)}px)`,T.fontFamily=_.fontFamily,b.fontSize=S,m.setAttribute("role","presentation"),m.textContent=h.str,m.dir=h.dir,a._fontInspectorEnabled&&(m.dataset.fontName=h.fontName),0!==y&&(b.angle=180/Math.PI*y);let w=!1;if(h.str.length>1)w=!0;else if(" "!==h.str&&h.transform[0]!==h.transform[3]){let a=Math.abs(h.transform[0]),d=Math.abs(h.transform[3]);a!==d&&Math.max(a,d)/Math.min(a,d)>1.5&&(w=!0)}w&&(b.canvasWidth=_.vertical?h.height:h.width),a._textDivProperties.set(m,b),a._isReadableStream&&a._layoutText(m)}function S(a){let{div:h,scale:d,properties:c,ctx:u,prevFontSize:g,prevFontFamily:m}=a,{style:b}=h,v="";if(0!==c.canvasWidth&&c.hasText){let{fontFamily:y}=b,{canvasWidth:A,fontSize:_}=c;(g!==_||m!==y)&&(u.font=`${_*d}px ${y}`,a.prevFontSize=_,a.prevFontFamily=y);let{width:S}=u.measureText(h.textContent);S>0&&(v=`scaleX(${A*d/S})`)}0!==c.angle&&(v=`rotate(${c.angle}deg) ${v}`),v.length>0&&(b.transform=v)}function E(a){if(a._canceled)return;let h=a._textDivs,d=a._capability;if(h.length>g){d.resolve();return}if(!a._isReadableStream)for(let d of h)a._layoutText(d);d.resolve()}class C{constructor({textContentSource:a,container:h,viewport:d,textDivs:g,textDivProperties:m,textContentItemsStr:b,isOffscreenCanvasSupported:v}){this._textContentSource=a,this._isReadableStream=a instanceof ReadableStream,this._container=this._rootContainer=h,this._textDivs=g||[],this._textContentItemsStr=b||[],this._isOffscreenCanvasSupported=v,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=m||new WeakMap,this._canceled=!1,this._capability=new c.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:d.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y(0,v)};let{pageWidth:A,pageHeight:_,pageX:S,pageY:E}=d.rawDims;this._transform=[1,0,0,-1,-S,E+_],this._pageWidth=A,this._pageHeight=_,(0,u.setLayerDimensions)(h,d),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new c.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new c.AbortException("TextLayer task cancelled."))}_processItems(a,h){for(let d of a){if(void 0===d.str){if("beginMarkedContentProps"===d.type||"beginMarkedContent"===d.type){let a=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==d.id&&this._container.setAttribute("id",`${d.id}`),a.append(this._container)}else"endMarkedContent"===d.type&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(d.str),_(this,d,h)}}_layoutText(a){let h=this._layoutTextParams.properties=this._textDivProperties.get(a);if(this._layoutTextParams.div=a,S(this._layoutTextParams),h.hasText&&this._container.append(a),h.hasEOL){let a=document.createElement("br");a.setAttribute("role","presentation"),this._container.append(a)}}_render(){let a=new c.PromiseCapability,h=Object.create(null);if(this._isReadableStream){let d=()=>{this._reader.read().then(({value:c,done:u})=>{if(u){a.resolve();return}Object.assign(h,c.styles),this._processItems(c.items,h),d()},a.reject)};this._reader=this._textContentSource.getReader(),d()}else if(this._textContentSource){let{items:h,styles:d}=this._textContentSource;this._processItems(h,d),a.resolve()}else throw Error('No "textContentSource" parameter specified.');a.promise.then(()=>{h=null,E(this)},this._capability.reject)}}function T(a){!a.textContentSource&&(a.textContent||a.textContentStream)&&((0,u.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),a.textContentSource=a.textContent||a.textContentStream);let{container:h,viewport:d}=a,c=getComputedStyle(h),g=c.getPropertyValue("visibility"),m=parseFloat(c.getPropertyValue("--scale-factor"));"visible"===g&&(!m||Math.abs(m-d.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");let b=new C(a);return b._render(),b}function w({container:a,viewport:h,textDivs:d,textDivProperties:c,isOffscreenCanvasSupported:g,mustRotate:m=!0,mustRescale:b=!0}){if(m&&(0,u.setLayerDimensions)(a,{rotation:h.rotation}),b){let a=y(0,g),u={prevFontSize:null,prevFontFamily:null,div:null,scale:h.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:a};for(let a of d)u.properties=c.get(a),u.div=a,S(u)}}h.TextLayerRenderTask=C},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AnnotationEditorLayer=void 0;var c=d(1),u=d(5),g=d(28),m=d(29),b=d(6);class v{#eD;#eL;#eN;#ej;#eB;#eU;#eH;#eG;static{this._initialized=!1}constructor(a){this.#eL=!1,this.#eN=this.pointerup.bind(this),this.#ej=this.pointerdown.bind(this),this.#eB=new Map,this.#eU=!1,this.#eH=!1,v._initialized||(v._initialized=!0,g.FreeTextEditor.initialize(a.l10n),m.InkEditor.initialize(a.l10n)),a.uiManager.registerEditorTypes([g.FreeTextEditor,m.InkEditor]),this.#eG=a.uiManager,this.pageIndex=a.pageIndex,this.div=a.div,this.#eD=a.accessibilityManager,this.#eG.addLayer(this)}get isEmpty(){return 0===this.#eB.size}updateToolbar(a){this.#eG.updateToolbar(a)}updateMode(a=this.#eG.getMode()){this.#eq(),a===c.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this.#eG.unselectAll(),a!==c.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",a===c.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",a===c.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(a){if(a||this.#eG.getMode()===c.AnnotationEditorType.INK){if(!a){for(let a of this.#eB.values())if(a.isEmpty()){a.setInBackground();return}}this.#ez({offsetX:0,offsetY:0}).setInBackground()}}setEditingState(a){this.#eG.setEditingState(a)}addCommands(a){this.#eG.addCommands(a)}enable(){for(let a of(this.div.style.pointerEvents="auto",this.#eB.values()))a.enableEditing()}disable(){for(let a of(this.div.style.pointerEvents="none",this.#eB.values()))a.disableEditing();this.#eq(),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(a){this.#eG.getActive()!==a&&this.#eG.setActiveEditor(a)}enableClick(){this.div.addEventListener("pointerdown",this.#ej),this.div.addEventListener("pointerup",this.#eN)}disableClick(){this.div.removeEventListener("pointerdown",this.#ej),this.div.removeEventListener("pointerup",this.#eN)}attach(a){this.#eB.set(a.id,a)}detach(a){this.#eB.delete(a.id),this.#eD?.removePointerInTextLayer(a.contentDiv)}remove(a){this.#eG.removeEditor(a),this.detach(a),a.div.style.display="none",setTimeout(()=>{a.div.style.display="",a.div.remove(),a.isAttachedToDOM=!1,document.activeElement===document.body&&this.#eG.focusMainContainer()},0),this.#eH||this.addInkEditorIfNeeded(!1)}#eV(a){a.parent!==this&&(this.attach(a),a.parent?.detach(a),a.setParent(this),a.div&&a.isAttachedToDOM&&(a.div.remove(),this.div.append(a.div)))}add(a){if(this.#eV(a),this.#eG.addEditor(a),this.attach(a),!a.isAttachedToDOM){let h=a.render();this.div.append(h),a.isAttachedToDOM=!0}this.moveEditorInDOM(a),a.onceAdded(),this.#eG.addToAnnotationStorage(a)}moveEditorInDOM(a){this.#eD?.moveElementInDOM(this.div,a.div,a.contentDiv,!0)}addOrRebuild(a){a.needsToBeRebuilt()?a.rebuild():this.add(a)}addANewEditor(a){let h=()=>{this.addOrRebuild(a)},d=()=>{a.remove()};this.addCommands({cmd:h,undo:d,mustExec:!0})}addUndoableEditor(a){let h=()=>{this.addOrRebuild(a)},d=()=>{a.remove()};this.addCommands({cmd:h,undo:d,mustExec:!1})}getNextId(){return this.#eG.getId()}#eW(a){switch(this.#eG.getMode()){case c.AnnotationEditorType.FREETEXT:return new g.FreeTextEditor(a);case c.AnnotationEditorType.INK:return new m.InkEditor(a)}return null}deserialize(a){switch(a.annotationType){case c.AnnotationEditorType.FREETEXT:return g.FreeTextEditor.deserialize(a,this,this.#eG);case c.AnnotationEditorType.INK:return m.InkEditor.deserialize(a,this,this.#eG)}return null}#ez(a){let h=this.getNextId(),d=this.#eW({parent:this,id:h,x:a.offsetX,y:a.offsetY,uiManager:this.#eG});return d&&this.add(d),d}setSelected(a){this.#eG.setSelected(a)}toggleSelected(a){this.#eG.toggleSelected(a)}isSelected(a){return this.#eG.isSelected(a)}unselect(a){this.#eG.unselect(a)}pointerup(a){let{isMac:h}=c.FeatureTest.platform;if(0===a.button&&(!a.ctrlKey||!h)&&a.target===this.div&&this.#eU){if(this.#eU=!1,!this.#eL){this.#eL=!0;return}this.#ez(a)}}pointerdown(a){let{isMac:h}=c.FeatureTest.platform;if(0!==a.button||a.ctrlKey&&h||a.target!==this.div)return;this.#eU=!0;let d=this.#eG.getActive();this.#eL=!d||d.isEmpty()}drop(a){let h=a.dataTransfer.getData("text/plain"),d=this.#eG.getEditor(h);if(!d)return;a.preventDefault(),a.dataTransfer.dropEffect="move",this.#eV(d);let c=this.div.getBoundingClientRect(),u=a.clientX-c.x,g=a.clientY-c.y;d.translate(u-d.startX,g-d.startY),this.moveEditorInDOM(d),d.div.focus()}dragover(a){a.preventDefault()}destroy(){for(let a of(this.#eG.getActive()?.parent===this&&this.#eG.setActiveEditor(null),this.#eB.values()))this.#eD?.removePointerInTextLayer(a.contentDiv),a.setParent(null),a.isAttachedToDOM=!1,a.div.remove();this.div=null,this.#eB.clear(),this.#eG.removeLayer(this)}#eq(){for(let a of(this.#eH=!0,this.#eB.values()))a.isEmpty()&&a.remove();this.#eH=!1}render({viewport:a}){for(let h of(this.viewport=a,(0,b.setLayerDimensions)(this.div,a),(0,u.bindEvents)(this,this.div,["dragover","drop"]),this.#eG.getEditors(this.pageIndex)))this.add(h);this.updateMode()}update({viewport:a}){this.#eG.commitOrRemove(),this.viewport=a,(0,b.setLayerDimensions)(this.div,{rotation:a.rotation}),this.updateMode()}get pageDimensions(){let{pageWidth:a,pageHeight:h}=this.viewport.rawDims;return[a,h]}}h.AnnotationEditorLayer=v},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.FreeTextEditor=void 0;var c=d(1),u=d(5),g=d(4);class m extends g.AnnotationEditor{#e$;#eX;#eY;#eK;#eJ;#eQ;#eZ;#e0;#e1;static{this._freeTextDefaultContent=""}static{this._internalPadding=0}static{this._defaultColor=null}static{this._defaultFontSize=10}static{this._keyboardManager=new u.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],m.prototype.commitOrRemove]])}static{this._type="freetext"}constructor(a){super({...a,name:"freeTextEditor"}),this.#e$=this.editorDivBlur.bind(this),this.#eX=this.editorDivFocus.bind(this),this.#eY=this.editorDivInput.bind(this),this.#eK=this.editorDivKeydown.bind(this),this.#eQ="",this.#eZ=`${this.id}-editor`,this.#e0=!1,this.#eJ=a.color||m._defaultColor||g.AnnotationEditor._defaultLineColor,this.#e1=a.fontSize||m._defaultFontSize}static initialize(a){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(h=>[h,a.get(h)]));let h=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(h.getPropertyValue("--freetext-padding"))}static updateDefaultParams(a,h){switch(a){case c.AnnotationEditorParamsType.FREETEXT_SIZE:m._defaultFontSize=h;break;case c.AnnotationEditorParamsType.FREETEXT_COLOR:m._defaultColor=h}}updateParams(a,h){switch(a){case c.AnnotationEditorParamsType.FREETEXT_SIZE:this.#e2(h);break;case c.AnnotationEditorParamsType.FREETEXT_COLOR:this.#e3(h)}}static get defaultPropertiesToUpdate(){return[[c.AnnotationEditorParamsType.FREETEXT_SIZE,m._defaultFontSize],[c.AnnotationEditorParamsType.FREETEXT_COLOR,m._defaultColor||g.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[c.AnnotationEditorParamsType.FREETEXT_SIZE,this.#e1],[c.AnnotationEditorParamsType.FREETEXT_COLOR,this.#eJ]]}#e2(a){let h=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-this.#e1)*this.parentScale),this.#e1=a,this.#e5()},d=this.#e1;this.addCommands({cmd:()=>{h(a)},undo:()=>{h(d)},mustExec:!0,type:c.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#e3(a){let h=this.#eJ;this.addCommands({cmd:()=>{this.#eJ=this.editorDiv.style.color=a},undo:()=>{this.#eJ=this.editorDiv.style.color=h},mustExec:!0,type:c.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}getInitialTranslation(){let a=this.parentScale;return[-m._internalPadding*a,-(m._internalPadding+this.#e1)*a]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(c.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#eK),this.editorDiv.addEventListener("focus",this.#eX),this.editorDiv.addEventListener("blur",this.#e$),this.editorDiv.addEventListener("input",this.#eY))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#eZ),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this.#eK),this.editorDiv.removeEventListener("focus",this.#eX),this.editorDiv.removeEventListener("blur",this.#e$),this.editorDiv.removeEventListener("input",this.#eY),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(a){super.focusin(a),a.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}#e8(){let a=this.editorDiv.getElementsByTagName("div");if(0===a.length)return this.editorDiv.innerText;let h=[];for(let d of a)h.push(d.innerText.replace(/\r\n?|\n/,""));return h.join("\n")}#e5(){let a;let[h,d]=this.parentDimensions;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{let{currentLayer:h,div:d}=this,c=d.style.display;d.style.display="hidden",h.div.append(this.div),a=d.getBoundingClientRect(),d.remove(),d.style.display=c}this.width=a.width/h,this.height=a.height/d}commit(){this.isInEditMode()&&(super.commit(),this.#e0||(this.#e0=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this.#eQ=this.#e8().trimEnd(),this.#e5())}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(a){this.enableEditMode(),this.editorDiv.focus()}keydown(a){a.target===this.div&&"Enter"===a.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(a){m._keyboardManager.exec(this,a)}editorDivFocus(a){this.isEditing=!0}editorDivBlur(a){this.isEditing=!1}editorDivInput(a){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){let a,h;if(this.div)return this.div;this.width&&(a=this.x,h=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#eZ),this.enableEditing(),m._l10nPromise.get("editor_free_text2_aria_label").then(a=>this.editorDiv?.setAttribute("aria-label",a)),m._l10nPromise.get("free_text2_default_content").then(a=>this.editorDiv?.setAttribute("default-content",a)),this.editorDiv.contentEditable=!0;let{style:d}=this.editorDiv;if(d.fontSize=`calc(${this.#e1}px * var(--scale-factor))`,d.color=this.#eJ,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){let[d,c]=this.parentDimensions;for(let u of(this.setAt(a*d,h*c,this.width*d,this.height*c),this.#eQ.split("\n"))){let a=document.createElement("div");a.append(u?document.createTextNode(u):document.createElement("br")),this.editorDiv.append(a)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(a,h,d){let u=super.deserialize(a,h,d);return u.#e1=a.fontSize,u.#eJ=c.Util.makeHexColor(...a.color),u.#eQ=a.value,u}serialize(){if(this.isEmpty())return null;let a=m._internalPadding*this.parentScale,h=this.getRect(a,a),d=g.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#eJ);return{annotationType:c.AnnotationEditorType.FREETEXT,color:d,fontSize:this.#e1,value:this.#eQ,pageIndex:this.pageIndex,rect:h,rotation:this.rotation}}}h.FreeTextEditor=m},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.InkEditor=void 0,Object.defineProperty(h,"fitCurve",{enumerable:!0,get:function(){return g.fitCurve}});var c=d(1),u=d(4),g=d(30),m=d(5);let b=16;class v extends u.AnnotationEditor{#e4;#e6;#e7;#e9;#te;#tt;#ti;#tr;#ts;#tn;#ta;#to;#tl;#th;static{this._defaultColor=null}static{this._defaultOpacity=1}static{this._defaultThickness=1}static{this._type="ink"}constructor(a){super({...a,name:"inkEditor"}),this.#e4=0,this.#e6=0,this.#e7=0,this.#e9=this.canvasPointermove.bind(this),this.#te=this.canvasPointerleave.bind(this),this.#tt=this.canvasPointerup.bind(this),this.#ti=this.canvasPointerdown.bind(this),this.#tr=!1,this.#ts=!1,this.#tn=null,this.#ta=null,this.#to=0,this.#tl=0,this.#th=null,this.color=a.color||null,this.thickness=a.thickness||null,this.opacity=a.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(a){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(h=>[h,a.get(h)]))}static updateDefaultParams(a,h){switch(a){case c.AnnotationEditorParamsType.INK_THICKNESS:v._defaultThickness=h;break;case c.AnnotationEditorParamsType.INK_COLOR:v._defaultColor=h;break;case c.AnnotationEditorParamsType.INK_OPACITY:v._defaultOpacity=h/100}}updateParams(a,h){switch(a){case c.AnnotationEditorParamsType.INK_THICKNESS:this.#td(h);break;case c.AnnotationEditorParamsType.INK_COLOR:this.#e3(h);break;case c.AnnotationEditorParamsType.INK_OPACITY:this.#tc(h)}}static get defaultPropertiesToUpdate(){return[[c.AnnotationEditorParamsType.INK_THICKNESS,v._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,v._defaultColor||u.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*v._defaultOpacity)]]}get propertiesToUpdate(){return[[c.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||v._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,this.color||v._defaultColor||u.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??v._defaultOpacity))]]}#td(a){let h=this.thickness;this.addCommands({cmd:()=>{this.thickness=a,this.#tu()},undo:()=>{this.thickness=h,this.#tu()},mustExec:!0,type:c.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#e3(a){let h=this.color;this.addCommands({cmd:()=>{this.color=a,this.#tp()},undo:()=>{this.color=h,this.#tp()},mustExec:!0,type:c.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#tc(a){a/=100;let h=this.opacity;this.addCommands({cmd:()=>{this.opacity=a,this.#tp()},undo:()=>{this.opacity=h,this.#tp()},mustExec:!0,type:c.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(this.#tf(),this.#tg()),this.isAttachedToDOM||(this.parent.add(this),this.#tm()),this.#tu())}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#ta.disconnect(),this.#ta=null,super.remove())}setParent(a){!this.parent&&a?this._uiManager.removeShouldRescale(this):this.parent&&null===a&&this._uiManager.addShouldRescale(this),super.setParent(a)}onScaleChanging(){let[a,h]=this.parentDimensions,d=this.width*a,c=this.height*h;this.setDimensions(d,c)}enableEditMode(){this.#tr||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this.#ti),this.canvas.addEventListener("pointerup",this.#tt))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#ti),this.canvas.removeEventListener("pointerup",this.#tt))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#tb(){let{parentRotation:a,parentDimensions:[h,d]}=this;switch(a){case 90:return[0,d,d,h];case 180:return[h,d,h,d];case 270:return[h,0,d,h];default:return[0,0,h,d]}}#tv(){let{ctx:a,color:h,opacity:d,thickness:c,parentScale:u,scaleFactor:g}=this;a.lineWidth=c*u/g,a.lineCap="round",a.lineJoin="round",a.miterLimit=10,a.strokeStyle=`${h}${(0,m.opacityToHex)(d)}`}#ty(a,h){this.isEditing=!0,this.#ts||(this.#ts=!0,this.#tm(),this.thickness||=v._defaultThickness,this.color||=v._defaultColor||u.AnnotationEditor._defaultLineColor,this.opacity??=v._defaultOpacity),this.currentPath.push([a,h]),this.#tn=null,this.#tv(),this.ctx.beginPath(),this.ctx.moveTo(a,h),this.#th=()=>{this.#th&&(this.#tn&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):this.#tp(),this.ctx.lineTo(...this.#tn),this.#tn=null,this.ctx.stroke()),window.requestAnimationFrame(this.#th))},window.requestAnimationFrame(this.#th)}#tA(a,h){let[d,c]=this.currentPath.at(-1);(a!==d||h!==c)&&(this.currentPath.push([a,h]),this.#tn=[a,h])}#t_(a,h){let d;this.ctx.closePath(),this.#th=null,a=Math.min(Math.max(a,0),this.canvas.width),h=Math.min(Math.max(h,0),this.canvas.height);let[c,u]=this.currentPath.at(-1);if((a!==c||h!==u)&&this.currentPath.push([a,h]),1!==this.currentPath.length)d=(0,g.fitCurve)(this.currentPath,30,null);else{let c=[a,h];d=[[c,c.slice(),c.slice(),c]]}let m=v.#tS(d);this.currentPath.length=0;let b=()=>{this.paths.push(d),this.bezierPath2D.push(m),this.rebuild()},y=()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#tf(),this.#tg()),this.#tu())};this.addCommands({cmd:b,undo:y,mustExec:!0})}#tp(){if(this.isEmpty()){this.#tx();return}this.#tv();let{canvas:a,ctx:h}=this;for(let d of(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,a.width,a.height),this.#tx(),this.bezierPath2D))h.stroke(d)}commit(){this.#tr||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#tr=!0,this.div.classList.add("disabled"),this.#tu(!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(a){super.focusin(a),this.enableEditMode()}canvasPointerdown(a){0===a.button&&this.isInEditMode()&&!this.#tr&&(this.setInForeground(),"mouse"!==a.type&&this.div.focus(),a.stopPropagation(),this.canvas.addEventListener("pointerleave",this.#te),this.canvas.addEventListener("pointermove",this.#e9),this.#ty(a.offsetX,a.offsetY))}canvasPointermove(a){a.stopPropagation(),this.#tA(a.offsetX,a.offsetY)}canvasPointerup(a){0===a.button&&this.isInEditMode()&&0!==this.currentPath.length&&(a.stopPropagation(),this.#tE(a),this.setInBackground())}canvasPointerleave(a){this.#tE(a),this.setInBackground()}#tE(a){this.#t_(a.offsetX,a.offsetY),this.canvas.removeEventListener("pointerleave",this.#te),this.canvas.removeEventListener("pointermove",this.#e9),this.addToAnnotationStorage()}#tf(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",v._l10nPromise.get("editor_ink_canvas_aria_label").then(a=>this.canvas?.setAttribute("aria-label",a)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#tg(){this.#ta=new ResizeObserver(a=>{let h=a[0].contentRect;h.width&&h.height&&this.setDimensions(h.width,h.height)}),this.#ta.observe(this.div)}render(){let a,h;if(this.div)return this.div;this.width&&(a=this.x,h=this.y),super.render(),v._l10nPromise.get("editor_ink2_aria_label").then(a=>this.div?.setAttribute("aria-label",a));let[d,c,u,g]=this.#tb();if(this.setAt(d,c,0,0),this.setDims(u,g),this.#tf(),this.width){let[d,c]=this.parentDimensions;this.setAt(a*d,h*c,this.width*d,this.height*c),this.#ts=!0,this.#tm(),this.setDims(this.width*d,this.height*c),this.#tp(),this.#tC(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#tg(),this.div}#tm(){if(!this.#ts)return;let[a,h]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*a),this.canvas.height=Math.ceil(this.height*h),this.#tx()}setDimensions(a,h){let d=Math.round(a),c=Math.round(h);if(this.#to===d&&this.#tl===c)return;this.#to=d,this.#tl=c,this.canvas.style.visibility="hidden",this.#e4&&Math.abs(this.#e4-a/h)>.01&&(h=Math.ceil(a/this.#e4),this.setDims(a,h));let[u,g]=this.parentDimensions;this.width=a/u,this.height=h/g,this.#tr&&this.#tT(a,h),this.#tm(),this.#tp(),this.canvas.style.visibility="visible",this.fixDims()}#tT(a,h){let d=this.#tP(),c=(a-d)/this.#e7,u=(h-d)/this.#e6;this.scaleFactor=Math.min(c,u)}#tx(){let a=this.#tP()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+a,this.translationY*this.scaleFactor+a)}static #tS(a){let h=new Path2D;for(let d=0,c=a.length;d<c;d++){let[c,u,g,m]=a[d];0===d&&h.moveTo(...c),h.bezierCurveTo(u[0],u[1],g[0],g[1],m[0],m[1])}return h}#tw(a,h,d,c){let u,g;let m=4,b=[],v=this.thickness/2;for(let y of this.paths){u=[],g=[];for(let b=0,A=y.length;b<A;b++){let[A,_,S,E]=y[b],C=a*(A[0]+h)+v,T=c-a*(A[1]+d)-v,w=a*(_[0]+h)+v,R=c-a*(_[1]+d)-v,k=a*(S[0]+h)+v,M=c-a*(S[1]+d)-v,F=a*(E[0]+h)+v,O=c-a*(E[1]+d)-v;0===b&&(u.push(C,T),g.push(C,T)),u.push(w,R,k,M,F,O),this.#tR(C,T,w,R,k,M,F,O,m,g)}b.push({bezier:u,points:g})}return b}#tR(a,h,d,c,u,g,m,b,v,y){if(this.#tk(a,h,d,c,u,g,m,b)){y.push(m,b);return}for(let A=1;A<v-1;A++){let _=A/v,S=1-_,E=_*a+S*d,C=_*h+S*c,T=_*d+S*u,w=_*c+S*g,R=_*u+S*m,k=_*g+S*b;E=_*E+S*T,C=_*C+S*w,T=_*T+S*R,w=_*w+S*k,E=_*E+S*T,C=_*C+S*w,y.push(E,C)}y.push(m,b)}#tk(a,h,d,c,u,g,m,b){return Math.max((3*d-2*a-m)**2,(3*u-a-2*m)**2)+Math.max((3*c-2*h-b)**2,(3*g-h-2*b)**2)<=10}#tM(){let a=1/0,h=-1/0,d=1/0,u=-1/0;for(let g of this.paths)for(let[m,b,v,y]of g){let g=c.Util.bezierBoundingBox(...m,...b,...v,...y);a=Math.min(a,g[0]),d=Math.min(d,g[1]),h=Math.max(h,g[2]),u=Math.max(u,g[3])}return[a,d,h,u]}#tP(){return this.#tr?Math.ceil(this.thickness*this.parentScale):0}#tu(a=!1){if(this.isEmpty())return;if(!this.#tr){this.#tp();return}let h=this.#tM(),d=this.#tP();this.#e7=Math.max(b,h[2]-h[0]),this.#e6=Math.max(b,h[3]-h[1]);let c=Math.ceil(d+this.#e7*this.scaleFactor),u=Math.ceil(d+this.#e6*this.scaleFactor),[g,m]=this.parentDimensions;this.width=c/g,this.height=u/m,this.#e4=c/u,this.#tC();let v=this.translationX,y=this.translationY;this.translationX=-h[0],this.translationY=-h[1],this.#tm(),this.#tp(),this.#to=c,this.#tl=u,this.setDims(c,u);let A=a?d/this.scaleFactor/2:0;this.translate(v-this.translationX-A,y-this.translationY-A)}#tC(){let{style:a}=this.div;this.#e4>=1?(a.minHeight=`${b}px`,a.minWidth=`${Math.round(this.#e4*b)}px`):(a.minWidth=`${b}px`,a.minHeight=`${Math.round(b/this.#e4)}px`)}static deserialize(a,h,d){let u=super.deserialize(a,h,d);u.thickness=a.thickness,u.color=c.Util.makeHexColor(...a.color),u.opacity=a.opacity;let[g,m]=u.pageDimensions,v=u.width*g,y=u.height*m,A=u.parentScale,_=a.thickness/2;for(let{bezier:h}of(u.#e4=v/y,u.#tr=!0,u.#to=Math.round(v),u.#tl=Math.round(y),a.paths)){let a=[];u.paths.push(a);let d=A*(h[0]-_),c=A*(y-h[1]-_);for(let u=2,g=h.length;u<g;u+=6){let g=A*(h[u]-_),m=A*(y-h[u+1]-_),b=A*(h[u+2]-_),v=A*(y-h[u+3]-_),S=A*(h[u+4]-_),E=A*(y-h[u+5]-_);a.push([[d,c],[g,m],[b,v],[S,E]]),d=S,c=E}let g=this.#tS(a);u.bezierPath2D.push(g)}let S=u.#tM();return u.#e7=Math.max(b,S[2]-S[0]),u.#e6=Math.max(b,S[3]-S[1]),u.#tT(v,y),u}serialize(){if(this.isEmpty())return null;let a=this.getRect(0,0),h=this.rotation%180==0?a[3]-a[1]:a[2]-a[0],d=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:c.AnnotationEditorType.INK,color:d,thickness:this.thickness,opacity:this.opacity,paths:this.#tw(this.scaleFactor/this.parentScale,this.translationX,this.translationY,h),pageIndex:this.pageIndex,rect:a,rotation:this.rotation}}}h.InkEditor=v},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.fitCurve=void 0;let c=d(31);h.fitCurve=c},a=>{function h(a,h,c){if(!Array.isArray(a))throw TypeError("First argument should be an array");if(a.forEach(h=>{if(!Array.isArray(h)||h.some(a=>"number"!=typeof a)||h.length!==a[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(a=a.filter((h,d)=>0===d||!h.every((h,c)=>h===a[d-1][c]))).length<2)return[];let u=a.length,g=_(a[1],a[0]),m=_(a[u-2],a[u-1]);return d(a,g,m,h,c)}function d(a,h,u,m,v){var y,A,_,E,C,T,w,R,k,M,F,O,I;let D=20;if(2===a.length)return O=S.vectorLen(S.subtract(a[0],a[1]))/3,[y=[a[0],S.addArrays(a[0],S.mulItems(h,O)),S.addArrays(a[1],S.mulItems(u,O)),a[1]]];if(A=b(a),[y,E,T]=c(a,A,A,h,u,v),0===E||E<m)return[y];if(E<m*m)for(I=0,_=A,C=E,w=T;I<D;I++){if(_=g(y,a,_),[y,E,T]=c(a,A,_,h,u,v),E<m)return[y];if(T===w){let a=E/C;if(a>.9999&&a<1.0001)break}C=E,w=T}return F=[],(R=S.subtract(a[T-1],a[T+1])).every(a=>0===a)&&(R=S.subtract(a[T-1],a[T]),[R[0],R[1]]=[-R[1],R[0]]),k=S.normalize(R),M=S.mulItems(k,-1),F=(F=F.concat(d(a.slice(0,T+1),h,k,m,v))).concat(d(a.slice(T),M,u,m,v))}function c(a,h,d,c,g,m){var b,y,A;return b=u(a,d,c,g,m),[y,A]=v(a,b,h),m&&m({bez:b,points:a,params:h,maxErr:y,maxPoint:A}),[b,y,A]}function u(a,h,d,c){var u,g,m,b,v,y,A,_,C,T,w,R,k,M,F,O,I,D=a[0],L=a[a.length-1];for(k=0,u=[D,null,null,L],g=S.zeros_Xx2x2(h.length),M=h.length;k<M;k++)I=1-(O=h[k]),(m=g[k])[0]=S.mulItems(d,3*O*(I*I)),m[1]=S.mulItems(c,3*I*(O*O));for(k=0,b=[[0,0],[0,0]],v=[0,0],M=a.length;k<M;k++)O=h[k],m=g[k],b[0][0]+=S.dot(m[0],m[0]),b[0][1]+=S.dot(m[0],m[1]),b[1][0]+=S.dot(m[0],m[1]),b[1][1]+=S.dot(m[1],m[1]),F=S.subtract(a[k],E.q([D,D,L,L],O)),v[0]+=S.dot(m[0],F),v[1]+=S.dot(m[1],F);return y=b[0][0]*b[1][1]-b[1][0]*b[0][1],A=b[0][0]*v[1]-b[1][0]*v[0],_=v[0]*b[1][1]-v[1]*b[0][1],C=0===y?0:_/y,T=0===y?0:A/y,C<(w=1e-6*(R=S.vectorLen(S.subtract(D,L))))||T<w?(u[1]=S.addArrays(D,S.mulItems(d,R/3)),u[2]=S.addArrays(L,S.mulItems(c,R/3))):(u[1]=S.addArrays(D,S.mulItems(d,C)),u[2]=S.addArrays(L,S.mulItems(c,T))),u}function g(a,h,d){return d.map((d,c)=>m(a,h[c],d))}function m(a,h,d){var c=S.subtract(E.q(a,d),h),u=E.qprime(a,d),g=S.mulMatrix(c,u),m=S.sum(S.squareItems(u))+2*S.mulMatrix(c,E.qprimeprime(a,d));return 0===m?d:d-g/m}function b(a){var h,d,c,u=[];return a.forEach((a,g)=>{h=g?d+S.vectorLen(S.subtract(a,c)):0,u.push(h),d=h,c=a}),u=u.map(a=>a/d)}function v(a,h,d){var c,u,g,m,b,v,_,C;u=0,g=Math.floor(a.length/2);let T=y(h,10);for(b=0,v=a.length;b<v;b++)_=a[b],C=A(h,d[b],T,10),(c=(m=S.subtract(E.q(h,C),_))[0]*m[0]+m[1]*m[1])>u&&(u=c,g=b);return[u,g]}var y=function(a,h){for(var d,c=[0],u=a[0],g=0,m=1;m<=h;m++)d=E.q(a,m/h),c.push(g+=S.vectorLen(S.subtract(d,u))),u=d;return c.map(a=>a/g)};function A(a,h,d,c){if(h<0)return 0;if(h>1)return 1;for(var u,g,m,b,v=1;v<=c;v++)if(h<=d[v]){m=(v-1)/c,g=v/c,b=(h-(u=d[v-1]))/(d[v]-u)*(g-m)+m;break}return b}function _(a,h){return S.normalize(S.subtract(a,h))}class S{static zeros_Xx2x2(a){for(var h=[];a--;)h.push([0,0]);return h}static mulItems(a,h){return a.map(a=>a*h)}static mulMatrix(a,h){return a.reduce((a,d,c)=>a+d*h[c],0)}static subtract(a,h){return a.map((a,d)=>a-h[d])}static addArrays(a,h){return a.map((a,d)=>a+h[d])}static addItems(a,h){return a.map(a=>a+h)}static sum(a){return a.reduce((a,h)=>a+h)}static dot(a,h){return S.mulMatrix(a,h)}static vectorLen(a){return Math.hypot(...a)}static divItems(a,h){return a.map(a=>a/h)}static squareItems(a){return a.map(a=>a*a)}static normalize(a){return this.divItems(a,this.vectorLen(a))}}class E{static q(a,h){var d=1-h,c=S.mulItems(a[0],d*d*d),u=S.mulItems(a[1],3*d*d*h),g=S.mulItems(a[2],3*d*h*h),m=S.mulItems(a[3],h*h*h);return S.addArrays(S.addArrays(c,u),S.addArrays(g,m))}static qprime(a,h){var d=1-h,c=S.mulItems(S.subtract(a[1],a[0]),3*d*d),u=S.mulItems(S.subtract(a[2],a[1]),6*d*h),g=S.mulItems(S.subtract(a[3],a[2]),3*h*h);return S.addArrays(S.addArrays(c,u),g)}static qprimeprime(a,h){return S.addArrays(S.mulItems(S.addArrays(S.subtract(a[2],S.mulItems(a[1],2)),a[0]),6*(1-h)),S.mulItems(S.addArrays(S.subtract(a[3],S.mulItems(a[2],2)),a[1]),6*h))}}a.exports=h,a.exports.fitCubic=d,a.exports.createTangent=_},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AnnotationLayer=void 0;var c=d(1),u=d(6),g=d(3),m=d(33),b=d(34);let v=1e3,y=9,A=new WeakSet;function _(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class S{static create(a){switch(a.data.annotationType){case c.AnnotationType.LINK:return new C(a);case c.AnnotationType.TEXT:return new T(a);case c.AnnotationType.WIDGET:switch(a.data.fieldType){case"Tx":return new R(a);case"Btn":if(a.data.radioButton)return new M(a);if(a.data.checkBox)return new k(a);return new F(a);case"Ch":return new O(a)}return new w(a);case c.AnnotationType.POPUP:return new I(a);case c.AnnotationType.FREETEXT:return new L(a);case c.AnnotationType.LINE:return new N(a);case c.AnnotationType.SQUARE:return new j(a);case c.AnnotationType.CIRCLE:return new B(a);case c.AnnotationType.POLYLINE:return new U(a);case c.AnnotationType.CARET:return new G(a);case c.AnnotationType.INK:return new q(a);case c.AnnotationType.POLYGON:return new H(a);case c.AnnotationType.HIGHLIGHT:return new z(a);case c.AnnotationType.UNDERLINE:return new V(a);case c.AnnotationType.SQUIGGLY:return new W(a);case c.AnnotationType.STRIKEOUT:return new $(a);case c.AnnotationType.STAMP:return new X(a);case c.AnnotationType.FILEATTACHMENT:return new Y(a);default:return new E(a)}}}class E{constructor(a,{isRenderable:h=!1,ignoreBorder:d=!1,createQuadrilaterals:c=!1}={}){this.isRenderable=h,this.data=a.data,this.layer=a.layer,this.page=a.page,this.viewport=a.viewport,this.linkService=a.linkService,this.downloadManager=a.downloadManager,this.imageResourcesPath=a.imageResourcesPath,this.renderForms=a.renderForms,this.svgFactory=a.svgFactory,this.annotationStorage=a.annotationStorage,this.enableScripting=a.enableScripting,this.hasJSActions=a.hasJSActions,this._fieldObjects=a.fieldObjects,h&&(this.container=this._createContainer(d)),c&&(this.quadrilaterals=this._createQuadrilaterals(d))}_createContainer(a=!1){let{data:h,page:d,viewport:u}=this,g=document.createElement("section");g.setAttribute("data-annotation-id",h.id),h.noRotate&&g.classList.add("norotate");let{pageWidth:m,pageHeight:b,pageX:v,pageY:y}=u.rawDims,{width:A,height:S}=_(h.rect),E=c.Util.normalizeRect([h.rect[0],d.view[3]-h.rect[1]+d.view[1],h.rect[2],d.view[3]-h.rect[3]+d.view[1]]);if(!a&&h.borderStyle.width>0){g.style.borderWidth=`${h.borderStyle.width}px`;let a=h.borderStyle.horizontalCornerRadius,d=h.borderStyle.verticalCornerRadius;if(a>0||d>0){let h=`calc(${a}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;g.style.borderRadius=h}else if(this instanceof M){let a=`calc(${A}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;g.style.borderRadius=a}switch(h.borderStyle.style){case c.AnnotationBorderStyleType.SOLID:g.style.borderStyle="solid";break;case c.AnnotationBorderStyleType.DASHED:g.style.borderStyle="dashed";break;case c.AnnotationBorderStyleType.BEVELED:(0,c.warn)("Unimplemented border style: beveled");break;case c.AnnotationBorderStyleType.INSET:(0,c.warn)("Unimplemented border style: inset");break;case c.AnnotationBorderStyleType.UNDERLINE:g.style.borderBottomStyle="solid"}let u=h.borderColor||null;u?g.style.borderColor=c.Util.makeHexColor(0|u[0],0|u[1],0|u[2]):g.style.borderWidth=0}g.style.left=`${100*(E[0]-v)/m}%`,g.style.top=`${100*(E[1]-y)/b}%`;let{rotation:C}=h;return h.hasOwnCanvas||0===C?(g.style.width=`${100*A/m}%`,g.style.height=`${100*S/b}%`):this.setRotation(C,g),g}setRotation(a,h=this.container){let d,c;let{pageWidth:u,pageHeight:g}=this.viewport.rawDims,{width:m,height:b}=_(this.data.rect);a%180==0?(d=100*m/u,c=100*b/g):(d=100*b/u,c=100*m/g),h.style.width=`${d}%`,h.style.height=`${c}%`,h.setAttribute("data-main-rotation",(360-a)%360)}get _commonActions(){let a=(a,h,d)=>{let c=d.detail[a];d.target.style[h]=m.ColorConverters[`${c[0]}_HTML`](c.slice(1))};return(0,c.shadow)(this,"_commonActions",{display:a=>{let h=a.detail.display%2==1;this.container.style.visibility=h?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:h,print:0===a.detail.display||3===a.detail.display})},print:a=>{this.annotationStorage.setValue(this.data.id,{print:a.detail.print})},hidden:a=>{this.container.style.visibility=a.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:a.detail.hidden})},focus:a=>{setTimeout(()=>a.target.focus({preventScroll:!1}),0)},userName:a=>{a.target.title=a.detail.userName},readonly:a=>{a.detail.readonly?a.target.setAttribute("readonly",""):a.target.removeAttribute("readonly")},required:a=>{this._setRequired(a.target,a.detail.required)},bgColor:h=>{a("bgColor","backgroundColor",h)},fillColor:h=>{a("fillColor","backgroundColor",h)},fgColor:h=>{a("fgColor","color",h)},textColor:h=>{a("textColor","color",h)},borderColor:h=>{a("borderColor","borderColor",h)},strokeColor:h=>{a("strokeColor","borderColor",h)},rotation:a=>{let h=a.detail.rotation;this.setRotation(h),this.annotationStorage.setValue(this.data.id,{rotation:h})}})}_dispatchEventFromSandbox(a,h){let d=this._commonActions;for(let c of Object.keys(h.detail)){let u=a[c]||d[c];u?.(h)}}_setDefaultPropertiesFromJS(a){if(!this.enableScripting)return;let h=this.annotationStorage.getRawValue(this.data.id);if(!h)return;let d=this._commonActions;for(let[c,u]of Object.entries(h)){let g=d[c];g&&(g({detail:{[c]:u},target:a}),delete h[c])}}_createQuadrilaterals(a=!1){if(!this.data.quadPoints)return null;let h=[],d=this.data.rect;for(let d of this.data.quadPoints)this.data.rect=[d[2].x,d[2].y,d[1].x,d[1].y],h.push(this._createContainer(a));return this.data.rect=d,h}_createPopup(a,h){let d=this.container;this.quadrilaterals&&(a||=this.quadrilaterals,d=this.quadrilaterals[0]),a||((a=document.createElement("div")).classList.add("popupTriggerArea"),d.append(a));let c=new D({container:d,trigger:a,color:h.color,titleObj:h.titleObj,modificationDate:h.modificationDate,contentsObj:h.contentsObj,richText:h.richText,hideWrapper:!0}).render();c.style.left="100%",d.append(c)}_renderQuadrilaterals(a){for(let h of this.quadrilaterals)h.classList.add(a);return this.quadrilaterals}render(){(0,c.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(a,h=null){let d=[];if(this._fieldObjects){let u=this._fieldObjects[a];if(u)for(let{page:a,id:g,exportValues:m}of u){if(-1===a||g===h)continue;let u="string"==typeof m?m:null,b=document.querySelector(`[data-element-id="${g}"]`);if(b&&!A.has(b)){(0,c.warn)(`_getElementsByName - element not allowed: ${g}`);continue}d.push({id:g,exportValue:u,domElement:b})}return d}for(let c of document.getElementsByName(a)){let{exportValue:a}=c,u=c.getAttribute("data-element-id");u!==h&&A.has(c)&&d.push({id:u,exportValue:a,domElement:c})}return d}}class C extends E{constructor(a,h=null){super(a,{isRenderable:!0,ignoreBorder:!!h?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=a.data.isTooltipOnly}render(){let{data:a,linkService:h}=this,d=document.createElement("a");d.setAttribute("data-element-id",a.id);let c=!1;return(a.url?(h.addLinkAttributes(d,a.url,a.newWindow),c=!0):a.action?(this._bindNamedAction(d,a.action),c=!0):a.attachment?(this._bindAttachment(d,a.attachment),c=!0):a.setOCGState?(this.#tF(d,a.setOCGState),c=!0):a.dest?(this._bindLink(d,a.dest),c=!0):(a.actions&&(a.actions.Action||a.actions["Mouse Up"]||a.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(d,a),c=!0),a.resetForm?(this._bindResetFormAction(d,a.resetForm),c=!0):this.isTooltipOnly&&!c&&(this._bindLink(d,""),c=!0)),this.quadrilaterals)?this._renderQuadrilaterals("linkAnnotation").map((a,h)=>{let c=0===h?d:d.cloneNode();return a.append(c),a}):(this.container.classList.add("linkAnnotation"),c&&this.container.append(d),this.container)}#tO(){this.container.setAttribute("data-internal-link","")}_bindLink(a,h){a.href=this.linkService.getDestinationHash(h),a.onclick=()=>(h&&this.linkService.goToDestination(h),!1),(h||""===h)&&this.#tO()}_bindNamedAction(a,h){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.linkService.executeNamedAction(h),!1),this.#tO()}_bindAttachment(a,h){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,h.content,h.filename),!1),this.#tO()}#tF(a,h){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.linkService.executeSetOCGState(h),!1),this.#tO()}_bindJSAction(a,h){a.href=this.linkService.getAnchorUrl("");let d=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let c of Object.keys(h.actions)){let u=d.get(c);u&&(a[u]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h.id,name:c}}),!1))}a.onclick||(a.onclick=()=>!1),this.#tO()}_bindResetFormAction(a,h){let d=a.onclick;if(d||(a.href=this.linkService.getAnchorUrl("")),this.#tO(),!this._fieldObjects){(0,c.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),d||(a.onclick=()=>!1);return}a.onclick=()=>{d?.();let{fields:a,refs:u,include:g}=h,m=[];if(0!==a.length||0!==u.length){let h=new Set(u);for(let d of a)for(let{id:a}of this._fieldObjects[d]||[])h.add(a);for(let a of Object.values(this._fieldObjects))for(let d of a)h.has(d.id)===g&&m.push(d)}else for(let a of Object.values(this._fieldObjects))m.push(...a);let b=this.annotationStorage,v=[];for(let a of m){let{id:h}=a;switch(v.push(h),a.type){case"text":{let d=a.defaultValue||"";b.setValue(h,{value:d});break}case"checkbox":case"radiobutton":{let d=a.defaultValue===a.exportValues;b.setValue(h,{value:d});break}case"combobox":case"listbox":{let d=a.defaultValue||"";b.setValue(h,{value:d});break}default:continue}let d=document.querySelector(`[data-element-id="${h}"]`);if(d){if(!A.has(d)){(0,c.warn)(`_bindResetFormAction - element not allowed: ${h}`);continue}d.dispatchEvent(new Event("resetform"))}}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:v,name:"ResetForm"}}),!1}}}class T extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str)})}render(){this.container.classList.add("textAnnotation");let a=document.createElement("img");return a.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",a.alt="[{{type}} Annotation]",a.dataset.l10nId="text_annotation_type",a.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(a,this.data),this.container.append(a),this.container}}class w extends E{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(a){this.data.hasOwnCanvas&&(a.previousSibling?.nodeName==="CANVAS"&&(a.previousSibling.hidden=!0),a.hidden=!1)}_getKeyModifier(a){let{isWin:h,isMac:d}=c.FeatureTest.platform;return h&&a.ctrlKey||d&&a.metaKey}_setEventListener(a,h,d,c){h.includes("mouse")?a.addEventListener(h,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:d,value:c(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):a.addEventListener(h,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:d,value:c(a)}})})}_setEventListeners(a,h,d){for(let[c,u]of h)("Action"===u||this.data.actions?.[u])&&this._setEventListener(a,c,u,d)}_setBackgroundColor(a){let h=this.data.backgroundColor||null;a.style.backgroundColor=null===h?"transparent":c.Util.makeHexColor(h[0],h[1],h[2])}_setTextStyle(a){let h;let d=["left","center","right"],{fontColor:u}=this.data.defaultAppearanceData,g=this.data.defaultAppearanceData.fontSize||y,m=a.style,b=2,v=a=>Math.round(10*a)/10;if(this.data.multiLine){let a=Math.abs(this.data.rect[3]-this.data.rect[1]-b),d=Math.round(a/(c.LINE_FACTOR*g))||1;h=Math.min(g,v(a/d/c.LINE_FACTOR))}else h=Math.min(g,v(Math.abs(this.data.rect[3]-this.data.rect[1]-b)/c.LINE_FACTOR));m.fontSize=`calc(${h}px * var(--scale-factor))`,m.color=c.Util.makeHexColor(u[0],u[1],u[2]),null!==this.data.textAlignment&&(m.textAlign=d[this.data.textAlignment])}_setRequired(a,h){h?a.setAttribute("required",!0):a.removeAttribute("required"),a.setAttribute("aria-required",h)}}class R extends w{constructor(a){super(a,{isRenderable:a.renderForms||!a.data.hasAppearance&&!!a.data.fieldValue})}setPropertyOnSiblings(a,h,d,c){let u=this.annotationStorage;for(let g of this._getElementsByName(a.name,a.id))g.domElement&&(g.domElement[h]=d),u.setValue(g.id,{[c]:d})}render(){let a=this.annotationStorage,h=this.data.id;this.container.classList.add("textWidgetAnnotation");let d=null;if(this.renderForms){let c=a.getValue(h,{value:this.data.fieldValue}),u=c.formattedValue||c.value||"",g=a.getValue(h,{charLimit:this.data.maxLen}).charLimit;g&&u.length>g&&(u=u.slice(0,g));let m={userValue:u,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?((d=document.createElement("textarea")).textContent=u,this.data.doNotScroll&&(d.style.overflowY="hidden")):((d=document.createElement("input")).type="text",d.setAttribute("value",u),this.data.doNotScroll&&(d.style.overflowX="hidden")),this.data.hasOwnCanvas&&(d.hidden=!0),A.add(d),d.setAttribute("data-element-id",h),d.disabled=this.data.readOnly,d.name=this.data.fieldName,d.tabIndex=v,this._setRequired(d,this.data.required),g&&(d.maxLength=g),d.addEventListener("input",c=>{a.setValue(h,{value:c.target.value}),this.setPropertyOnSiblings(d,"value",c.target.value,"value")}),d.addEventListener("resetform",a=>{let h=this.data.defaultFieldValue??"";d.value=m.userValue=h,m.formattedValue=null});let b=a=>{let{formattedValue:h}=m;null!=h&&(a.target.value=h),a.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){d.addEventListener("focus",a=>{let{target:h}=a;m.userValue&&(h.value=m.userValue),m.lastCommittedValue=h.value,m.commitKey=1}),d.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target);let c={value(d){m.userValue=d.detail.value??"",a.setValue(h,{value:m.userValue.toString()}),d.target.value=m.userValue},formattedValue(d){let{formattedValue:c}=d.detail;m.formattedValue=c,null!=c&&d.target!==document.activeElement&&(d.target.value=c),a.setValue(h,{formattedValue:c})},selRange(a){a.target.setSelectionRange(...a.detail.selRange)},charLimit:d=>{let{charLimit:c}=d.detail,{target:u}=d;if(0===c){u.removeAttribute("maxLength");return}u.setAttribute("maxLength",c);let g=m.userValue;g&&!(g.length<=c)&&(g=g.slice(0,c),u.value=m.userValue=g,a.setValue(h,{value:g}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:g,willCommit:!0,commitKey:1,selStart:u.selectionStart,selEnd:u.selectionEnd}}))}};this._dispatchEventFromSandbox(c,d)}),d.addEventListener("keydown",a=>{m.commitKey=1;let d=-1;if("Escape"===a.key?d=0:"Enter"!==a.key||this.data.multiLine?"Tab"===a.key&&(m.commitKey=3):d=2,-1===d)return;let{value:c}=a.target;m.lastCommittedValue!==c&&(m.lastCommittedValue=c,m.userValue=c,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:c,willCommit:!0,commitKey:d,selStart:a.target.selectionStart,selEnd:a.target.selectionEnd}}))});let c=b;b=null,d.addEventListener("blur",a=>{if(!a.relatedTarget)return;let{value:d}=a.target;m.userValue=d,m.lastCommittedValue!==d&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:d,willCommit:!0,commitKey:m.commitKey,selStart:a.target.selectionStart,selEnd:a.target.selectionEnd}}),c(a)}),this.data.actions?.Keystroke&&d.addEventListener("beforeinput",a=>{m.lastCommittedValue=null;let{data:d,target:c}=a,{value:u,selectionStart:g,selectionEnd:b}=c,v=g,y=b;switch(a.inputType){case"deleteWordBackward":{let a=u.substring(0,g).match(/\w*[^\w]*$/);a&&(v-=a[0].length);break}case"deleteWordForward":{let a=u.substring(g).match(/^[^\w]*\w*/);a&&(y+=a[0].length);break}case"deleteContentBackward":g===b&&(v-=1);break;case"deleteContentForward":g===b&&(y+=1)}a.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:u,change:d||"",willCommit:!1,selStart:v,selEnd:y}})}),this._setEventListeners(d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.value)}if(b&&d.addEventListener("blur",b),this.data.comb){let a=(this.data.rect[2]-this.data.rect[0])/g;d.classList.add("comb"),d.style.letterSpacing=`calc(${a}px * var(--scale-factor) - 1ch)`}}else(d=document.createElement("div")).textContent=this.data.fieldValue,d.style.verticalAlign="middle",d.style.display="table-cell";return this._setTextStyle(d),this._setBackgroundColor(d),this._setDefaultPropertiesFromJS(d),this.container.append(d),this.container}}class k extends w{constructor(a){super(a,{isRenderable:a.renderForms})}render(){let a=this.annotationStorage,h=this.data,d=h.id,c=a.getValue(d,{value:h.exportValue===h.fieldValue}).value;"string"==typeof c&&(c="Off"!==c,a.setValue(d,{value:c})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let u=document.createElement("input");return A.add(u),u.setAttribute("data-element-id",d),u.disabled=h.readOnly,this._setRequired(u,this.data.required),u.type="checkbox",u.name=h.fieldName,c&&u.setAttribute("checked",!0),u.setAttribute("exportValue",h.exportValue),u.tabIndex=v,u.addEventListener("change",c=>{let{name:u,checked:g}=c.target;for(let c of this._getElementsByName(u,d)){let d=g&&c.exportValue===h.exportValue;c.domElement&&(c.domElement.checked=d),a.setValue(c.id,{value:d})}a.setValue(d,{value:g})}),u.addEventListener("resetform",a=>{let d=h.defaultFieldValue||"Off";a.target.checked=d===h.exportValue}),this.enableScripting&&this.hasJSActions&&(u.addEventListener("updatefromsandbox",h=>{let c={value(h){h.target.checked="Off"!==h.detail.value,a.setValue(d,{value:h.target.checked})}};this._dispatchEventFromSandbox(c,h)}),this._setEventListeners(u,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(u),this._setDefaultPropertiesFromJS(u),this.container.append(u),this.container}}class M extends w{constructor(a){super(a,{isRenderable:a.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let a=this.annotationStorage,h=this.data,d=h.id,c=a.getValue(d,{value:h.fieldValue===h.buttonValue}).value;"string"==typeof c&&(c=c!==h.buttonValue,a.setValue(d,{value:c}));let u=document.createElement("input");if(A.add(u),u.setAttribute("data-element-id",d),u.disabled=h.readOnly,this._setRequired(u,this.data.required),u.type="radio",u.name=h.fieldName,c&&u.setAttribute("checked",!0),u.tabIndex=v,u.addEventListener("change",h=>{let{name:c,checked:u}=h.target;for(let h of this._getElementsByName(c,d))a.setValue(h.id,{value:!1});a.setValue(d,{value:u})}),u.addEventListener("resetform",a=>{let d=h.defaultFieldValue;a.target.checked=null!=d&&d===h.buttonValue}),this.enableScripting&&this.hasJSActions){let c=h.buttonValue;u.addEventListener("updatefromsandbox",h=>{let u={value:h=>{let u=c===h.detail.value;for(let c of this._getElementsByName(h.target.name)){let h=u&&c.id===d;c.domElement&&(c.domElement.checked=h),a.setValue(c.id,{value:h})}}};this._dispatchEventFromSandbox(u,h)}),this._setEventListeners(u,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(u),this._setDefaultPropertiesFromJS(u),this.container.append(u),this.container}}class F extends C{constructor(a){super(a,{ignoreBorder:a.data.hasAppearance})}render(){let a=super.render();a.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(a.title=this.data.alternativeText);let h=a.lastChild;return this.enableScripting&&this.hasJSActions&&h&&(this._setDefaultPropertiesFromJS(h),h.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({},a)})),a}}class O extends w{constructor(a){super(a,{isRenderable:a.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let a=this.annotationStorage,h=this.data.id,d=a.getValue(h,{value:this.data.fieldValue}),c=document.createElement("select");A.add(c),c.setAttribute("data-element-id",h),c.disabled=this.data.readOnly,this._setRequired(c,this.data.required),c.name=this.data.fieldName,c.tabIndex=v;let u=this.data.combo&&this.data.options.length>0;for(let a of(!this.data.combo&&(c.size=this.data.options.length,this.data.multiSelect&&(c.multiple=!0)),c.addEventListener("resetform",a=>{let h=this.data.defaultFieldValue;for(let a of c.options)a.selected=a.value===h}),this.data.options)){let h=document.createElement("option");h.textContent=a.displayValue,h.value=a.exportValue,d.value.includes(a.exportValue)&&(h.setAttribute("selected",!0),u=!1),c.append(h)}let g=null;if(u){let a=document.createElement("option");a.value=" ",a.setAttribute("hidden",!0),a.setAttribute("selected",!0),c.prepend(a),g=()=>{a.remove(),c.removeEventListener("input",g),g=null},c.addEventListener("input",g)}let m=a=>{let h=a?"value":"textContent",{options:d,multiple:u}=c;return u?Array.prototype.filter.call(d,a=>a.selected).map(a=>a[h]):-1===d.selectedIndex?null:d[d.selectedIndex][h]},b=m(!1),y=a=>{let h=a.target.options;return Array.prototype.map.call(h,a=>({displayValue:a.textContent,exportValue:a.value}))};return this.enableScripting&&this.hasJSActions?(c.addEventListener("updatefromsandbox",d=>{let u={value(d){g?.();let u=d.detail.value,v=new Set(Array.isArray(u)?u:[u]);for(let a of c.options)a.selected=v.has(a.value);a.setValue(h,{value:m(!0)}),b=m(!1)},multipleSelection(a){c.multiple=!0},remove(d){let u=c.options,g=d.detail.remove;u[g].selected=!1,c.remove(g),u.length>0&&-1===Array.prototype.findIndex.call(u,a=>a.selected)&&(u[0].selected=!0),a.setValue(h,{value:m(!0),items:y(d)}),b=m(!1)},clear(d){for(;0!==c.length;)c.remove(0);a.setValue(h,{value:null,items:[]}),b=m(!1)},insert(d){let{index:u,displayValue:g,exportValue:v}=d.detail.insert,A=c.children[u],_=document.createElement("option");_.textContent=g,_.value=v,A?A.before(_):c.append(_),a.setValue(h,{value:m(!0),items:y(d)}),b=m(!1)},items(d){let{items:u}=d.detail;for(;0!==c.length;)c.remove(0);for(let a of u){let{displayValue:h,exportValue:d}=a,u=document.createElement("option");u.textContent=h,u.value=d,c.append(u)}c.options.length>0&&(c.options[0].selected=!0),a.setValue(h,{value:m(!0),items:y(d)}),b=m(!1)},indices(d){let c=new Set(d.detail.indices);for(let a of d.target.options)a.selected=c.has(a.index);a.setValue(h,{value:m(!0)}),b=m(!1)},editable(a){a.target.disabled=!a.detail.editable}};this._dispatchEventFromSandbox(u,d)}),c.addEventListener("input",d=>{let c=m(!0);a.setValue(h,{value:c}),d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:b,changeEx:c,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],a=>a.target.value)):c.addEventListener("input",function(d){a.setValue(h,{value:m(!0)})}),this.data.combo&&this._setTextStyle(c),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.append(c),this.container}}class I extends E{static{this.IGNORE_TYPES=new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"])}constructor(a){let{data:h}=a;super(a,{isRenderable:!I.IGNORE_TYPES.has(h.parentType)&&!!(h.titleObj?.str||h.contentsObj?.str||h.richText?.str)})}render(){this.container.classList.add("popupAnnotation");let a=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===a.length)return this.container;let h=new D({container:this.container,trigger:Array.from(a),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),d=this.page,u=c.Util.normalizeRect([this.data.parentRect[0],d.view[3]-this.data.parentRect[1]+d.view[1],this.data.parentRect[2],d.view[3]-this.data.parentRect[3]+d.view[1]]),g=u[0]+this.data.parentRect[2]-this.data.parentRect[0],m=u[1],{pageWidth:b,pageHeight:v,pageX:y,pageY:A}=this.viewport.rawDims;return this.container.style.left=`${100*(g-y)/b}%`,this.container.style.top=`${100*(m-A)/v}%`,this.container.append(h.render()),this.container}}class D{constructor(a){this.container=a.container,this.trigger=a.trigger,this.color=a.color,this.titleObj=a.titleObj,this.modificationDate=a.modificationDate,this.contentsObj=a.contentsObj,this.richText=a.richText,this.hideWrapper=a.hideWrapper||!1,this.pinned=!1}render(){let a=.7,h=document.createElement("div");h.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?h:this.container,this.hideElement.hidden=!0;let d=document.createElement("div");d.classList.add("popup");let g=this.color;if(g){let h=a*(255-g[0])+g[0],u=a*(255-g[1])+g[1],m=a*(255-g[2])+g[2];d.style.backgroundColor=c.Util.makeHexColor(0|h,0|u,0|m)}let m=document.createElement("h1");m.dir=this.titleObj.dir,m.textContent=this.titleObj.str,d.append(m);let v=u.PDFDateString.toDateObject(this.modificationDate);if(v){let a=document.createElement("span");a.classList.add("popupDate"),a.textContent="{{date}}, {{time}}",a.dataset.l10nId="annotation_date_string",a.dataset.l10nArgs=JSON.stringify({date:v.toLocaleDateString(),time:v.toLocaleTimeString()}),d.append(a)}if(this.richText?.str&&(!this.contentsObj?.str||this.contentsObj.str===this.richText.str))b.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:d}),d.lastChild.classList.add("richText","popupContent");else{let a=this._formatContents(this.contentsObj);d.append(a)}for(let a of(Array.isArray(this.trigger)||(this.trigger=[this.trigger]),this.trigger))a.addEventListener("click",this._toggle.bind(this)),a.addEventListener("mouseover",this._show.bind(this,!1)),a.addEventListener("mouseout",this._hide.bind(this,!1));return d.addEventListener("click",this._hide.bind(this,!0)),h.append(d),h}_formatContents({str:a,dir:h}){let d=document.createElement("p");d.classList.add("popupContent"),d.dir=h;let c=a.split(/(?:\r\n?|\n)/);for(let a=0,h=c.length;a<h;++a){let u=c[a];d.append(document.createTextNode(u)),a<h-1&&d.append(document.createElement("br"))}return d}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(a=!1){a&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(a=!0){a&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class L extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0}),this.textContent=a.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let a=document.createElement("div");for(let h of(a.classList.add("annotationTextContent"),a.setAttribute("role","comment"),this.textContent)){let d=document.createElement("span");d.textContent=h,a.append(d)}this.container.append(a)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class N extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let a=this.data,{width:h,height:d}=_(a.rect),c=this.svgFactory.create(h,d,!0),u=this.svgFactory.createElement("svg:line");return u.setAttribute("x1",a.rect[2]-a.lineCoordinates[0]),u.setAttribute("y1",a.rect[3]-a.lineCoordinates[1]),u.setAttribute("x2",a.rect[2]-a.lineCoordinates[2]),u.setAttribute("y2",a.rect[3]-a.lineCoordinates[3]),u.setAttribute("stroke-width",a.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),this._createPopup(u,a),this.container}}class j extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let a=this.data,{width:h,height:d}=_(a.rect),c=this.svgFactory.create(h,d,!0),u=a.borderStyle.width,g=this.svgFactory.createElement("svg:rect");return g.setAttribute("x",u/2),g.setAttribute("y",u/2),g.setAttribute("width",h-u),g.setAttribute("height",d-u),g.setAttribute("stroke-width",u||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),c.append(g),this.container.append(c),this._createPopup(g,a),this.container}}class B extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let a=this.data,{width:h,height:d}=_(a.rect),c=this.svgFactory.create(h,d,!0),u=a.borderStyle.width,g=this.svgFactory.createElement("svg:ellipse");return g.setAttribute("cx",h/2),g.setAttribute("cy",d/2),g.setAttribute("rx",h/2-u/2),g.setAttribute("ry",d/2-u/2),g.setAttribute("stroke-width",u||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),c.append(g),this.container.append(c),this._createPopup(g,a),this.container}}class U extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let a=this.data,{width:h,height:d}=_(a.rect),c=this.svgFactory.create(h,d,!0),u=[];for(let h of a.vertices){let d=h.x-a.rect[0],c=a.rect[3]-h.y;u.push(d+","+c)}u=u.join(" ");let g=this.svgFactory.createElement(this.svgElementName);return g.setAttribute("points",u),g.setAttribute("stroke-width",a.borderStyle.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),c.append(g),this.container.append(c),this._createPopup(g,a),this.container}}class H extends U{constructor(a){super(a),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class G extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class q extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let a=this.data,{width:h,height:d}=_(a.rect),c=this.svgFactory.create(h,d,!0);for(let h of a.inkLists){let d=[];for(let c of h){let h=c.x-a.rect[0],u=a.rect[3]-c.y;d.push(`${h},${u}`)}d=d.join(" ");let u=this.svgFactory.createElement(this.svgElementName);u.setAttribute("points",d),u.setAttribute("stroke-width",a.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),this._createPopup(u,a),c.append(u)}return this.container.append(c),this.container}}class z extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return(this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals)?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class V extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return(this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals)?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class W extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return(this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals)?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class $ extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return(this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals)?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class X extends E{constructor(a){super(a,{isRenderable:!!(a.data.hasPopup||a.data.titleObj?.str||a.data.contentsObj?.str||a.data.richText?.str),ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Y extends E{constructor(a){super(a,{isRenderable:!0});let{filename:h,content:d}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(h,!0),this.content=d,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:h,content:d})}render(){let a;return this.container.classList.add("fileAttachmentAnnotation"),this.data.hasAppearance?a=document.createElement("div"):(a=document.createElement("img")).src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`,a.classList.add("popupTriggerArea"),a.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(a,this.data),this.container.append(a),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class K{static #tI(a,h,d,c){let g=a.firstChild||a;g.id=`${u.AnnotationPrefix}${h}`,d.append(a),c?.moveElementInDOM(d,a,g,!1)}static render(a){let{annotations:h,div:d,viewport:m,accessibilityManager:b}=a;(0,u.setLayerDimensions)(d,m);let v={data:null,layer:d,page:a.page,viewport:m,linkService:a.linkService,downloadManager:a.downloadManager,imageResourcesPath:a.imageResourcesPath||"",renderForms:!1!==a.renderForms,svgFactory:new u.DOMSVGFactory,annotationStorage:a.annotationStorage||new g.AnnotationStorage,enableScripting:!0===a.enableScripting,hasJSActions:a.hasJSActions,fieldObjects:a.fieldObjects},y=0;for(let a of h){if(a.noHTML)continue;if(a.annotationType!==c.AnnotationType.POPUP){let{width:h,height:d}=_(a.rect);if(h<=0||d<=0)continue}v.data=a;let h=S.create(v);if(!h.isRenderable)continue;let u=h.render();if(a.hidden&&(u.style.visibility="hidden"),Array.isArray(u))for(let h of u)h.style.zIndex=y++,K.#tI(h,a.id,d,b);else u.style.zIndex=y++,h instanceof I?d.prepend(u):K.#tI(u,a.id,d,b)}this.#tD(d,a.annotationCanvasMap)}static update(a){let{annotationCanvasMap:h,div:d,viewport:c}=a;(0,u.setLayerDimensions)(d,{rotation:c.rotation}),this.#tD(d,h),d.hidden=!1}static #tD(a,h){if(h){for(let[d,c]of h){let h=a.querySelector(`[data-annotation-id="${d}"]`);if(!h)continue;let{firstChild:u}=h;u?"CANVAS"===u.nodeName?u.replaceWith(c):u.before(c):h.append(c)}h.clear()}}}h.AnnotationLayer=K},(a,h)=>{function d(a){return Math.floor(255*Math.max(0,Math.min(1,a))).toString(16).padStart(2,"0")}Object.defineProperty(h,"__esModule",{value:!0}),h.ColorConverters=void 0;class c{static CMYK_G([a,h,d,c]){return["G",1-Math.min(1,.3*a+.59*d+.11*h+c)]}static G_CMYK([a]){return["CMYK",0,0,0,1-a]}static G_RGB([a]){return["RGB",a,a,a]}static G_HTML([a]){let h=d(a);return`#${h}${h}${h}`}static RGB_G([a,h,d]){return["G",.3*a+.59*h+.11*d]}static RGB_HTML([a,h,c]){let u=d(a),g=d(h),m=d(c);return`#${u}${g}${m}`}static T_HTML(){return"#00000000"}static CMYK_RGB([a,h,d,c]){return["RGB",1-Math.min(1,a+c),1-Math.min(1,d+c),1-Math.min(1,h+c)]}static CMYK_HTML(a){let h=this.CMYK_RGB(a).slice(1);return this.RGB_HTML(h)}static RGB_CMYK([a,h,d]){let c=1-a,u=1-h,g=1-d,m=Math.min(c,u,g);return["CMYK",c,u,g,m]}}h.ColorConverters=c},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.XfaLayer=void 0;var c=d(19);class u{static setupStorage(a,h,d,c,u){let g=c.getValue(h,{value:null});switch(d.name){case"textarea":if(null!==g.value&&(a.textContent=g.value),"print"===u)break;a.addEventListener("input",a=>{c.setValue(h,{value:a.target.value})});break;case"input":if("radio"===d.attributes.type||"checkbox"===d.attributes.type){if(g.value===d.attributes.xfaOn?a.setAttribute("checked",!0):g.value===d.attributes.xfaOff&&a.removeAttribute("checked"),"print"===u)break;a.addEventListener("change",a=>{c.setValue(h,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(null!==g.value&&a.setAttribute("value",g.value),"print"===u)break;a.addEventListener("input",a=>{c.setValue(h,{value:a.target.value})})}break;case"select":if(null!==g.value)for(let a of d.children)a.attributes.value===g.value&&(a.attributes.selected=!0);a.addEventListener("input",a=>{let d=a.target.options,u=-1===d.selectedIndex?"":d[d.selectedIndex].value;c.setValue(h,{value:u})})}}static setAttributes({html:a,element:h,storage:d=null,intent:c,linkService:u}){let{attributes:g}=h,m=a instanceof HTMLAnchorElement;for(let[h,d]of("radio"===g.type&&(g.name=`${g.name}-${c}`),Object.entries(g)))if(null!=d)switch(h){case"class":d.length&&a.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":a.setAttribute("data-element-id",d);break;case"style":Object.assign(a.style,d);break;case"textContent":a.textContent=d;break;default:m&&("href"===h||"newWindow"===h)||a.setAttribute(h,d)}m&&u.addLinkAttributes(a,g.href,g.newWindow),d&&g.dataId&&this.setupStorage(a,g.dataId,h,d)}static render(a){let h=a.annotationStorage,d=a.linkService,u=a.xfaHtml,g=a.intent||"display",m=document.createElement(u.name);u.attributes&&this.setAttributes({html:m,element:u,intent:g,linkService:d});let b=[[u,-1,m]],v=a.div;if(v.append(m),a.viewport){let h=`matrix(${a.viewport.transform.join(",")})`;v.style.transform=h}"richText"!==g&&v.setAttribute("class","xfaLayer xfaFont");let y=[];for(;b.length>0;){let a;let[u,m,v]=b.at(-1);if(m+1===u.children.length){b.pop();continue}let A=u.children[++b.at(-1)[1]];if(null===A)continue;let{name:_}=A;if("#text"===_){let a=document.createTextNode(A.value);y.push(a),v.append(a);continue}if(a=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,_):document.createElement(_),v.append(a),A.attributes&&this.setAttributes({html:a,element:A,storage:h,intent:g,linkService:d}),A.children&&A.children.length>0)b.push([A,-1,a]);else if(A.value){let h=document.createTextNode(A.value);c.XfaText.shouldBuildText(_)&&y.push(h),a.append(h)}}for(let a of v.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))a.setAttribute("readOnly",!0);return{textDivs:y}}static update(a){let h=`matrix(${a.viewport.transform.join(",")})`;a.div.style.transform=h,a.div.hidden=!1}}h.XfaLayer=u},(a,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.SVGGraphics=void 0;var c=d(6),u=d(1),g=d(10);let m=class{constructor(){(0,u.unreachable)("Not implemented: SVGGraphics")}};h.SVGGraphics=m;{let a={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},d="http://www.w3.org/XML/1998/namespace",A="http://www.w3.org/1999/xlink",_=["butt","round","square"],S=["miter","round","bevel"],E=function(a,h="",d=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!d)return URL.createObjectURL(new Blob([a],{type:h}));let c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=`data:${h};base64,`;for(let h=0,d=a.length;h<d;h+=3){let g=255&a[h],m=255&a[h+1],b=255&a[h+2],v=g>>2,y=(3&g)<<4|m>>4,A=h+1<d?(15&m)<<2|b>>6:64,_=h+2<d?63&b:64;u+=c[v]+c[y]+c[A]+c[_]}return u},C=function(){let a=new Uint8Array([137,80,78,71,13,10,26,10]),h=12,d=new Int32Array(256);for(let a=0;a<256;a++){let h=a;for(let a=0;a<8;a++)h=1&h?3988292384^h>>1&2147483647:h>>1&2147483647;d[a]=h}function c(a,h,c){let u=-1;for(let g=h;g<c;g++){let h=d[(u^a[g])&255];u=u>>>8^h}return -1^u}function m(a,h,d,u){let g=u,m=h.length;d[g]=m>>24&255,d[g+1]=m>>16&255,d[g+2]=m>>8&255,d[g+3]=255&m,d[g+=4]=255&a.charCodeAt(0),d[g+1]=255&a.charCodeAt(1),d[g+2]=255&a.charCodeAt(2),d[g+3]=255&a.charCodeAt(3),g+=4,d.set(h,g);let b=c(d,u+4,g+=h.length);d[g]=b>>24&255,d[g+1]=b>>16&255,d[g+2]=b>>8&255,d[g+3]=255&b}function b(a,h,d){let c=1,u=0;for(let g=h;g<d;++g)u=(u+(c=(c+(255&a[g]))%65521))%65521;return u<<16|c}function v(a){if(!g.isNodeJS)return y(a);try{let h;h=parseInt(process.versions.node)>=8?a:Buffer.from(a);let d=__webpack_require__(9796).deflateSync(h,{level:9});return d instanceof Uint8Array?d:new Uint8Array(d)}catch(a){(0,u.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+a)}return y(a)}function y(a){let h=a.length,d=65535,c=Math.ceil(h/65535),u=new Uint8Array(2+h+5*c+4),g=0;u[g++]=120,u[g++]=156;let m=0;for(;h>d;)u[g++]=0,u[g++]=255,u[g++]=255,u[g++]=0,u[g++]=0,u.set(a.subarray(m,m+d),g),g+=d,m+=d,h-=d;u[g++]=1,u[g++]=255&h,u[g++]=h>>8&255,u[g++]=255&~h,u[g++]=(65535&~h)>>8&255,u.set(a.subarray(m),g),g+=a.length-m;let v=b(a,0,a.length);return u[g++]=v>>24&255,u[g++]=v>>16&255,u[g++]=v>>8&255,u[g++]=255&v,u}function A(d,c,g,b){let y,A,_;let S=d.width,C=d.height,T=d.data;switch(c){case u.ImageKind.GRAYSCALE_1BPP:A=0,y=1,_=S+7>>3;break;case u.ImageKind.RGB_24BPP:A=2,y=8,_=3*S;break;case u.ImageKind.RGBA_32BPP:A=6,y=8,_=4*S;break;default:throw Error("invalid format")}let w=new Uint8Array((1+_)*C),R=0,k=0;for(let a=0;a<C;++a)w[R++]=0,w.set(T.subarray(k,k+_),R),k+=_,R+=_;if(c===u.ImageKind.GRAYSCALE_1BPP&&b){R=0;for(let a=0;a<C;a++){R++;for(let a=0;a<_;a++)w[R++]^=255}}let M=new Uint8Array([S>>24&255,S>>16&255,S>>8&255,255&S,C>>24&255,C>>16&255,C>>8&255,255&C,y,A,0,0,0]),F=v(w),O=a.length+3*h+M.length+F.length,I=new Uint8Array(O),D=0;return I.set(a,D),m("IHDR",M,I,D+=a.length),m("IDATA",F,I,D+=h+M.length),D+=h+F.length,m("IEND",new Uint8Array(0),I,D),E(I,"image/png",g)}return function(a,h,d){let c=void 0===a.kind?u.ImageKind.GRAYSCALE_1BPP:a.kind;return A(a,c,h,d)}}();class T{constructor(){this.fontSizeScale=1,this.fontWeight=a.fontWeight,this.fontSize=0,this.textMatrix=u.IDENTITY_MATRIX,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=u.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=a.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(a,h){this.x=a,this.y=h}}function b(a){let h=[],d=[];for(let c of a){if("save"===c.fn){h.push({fnId:92,fn:"group",items:[]}),d.push(h),h=h.at(-1).items;continue}"restore"===c.fn?h=d.pop():h.push(c)}return h}function v(a){if(Number.isInteger(a))return a.toString();let h=a.toFixed(10),d=h.length-1;if("0"!==h[d])return h;do d--;while("0"===h[d]);return h.substring(0,"."===h[d]?d:d+1)}function y(a){if(0===a[4]&&0===a[5]){if(0===a[1]&&0===a[2])return 1===a[0]&&1===a[3]?"":`scale(${v(a[0])} ${v(a[3])})`;if(a[0]===a[3]&&a[1]===-a[2]){let h=180*Math.acos(a[0])/Math.PI;return`rotate(${v(h)})`}}else if(1===a[0]&&0===a[1]&&0===a[2]&&1===a[3])return`translate(${v(a[4])} ${v(a[5])})`;return`matrix(${v(a[0])} ${v(a[1])} ${v(a[2])} ${v(a[3])} ${v(a[4])} ${v(a[5])})`}let w=0,R=0,k=0;h.SVGGraphics=m=class{constructor(a,h,d=!1){for(let g in(0,c.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new c.DOMSVGFactory,this.current=new T,this.transformMatrix=u.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=a,this.objs=h,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!d,this._operatorIdMapping=[],u.OPS)this._operatorIdMapping[u.OPS[g]]=g}getObject(a,h=null){return"string"==typeof a?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):h}save(){this.transformStack.push(this.transformMatrix);let a=this.current;this.extraStack.push(a),this.current=a.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(a){this.save(),this.executeOpTree(a),this.restore()}loadDependencies(a){let h=a.fnArray,d=a.argsArray;for(let a=0,c=h.length;a<c;a++)if(h[a]===u.OPS.dependency)for(let h of d[a]){let a=h.startsWith("g_")?this.commonObjs:this.objs,d=new Promise(d=>{a.get(h,d)});this.current.dependencies.push(d)}return Promise.all(this.current.dependencies)}transform(a,h,d,c,g,m){let b=[a,h,d,c,g,m];this.transformMatrix=u.Util.transform(this.transformMatrix,b),this.tgrp=null}getSVG(a,h){this.viewport=h;let d=this._initialize(h);return this.loadDependencies(a).then(()=>(this.transformMatrix=u.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(a)),d))}convertOpList(a){let h=this._operatorIdMapping,d=a.argsArray,c=a.fnArray,u=[];for(let a=0,g=c.length;a<g;a++){let g=c[a];u.push({fnId:g,fn:h[g],args:d[a]})}return b(u)}executeOpTree(a){for(let h of a){let a=h.fn,d=h.fnId,c=h.args;switch(0|d){case u.OPS.beginText:this.beginText();break;case u.OPS.dependency:break;case u.OPS.setLeading:this.setLeading(c);break;case u.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case u.OPS.setFont:this.setFont(c);break;case u.OPS.showText:case u.OPS.showSpacedText:this.showText(c[0]);break;case u.OPS.endText:this.endText();break;case u.OPS.moveText:this.moveText(c[0],c[1]);break;case u.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case u.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case u.OPS.setHScale:this.setHScale(c[0]);break;case u.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case u.OPS.setTextRise:this.setTextRise(c[0]);break;case u.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case u.OPS.setLineWidth:this.setLineWidth(c[0]);break;case u.OPS.setLineJoin:this.setLineJoin(c[0]);break;case u.OPS.setLineCap:this.setLineCap(c[0]);break;case u.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case u.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case u.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case u.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case u.OPS.setFillColorN:this.setFillColorN(c);break;case u.OPS.shadingFill:this.shadingFill(c[0]);break;case u.OPS.setDash:this.setDash(c[0],c[1]);break;case u.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case u.OPS.setFlatness:this.setFlatness(c[0]);break;case u.OPS.setGState:this.setGState(c[0]);break;case u.OPS.fill:this.fill();break;case u.OPS.eoFill:this.eoFill();break;case u.OPS.stroke:this.stroke();break;case u.OPS.fillStroke:this.fillStroke();break;case u.OPS.eoFillStroke:this.eoFillStroke();break;case u.OPS.clip:this.clip("nonzero");break;case u.OPS.eoClip:this.clip("evenodd");break;case u.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case u.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case u.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case u.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case u.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case u.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case u.OPS.closePath:this.closePath();break;case u.OPS.closeStroke:this.closeStroke();break;case u.OPS.closeFillStroke:this.closeFillStroke();break;case u.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case u.OPS.nextLine:this.nextLine();break;case u.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case u.OPS.constructPath:this.constructPath(c[0],c[1]);break;case u.OPS.endPath:this.endPath();break;case 92:this.group(h.items);break;default:(0,u.warn)(`Unimplemented operator ${a}`)}}}setWordSpacing(a){this.current.wordSpacing=a}setCharSpacing(a){this.current.charSpacing=a}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(a,h,d,c,u,g){let m=this.current;m.textMatrix=m.lineMatrix=[a,h,d,c,u,g],m.textMatrixScale=Math.hypot(a,h),m.x=m.lineX=0,m.y=m.lineY=0,m.xcoords=[],m.ycoords=[],m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${v(m.fontSize)}px`),m.tspan.setAttributeNS(null,"y",v(-m.y)),m.txtElement=this.svgFactory.createElement("svg:text"),m.txtElement.append(m.tspan)}beginText(){let a=this.current;a.x=a.lineX=0,a.y=a.lineY=0,a.textMatrix=u.IDENTITY_MATRIX,a.lineMatrix=u.IDENTITY_MATRIX,a.textMatrixScale=1,a.tspan=this.svgFactory.createElement("svg:tspan"),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtgrp=this.svgFactory.createElement("svg:g"),a.xcoords=[],a.ycoords=[]}moveText(a,h){let d=this.current;d.x=d.lineX+=a,d.y=d.lineY+=h,d.xcoords=[],d.ycoords=[],d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${v(d.fontSize)}px`),d.tspan.setAttributeNS(null,"y",v(-d.y))}showText(h){let c=this.current,g=c.font,m=c.fontSize;if(0===m)return;let b=c.fontSizeScale,A=c.charSpacing,_=c.wordSpacing,S=c.fontDirection,E=c.textHScale*S,C=g.vertical,T=C?1:-1,w=g.defaultVMetrics,R=m*c.fontMatrix[0],k=0;for(let a of h){let h,d,u;if(null===a){k+=S*_;continue}if("number"==typeof a){k+=T*a*m/1e3;continue}let v=(a.isSpace?_:0)+A,y=a.fontChar,E=a.width;if(C){let c;let u=a.vmetric||w;c=-(c=a.vmetric?u[1]:.5*E)*R;let g=u[2]*R;E=u?-u[0]:E,h=c/b,d=(k+g)/b}else h=k/b,d=0;(a.isInFont||g.missingFile)&&(c.xcoords.push(c.x+h),C&&c.ycoords.push(-c.y+d),c.tspan.textContent+=y),k+=u=C?E*R-v*S:E*R+v*S}c.tspan.setAttributeNS(null,"x",c.xcoords.map(v).join(" ")),C?c.tspan.setAttributeNS(null,"y",c.ycoords.map(v).join(" ")):c.tspan.setAttributeNS(null,"y",v(-c.y)),C?c.y-=k:c.x+=k*E,c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${v(c.fontSize)}px`),c.fontStyle!==a.fontStyle&&c.tspan.setAttributeNS(null,"font-style",c.fontStyle),c.fontWeight!==a.fontWeight&&c.tspan.setAttributeNS(null,"font-weight",c.fontWeight);let M=c.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;if(M===u.TextRenderingMode.FILL||M===u.TextRenderingMode.FILL_STROKE?(c.fillColor!==a.fillColor&&c.tspan.setAttributeNS(null,"fill",c.fillColor),c.fillAlpha<1&&c.tspan.setAttributeNS(null,"fill-opacity",c.fillAlpha)):c.textRenderingMode===u.TextRenderingMode.ADD_TO_PATH?c.tspan.setAttributeNS(null,"fill","transparent"):c.tspan.setAttributeNS(null,"fill","none"),M===u.TextRenderingMode.STROKE||M===u.TextRenderingMode.FILL_STROKE){let a=1/(c.textMatrixScale||1);this._setStrokeAttributes(c.tspan,a)}let F=c.textMatrix;0!==c.textRise&&(F=F.slice(),F[5]+=c.textRise),c.txtElement.setAttributeNS(null,"transform",`${y(F)} scale(${v(E)}, -1)`),c.txtElement.setAttributeNS(d,"xml:space","preserve"),c.txtElement.append(c.tspan),c.txtgrp.append(c.txtElement),this._ensureTransformGroup().append(c.txtElement)}setLeadingMoveText(a,h){this.setLeading(-h),this.moveText(a,h)}addFontStyle(a){if(!a.data)throw Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));let h=E(a.data,a.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${a.loadedName}"; src: url(${h}); }
`}setFont(a){let h=this.current,d=this.commonObjs.get(a[0]),c=a[1];h.font=d,!this.embedFonts||d.missingFile||this.embeddedFonts[d.loadedName]||(this.addFontStyle(d),this.embeddedFonts[d.loadedName]=d),h.fontMatrix=d.fontMatrix||u.FONT_IDENTITY_MATRIX;let g="normal";d.black?g="900":d.bold&&(g="bold");let m=d.italic?"italic":"normal";c<0?(c=-c,h.fontDirection=-1):h.fontDirection=1,h.fontSize=c,h.fontFamily=d.loadedName,h.fontWeight=g,h.fontStyle=m,h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"y",v(-h.y)),h.xcoords=[],h.ycoords=[]}endText(){let a=this.current;a.textRenderingMode&u.TextRenderingMode.ADD_TO_PATH_FLAG&&a.txtElement?.hasChildNodes()&&(a.element=a.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(a){a>0&&(this.current.lineWidth=a)}setLineCap(a){this.current.lineCap=_[a]}setLineJoin(a){this.current.lineJoin=S[a]}setMiterLimit(a){this.current.miterLimit=a}setStrokeAlpha(a){this.current.strokeAlpha=a}setStrokeRGBColor(a,h,d){this.current.strokeColor=u.Util.makeHexColor(a,h,d)}setFillAlpha(a){this.current.fillAlpha=a}setFillRGBColor(a,h,d){this.current.fillColor=u.Util.makeHexColor(a,h,d),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(a){this.current.strokeColor=this._makeColorN_Pattern(a)}setFillColorN(a){this.current.fillColor=this._makeColorN_Pattern(a)}shadingFill(a){let h=this.viewport.width,d=this.viewport.height,c=u.Util.inverseTransform(this.transformMatrix),g=u.Util.applyTransform([0,0],c),m=u.Util.applyTransform([0,d],c),b=u.Util.applyTransform([h,0],c),v=u.Util.applyTransform([h,d],c),y=Math.min(g[0],m[0],b[0],v[0]),A=Math.min(g[1],m[1],b[1],v[1]),_=Math.max(g[0],m[0],b[0],v[0]),S=Math.max(g[1],m[1],b[1],v[1]),E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x",y),E.setAttributeNS(null,"y",A),E.setAttributeNS(null,"width",_-y),E.setAttributeNS(null,"height",S-A),E.setAttributeNS(null,"fill",this._makeShadingPattern(a)),this.current.fillAlpha<1&&E.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(E)}_makeColorN_Pattern(a){return"TilingPattern"===a[0]?this._makeTilingPattern(a):this._makeShadingPattern(a)}_makeTilingPattern(a){let h=a[1],d=a[2],c=a[3]||u.IDENTITY_MATRIX,[g,m,b,v]=a[4],y=a[5],A=a[6],_=a[7],S=`shading${k++}`,[E,C,T,w]=u.Util.normalizeRect([...u.Util.applyTransform([g,m],c),...u.Util.applyTransform([b,v],c)]),[R,M]=u.Util.singularValueDecompose2dScale(c),F=y*R,O=A*M,I=this.svgFactory.createElement("svg:pattern");I.setAttributeNS(null,"id",S),I.setAttributeNS(null,"patternUnits","userSpaceOnUse"),I.setAttributeNS(null,"width",F),I.setAttributeNS(null,"height",O),I.setAttributeNS(null,"x",`${E}`),I.setAttributeNS(null,"y",`${C}`);let D=this.svg,L=this.transformMatrix,N=this.current.fillColor,j=this.current.strokeColor,B=this.svgFactory.create(T-E,w-C);if(this.svg=B,this.transformMatrix=c,2===_){let a=u.Util.makeHexColor(...h);this.current.fillColor=a,this.current.strokeColor=a}return this.executeOpTree(this.convertOpList(d)),this.svg=D,this.transformMatrix=L,this.current.fillColor=N,this.current.strokeColor=j,I.append(B.childNodes[0]),this.defs.append(I),`url(#${S})`}_makeShadingPattern(a){switch("string"==typeof a&&(a=this.objs.get(a)),a[0]){case"RadialAxial":let h;let d=`shading${k++}`,c=a[3];switch(a[1]){case"axial":let g=a[4],m=a[5];(h=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",d),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"x1",g[0]),h.setAttributeNS(null,"y1",g[1]),h.setAttributeNS(null,"x2",m[0]),h.setAttributeNS(null,"y2",m[1]);break;case"radial":let b=a[4],v=a[5],y=a[6],A=a[7];(h=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",d),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"cx",v[0]),h.setAttributeNS(null,"cy",v[1]),h.setAttributeNS(null,"r",A),h.setAttributeNS(null,"fx",b[0]),h.setAttributeNS(null,"fy",b[1]),h.setAttributeNS(null,"fr",y);break;default:throw Error(`Unknown RadialAxial type: ${a[1]}`)}for(let a of c){let d=this.svgFactory.createElement("svg:stop");d.setAttributeNS(null,"offset",a[0]),d.setAttributeNS(null,"stop-color",a[1]),h.append(d)}return this.defs.append(h),`url(#${d})`;case"Mesh":return(0,u.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw Error(`Unknown IR type: ${a[0]}`)}}setDash(a,h){this.current.dashArray=a,this.current.dashPhase=h}constructPath(a,h){let d=this.current,c=d.x,g=d.y,m=[],b=0;for(let d of a)switch(0|d){case u.OPS.rectangle:c=h[b++],g=h[b++];let a=h[b++],y=h[b++],A=c+a,_=g+y;m.push("M",v(c),v(g),"L",v(A),v(g),"L",v(A),v(_),"L",v(c),v(_),"Z");break;case u.OPS.moveTo:c=h[b++],g=h[b++],m.push("M",v(c),v(g));break;case u.OPS.lineTo:c=h[b++],g=h[b++],m.push("L",v(c),v(g));break;case u.OPS.curveTo:c=h[b+4],g=h[b+5],m.push("C",v(h[b]),v(h[b+1]),v(h[b+2]),v(h[b+3]),v(c),v(g)),b+=6;break;case u.OPS.curveTo2:m.push("C",v(c),v(g),v(h[b]),v(h[b+1]),v(h[b+2]),v(h[b+3])),c=h[b+2],g=h[b+3],b+=4;break;case u.OPS.curveTo3:c=h[b+2],g=h[b+3],m.push("C",v(h[b]),v(h[b+1]),v(c),v(g),v(c),v(g)),b+=4;break;case u.OPS.closePath:m.push("Z")}m=m.join(" "),d.path&&a.length>0&&a[0]!==u.OPS.rectangle&&a[0]!==u.OPS.moveTo?m=d.path.getAttributeNS(null,"d")+m:(d.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(d.path)),d.path.setAttributeNS(null,"d",m),d.path.setAttributeNS(null,"fill","none"),d.element=d.path,d.setCurrentPoint(c,g)}endPath(){let a=this.current;if(a.path=null,!this.pendingClip)return;if(!a.element){this.pendingClip=null;return}let h=`clippath${w++}`,d=this.svgFactory.createElement("svg:clipPath");d.setAttributeNS(null,"id",h),d.setAttributeNS(null,"transform",y(this.transformMatrix));let c=a.element.cloneNode(!0);if("evenodd"===this.pendingClip?c.setAttributeNS(null,"clip-rule","evenodd"):c.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,d.append(c),this.defs.append(d),a.activeClipUrl){for(let h of(a.clipGroup=null,this.extraStack))h.clipGroup=null;d.setAttributeNS(null,"clip-path",a.activeClipUrl)}a.activeClipUrl=`url(#${h})`,this.tgrp=null}clip(a){this.pendingClip=a}closePath(){let a=this.current;if(a.path){let h=`${a.path.getAttributeNS(null,"d")}Z`;a.path.setAttributeNS(null,"d",h)}}setLeading(a){this.current.leading=-a}setTextRise(a){this.current.textRise=a}setTextRenderingMode(a){this.current.textRenderingMode=a}setHScale(a){this.current.textHScale=a/100}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(let[h,d]of a)switch(h){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d);break;case"CA":this.setStrokeAlpha(d);break;case"ca":this.setFillAlpha(d);break;default:(0,u.warn)(`Unimplemented graphic state operator ${h}`)}}fill(){let a=this.current;a.element&&(a.element.setAttributeNS(null,"fill",a.fillColor),a.element.setAttributeNS(null,"fill-opacity",a.fillAlpha),this.endPath())}stroke(){let a=this.current;a.element&&(this._setStrokeAttributes(a.element),a.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(a,h=1){let d=this.current,c=d.dashArray;1!==h&&c.length>0&&(c=c.map(function(a){return h*a})),a.setAttributeNS(null,"stroke",d.strokeColor),a.setAttributeNS(null,"stroke-opacity",d.strokeAlpha),a.setAttributeNS(null,"stroke-miterlimit",v(d.miterLimit)),a.setAttributeNS(null,"stroke-linecap",d.lineCap),a.setAttributeNS(null,"stroke-linejoin",d.lineJoin),a.setAttributeNS(null,"stroke-width",v(h*d.lineWidth)+"px"),a.setAttributeNS(null,"stroke-dasharray",c.map(v).join(" ")),a.setAttributeNS(null,"stroke-dashoffset",v(h*d.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width","1px"),a.setAttributeNS(null,"height","1px"),a.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(a)}paintImageXObject(a){let h=this.getObject(a);if(!h){(0,u.warn)(`Dependent image with object ID ${a} is not ready yet`);return}this.paintInlineImageXObject(h)}paintInlineImageXObject(a,h){let d=a.width,c=a.height,u=C(a,this.forceDataSchema,!!h),g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width",v(d)),g.setAttributeNS(null,"height",v(c)),this.current.element=g,this.clip("nonzero");let m=this.svgFactory.createElement("svg:image");m.setAttributeNS(A,"xlink:href",u),m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y",v(-c)),m.setAttributeNS(null,"width",v(d)+"px"),m.setAttributeNS(null,"height",v(c)+"px"),m.setAttributeNS(null,"transform",`scale(${v(1/d)} ${v(-1/c)})`),h?h.append(m):this._ensureTransformGroup().append(m)}paintImageMaskXObject(a){let h=this.getObject(a.data,a);if(h.bitmap){(0,u.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}let d=this.current,c=h.width,g=h.height,m=d.fillColor;d.maskId=`mask${R++}`;let b=this.svgFactory.createElement("svg:mask");b.setAttributeNS(null,"id",d.maskId);let y=this.svgFactory.createElement("svg:rect");y.setAttributeNS(null,"x","0"),y.setAttributeNS(null,"y","0"),y.setAttributeNS(null,"width",v(c)),y.setAttributeNS(null,"height",v(g)),y.setAttributeNS(null,"fill",m),y.setAttributeNS(null,"mask",`url(#${d.maskId})`),this.defs.append(b),this._ensureTransformGroup().append(y),this.paintInlineImageXObject(h,b)}paintFormXObjectBegin(a,h){if(Array.isArray(a)&&6===a.length&&this.transform(a[0],a[1],a[2],a[3],a[4],a[5]),h){let a=h[2]-h[0],d=h[3]-h[1],c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",h[0]),c.setAttributeNS(null,"y",h[1]),c.setAttributeNS(null,"width",v(a)),c.setAttributeNS(null,"height",v(d)),this.current.element=c,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(a){let h=this.svgFactory.create(a.width,a.height),d=this.svgFactory.createElement("svg:defs");h.append(d),this.defs=d;let c=this.svgFactory.createElement("svg:g");return c.setAttributeNS(null,"transform",y(a.transform)),h.append(c),this.svg=c,h}_ensureClipGroup(){if(!this.current.clipGroup){let a=this.svgFactory.createElement("svg:g");a.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(a),this.current.clipGroup=a}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(a){var h=__webpack_module_cache__[a];if(void 0!==h)return h.exports;var d=__webpack_module_cache__[a]={exports:{}};return __webpack_modules__[a](d,d.exports,__w_pdfjs_require__),d.exports}var __nested_webpack_exports__={};return(()=>{var a=__nested_webpack_exports__;Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"AbortException",{enumerable:!0,get:function(){return h.AbortException}}),Object.defineProperty(a,"AnnotationEditorLayer",{enumerable:!0,get:function(){return g.AnnotationEditorLayer}}),Object.defineProperty(a,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return h.AnnotationEditorParamsType}}),Object.defineProperty(a,"AnnotationEditorType",{enumerable:!0,get:function(){return h.AnnotationEditorType}}),Object.defineProperty(a,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return m.AnnotationEditorUIManager}}),Object.defineProperty(a,"AnnotationLayer",{enumerable:!0,get:function(){return b.AnnotationLayer}}),Object.defineProperty(a,"AnnotationMode",{enumerable:!0,get:function(){return h.AnnotationMode}}),Object.defineProperty(a,"CMapCompressionType",{enumerable:!0,get:function(){return h.CMapCompressionType}}),Object.defineProperty(a,"FeatureTest",{enumerable:!0,get:function(){return h.FeatureTest}}),Object.defineProperty(a,"GlobalWorkerOptions",{enumerable:!0,get:function(){return v.GlobalWorkerOptions}}),Object.defineProperty(a,"InvalidPDFException",{enumerable:!0,get:function(){return h.InvalidPDFException}}),Object.defineProperty(a,"MissingPDFException",{enumerable:!0,get:function(){return h.MissingPDFException}}),Object.defineProperty(a,"OPS",{enumerable:!0,get:function(){return h.OPS}}),Object.defineProperty(a,"PDFDataRangeTransport",{enumerable:!0,get:function(){return d.PDFDataRangeTransport}}),Object.defineProperty(a,"PDFDateString",{enumerable:!0,get:function(){return c.PDFDateString}}),Object.defineProperty(a,"PDFWorker",{enumerable:!0,get:function(){return d.PDFWorker}}),Object.defineProperty(a,"PasswordResponses",{enumerable:!0,get:function(){return h.PasswordResponses}}),Object.defineProperty(a,"PermissionFlag",{enumerable:!0,get:function(){return h.PermissionFlag}}),Object.defineProperty(a,"PixelsPerInch",{enumerable:!0,get:function(){return c.PixelsPerInch}}),Object.defineProperty(a,"PromiseCapability",{enumerable:!0,get:function(){return h.PromiseCapability}}),Object.defineProperty(a,"RenderingCancelledException",{enumerable:!0,get:function(){return c.RenderingCancelledException}}),Object.defineProperty(a,"SVGGraphics",{enumerable:!0,get:function(){return y.SVGGraphics}}),Object.defineProperty(a,"UnexpectedResponseException",{enumerable:!0,get:function(){return h.UnexpectedResponseException}}),Object.defineProperty(a,"Util",{enumerable:!0,get:function(){return h.Util}}),Object.defineProperty(a,"VerbosityLevel",{enumerable:!0,get:function(){return h.VerbosityLevel}}),Object.defineProperty(a,"XfaLayer",{enumerable:!0,get:function(){return A.XfaLayer}}),Object.defineProperty(a,"build",{enumerable:!0,get:function(){return d.build}}),Object.defineProperty(a,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return h.createValidAbsoluteUrl}}),Object.defineProperty(a,"getDocument",{enumerable:!0,get:function(){return d.getDocument}}),Object.defineProperty(a,"getFilenameFromUrl",{enumerable:!0,get:function(){return c.getFilenameFromUrl}}),Object.defineProperty(a,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return c.getPdfFilenameFromUrl}}),Object.defineProperty(a,"getXfaPageViewport",{enumerable:!0,get:function(){return c.getXfaPageViewport}}),Object.defineProperty(a,"isDataScheme",{enumerable:!0,get:function(){return c.isDataScheme}}),Object.defineProperty(a,"isPdfFile",{enumerable:!0,get:function(){return c.isPdfFile}}),Object.defineProperty(a,"loadScript",{enumerable:!0,get:function(){return c.loadScript}}),Object.defineProperty(a,"normalizeUnicode",{enumerable:!0,get:function(){return h.normalizeUnicode}}),Object.defineProperty(a,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(a,"setLayerDimensions",{enumerable:!0,get:function(){return c.setLayerDimensions}}),Object.defineProperty(a,"shadow",{enumerable:!0,get:function(){return h.shadow}}),Object.defineProperty(a,"updateTextLayer",{enumerable:!0,get:function(){return u.updateTextLayer}}),Object.defineProperty(a,"version",{enumerable:!0,get:function(){return d.version}});var h=__w_pdfjs_require__(1),d=__w_pdfjs_require__(2),c=__w_pdfjs_require__(6),u=__w_pdfjs_require__(26),g=__w_pdfjs_require__(27),m=__w_pdfjs_require__(5),b=__w_pdfjs_require__(32),v=__w_pdfjs_require__(14),y=__w_pdfjs_require__(35),A=__w_pdfjs_require__(34)})(),__nested_webpack_exports__})())},8630:(a,h,d)=>{d(9408);var c,u=d(3729),g=function(a){return a&&"object"==typeof a&&"default"in a?a:{default:a}}(u);function m(a,h){for(var d=0;d<h.length;d++){var c=h[d];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}}function b(a,h,d){return h&&m(a.prototype,h),d&&m(a,d),a}var v="undefined"!=typeof process&&process.env&&!0,y=function(a){return"[object String]"===Object.prototype.toString.call(a)},A=function(){function a(a){var h=void 0===a?{}:a,d=h.name,c=void 0===d?"stylesheet":d,u=h.optimizeForSpeed,g=void 0===u?v:u;_(y(c),"`name` must be a string"),this._name=c,this._deletedRulePlaceholder="#"+c+"-deleted-rule____{}",_("boolean"==typeof g,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=g,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var m=!1;this._nonce=m?m.getAttribute("content"):null}var h=a.prototype;return h.setOptimizeForSpeed=function(a){_("boolean"==typeof a,"`setOptimizeForSpeed` accepts a boolean"),_(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=a,this.inject()},h.isOptimizeForSpeed=function(){return this._optimizeForSpeed},h.inject=function(){var a=this;_(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(h,d){return"number"==typeof d?a._serverSheet.cssRules[d]={cssText:h}:a._serverSheet.cssRules.push({cssText:h}),d},deleteRule:function(h){a._serverSheet.cssRules[h]=null}}},h.getSheetForTag=function(a){if(a.sheet)return a.sheet;for(var h=0;h<document.styleSheets.length;h++)if(document.styleSheets[h].ownerNode===a)return document.styleSheets[h]},h.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},h.insertRule=function(a,h){return _(y(a),"`insertRule` accepts only strings"),"number"!=typeof h&&(h=this._serverSheet.cssRules.length),this._serverSheet.insertRule(a,h),this._rulesCount++},h.replaceRule=function(a,h){this._optimizeForSpeed;var d=this._serverSheet;if(h.trim()||(h=this._deletedRulePlaceholder),!d.cssRules[a])return a;d.deleteRule(a);try{d.insertRule(h,a)}catch(c){v||console.warn("StyleSheet: illegal rule: \n\n"+h+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),d.insertRule(this._deletedRulePlaceholder,a)}return a},h.deleteRule=function(a){this._serverSheet.deleteRule(a)},h.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},h.cssRules=function(){return this._serverSheet.cssRules},h.makeStyleTag=function(a,h,d){h&&_(y(h),"makeStyleTag accepts only strings as second parameter");var c=document.createElement("style");this._nonce&&c.setAttribute("nonce",this._nonce),c.type="text/css",c.setAttribute("data-"+a,""),h&&c.appendChild(document.createTextNode(h));var u=document.head||document.getElementsByTagName("head")[0];return d?u.insertBefore(c,d):u.appendChild(c),c},b(a,[{key:"length",get:function(){return this._rulesCount}}]),a}();function _(a,h){if(!a)throw Error("StyleSheet: "+h+".")}var S=function(a){for(var h=5381,d=a.length;d;)h=33*h^a.charCodeAt(--d);return h>>>0},E=function(a){return a.replace(/\/style/gi,"\\/style")},C={};function T(a,h){if(!h)return"jsx-"+a;var d=String(h),c=a+d;return C[c]||(C[c]="jsx-"+S(a+"-"+d)),C[c]}function w(a,h){var d=/__jsx-style-dynamic-selector/g,c=a+(h=E(h));return C[c]||(C[c]=h.replace(d,a)),C[c]}function R(a,h){return void 0===h&&(h={}),a.map(function(a){var d=a[0],c=a[1];return g.default.createElement("style",{id:"__"+d,key:"__"+d,nonce:h.nonce?h.nonce:void 0,dangerouslySetInnerHTML:{__html:c}})})}var k=function(){function a(a){var h=void 0===a?{}:a,d=h.styleSheet,c=void 0===d?null:d,u=h.optimizeForSpeed,g=void 0!==u&&u;this._sheet=c||new A({name:"styled-jsx",optimizeForSpeed:g}),this._sheet.inject(),c&&"boolean"==typeof g&&(this._sheet.setOptimizeForSpeed(g),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var h=a.prototype;return h.add=function(a){var h=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(a.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed());var d=this.getIdAndRules(a),c=d.styleId,u=d.rules;if(c in this._instancesCounts){this._instancesCounts[c]+=1;return}var g=u.map(function(a){return h._sheet.insertRule(a)}).filter(function(a){return -1!==a});this._indices[c]=g,this._instancesCounts[c]=1},h.remove=function(a){var h=this,d=this.getIdAndRules(a).styleId;if(M(d in this._instancesCounts,"styleId: `"+d+"` not found"),this._instancesCounts[d]-=1,this._instancesCounts[d]<1){var c=this._fromServer&&this._fromServer[d];c?(c.parentNode.removeChild(c),delete this._fromServer[d]):(this._indices[d].forEach(function(a){return h._sheet.deleteRule(a)}),delete this._indices[d]),delete this._instancesCounts[d]}},h.update=function(a,h){this.add(h),this.remove(a)},h.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},h.cssRules=function(){var a=this,h=this._fromServer?Object.keys(this._fromServer).map(function(h){return[h,a._fromServer[h]]}):[],d=this._sheet.cssRules();return h.concat(Object.keys(this._indices).map(function(h){return[h,a._indices[h].map(function(a){return d[a].cssText}).join(a._optimizeForSpeed?"":"\n")]}).filter(function(a){return!!a[1]}))},h.styles=function(a){return R(this.cssRules(),a)},h.getIdAndRules=function(a){var h=a.children,d=a.dynamic,c=a.id;if(d){var u=T(c,d);return{styleId:u,rules:Array.isArray(h)?h.map(function(a){return w(u,a)}):[w(u,h)]}}return{styleId:T(c),rules:Array.isArray(h)?h:[h]}},h.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(a,h){return a[h.id.slice(2)]=h,a},{})},a}();function M(a,h){if(!a)throw Error("StyleSheetRegistry: "+h+".")}var F=u.createContext(null);function O(){return new k}function I(a){var h=a.registry,d=a.children,c=u.useContext(F),m=u.useState(function(){return c||h||O()})[0];return g.default.createElement(F.Provider,{value:m},d)}function D(){return u.useContext(F)}F.displayName="StyleSheetContext",g.default.useInsertionEffect||g.default.useLayoutEffect;var L=void 0;function N(a){var h=L||D();return h&&h.add(a),null}N.dynamic=function(a){return a.map(function(a){return T(a[0],a[1])}).join(" ")},c=I,c=O,h.style=N,c=D},7983:(a,h,d)=>{a.exports=d(8630).style},3932:(a,h,d)=>{"use strict";d.r(h),d.d(h,{default:()=>m});var c=d(2295);d(3729);var u=d(783),g=d.n(u);function m(){return c.jsx("main",{className:"min-h-screen flex items-center justify-center",children:(0,c.jsxs)("div",{className:"text-center p-8",children:[c.jsx("h1",{className:"text-6xl font-bold mb-4 gradient-text",children:"404"}),c.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Page Not Found"}),c.jsx("p",{className:"text-gray-300 mb-8",children:"The page you are looking for might have been removed or is temporarily unavailable."}),c.jsx(g(),{href:"/",className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Return Home"})]})})}},4293:(a,h,d)=>{"use strict";d.r(h),d.d(h,{default:()=>te});var c=d(2295),u=d(7983),g=d.n(u),m=d(3729);let b=d(5852);var v=d(7470),y=function(a,h,d){if(d||2==arguments.length)for(var c,u=0,g=h.length;u<g;u++)!c&&u in h||(c||(c=Array.prototype.slice.call(h,0,u)),c[u]=h[u]);return a.concat(c||Array.prototype.slice.call(h))},A=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],_=["onFocus","onBlur"],S=["onInput","onInvalid","onReset","onSubmit"],E=["onLoad","onError"],C=["onKeyDown","onKeyPress","onKeyUp"],T=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],w=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],R=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],k=["onSelect"],M=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],F=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],O=["onScroll"],I=["onWheel"],D=["onAnimationStart","onAnimationEnd","onAnimationIteration"],L=["onTransitionEnd"],N=["onToggle"],j=["onChange"],B=y(y(y(y(y(y(y(y(y(y(y(y(y(y(y(y(y(y([],["onCopy","onCut","onPaste"],!0),A,!0),_,!0),S,!0),E,!0),C,!0),T,!0),w,!0),R,!0),k,!0),M,!0),F,!0),O,!0),I,!0),D,!0),L,!0),j,!0),N,!0);function U(a,h){var d={};return B.forEach(function(c){var u=a[c];u&&(h?d[c]=function(a){return u(a,h(c))}:d[c]=u)}),d}function H(a){var h=!1;return{promise:new Promise(function(d,c){a.then(function(a){return!h&&d(a)}).catch(function(a){return!h&&c(a)})}),cancel:function(){h=!0}}}function G(a){var h,d,c="";if("string"==typeof a||"number"==typeof a)c+=a;else if("object"==typeof a){if(Array.isArray(a)){var u=a.length;for(h=0;h<u;h++)a[h]&&(d=G(a[h]))&&(c&&(c+=" "),c+=d)}else for(d in a)a[d]&&(c&&(c+=" "),c+=d)}return c}let q=function(){for(var a,h,d=0,c="",u=arguments.length;d<u;d++)(a=arguments[d])&&(h=G(a))&&(c&&(c+=" "),c+=h);return c};var z=!0,V="Invariant failed";function W(a,h){if(!a){if(z)throw Error(V);var d="function"==typeof h?h():h;throw Error(d?"".concat(V,": ").concat(d):V)}}var $=!0;let X=function(a,h){if(!$&&!a){var d="Warning: "+h;"undefined"!=typeof console&&console.warn(d);try{throw Error(d)}catch(a){}}},Y=(0,m.createContext)(null);function K({children:a,type:h}){return m.createElement("div",{className:`react-pdf__message react-pdf__message--${h}`},a)}let J="noopener noreferrer nofollow";class Q{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(a){this.pdfDocument=a}setViewer(a){this.pdfViewer=a}setExternalLinkRel(a){this.externalLinkRel=a}setExternalLinkTarget(a){this.externalLinkTarget=a}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return W(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(a){W(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=a}get rotation(){return 0}set rotation(a){}goToDestination(a){return new Promise(h=>{W(this.pdfDocument,"PDF document not loaded."),W(a,"Destination is not specified."),"string"==typeof a?this.pdfDocument.getDestination(a).then(h):Array.isArray(a)?h(a):a.then(h)}).then(a=>{W(Array.isArray(a),`"${a}" is not a valid destination array.`);let h=a[0];new Promise(a=>{W(this.pdfDocument,"PDF document not loaded."),h instanceof Object?this.pdfDocument.getPageIndex(h).then(h=>{a(h)}).catch(()=>{W(!1,`"${h}" is not a valid page reference.`)}):"number"==typeof h?a(h):W(!1,`"${h}" is not a valid destination reference.`)}).then(h=>{let d=h+1;W(this.pdfViewer,"PDF viewer is not initialized."),W(d>=1&&d<=this.pagesCount,`"${d}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:a,pageIndex:h,pageNumber:d})})})}navigateTo(a){this.goToDestination(a)}goToPage(a){let h=a-1;W(this.pdfViewer,"PDF viewer is not initialized."),W(a>=1&&a<=this.pagesCount,`"${a}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:h,pageNumber:a})}addLinkAttributes(a,h,d){a.href=h,a.rel=this.externalLinkRel||J,a.target=d?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}let Z={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},ee="undefined"!=typeof document,et=ee&&"file:"===window.location.protocol;function ei(a){return void 0!==a}function er(a){return ei(a)&&null!==a}function es(a){return"string"==typeof a}function en(a){return a instanceof ArrayBuffer}function ea(a){return W(ee,"isBlob can only be used in a browser environment"),a instanceof Blob}function eo(a){return es(a)&&/^data:/.test(a)}function el(a){W(eo(a),"Invalid data URI.");let[h="",d=""]=a.split(",");return -1!==h.split(";").indexOf("base64")?atob(d):unescape(d)}function eh(){return ee&&window.devicePixelRatio||1}let ed="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function ec(){X(!et,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${ed}`)}function eu(a){a&&a.cancel&&a.cancel()}function ep(a,h){return Object.defineProperty(a,"width",{get(){return this.view[2]*h},configurable:!0}),Object.defineProperty(a,"height",{get(){return this.view[3]*h},configurable:!0}),Object.defineProperty(a,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(a,"originalHeight",{get(){return this.view[3]},configurable:!0}),a}function ef(a){return"RenderingCancelledException"===a.name}function eg(a){return new Promise((h,d)=>{let c=new FileReader;c.onload=()=>{if(!c.result)return d(Error("Error while reading a file."));h(c.result)},c.onerror=a=>{if(!a.target)return d(Error("Error while reading a file."));let{error:h}=a.target;if(!h)return d(Error("Error while reading a file."));switch(h.code){case h.NOT_FOUND_ERR:return d(Error("Error while reading a file: File not found."));case h.SECURITY_ERR:return d(Error("Error while reading a file: Security error."));case h.ABORT_ERR:return d(Error("Error while reading a file: Aborted."));default:return d(Error("Error while reading a file."))}},c.readAsArrayBuffer(a)})}function em(a,h){switch(h.type){case"RESOLVE":return{value:h.value,error:void 0};case"REJECT":return{value:!1,error:h.error};case"RESET":return{value:void 0,error:void 0};default:return a}}function eb(){return(0,m.useReducer)(em,{value:void 0,error:void 0})}let{PDFDataRangeTransport:ev}=b,ey=(()=>{let a={};return B.forEach(h=>{a[h]=v.func}),a})(),eA=v.oneOfType([v.instanceOf(Int8Array),v.instanceOf(Uint8Array),v.instanceOf(Uint8ClampedArray),v.instanceOf(Int16Array),v.instanceOf(Uint16Array),v.instanceOf(Int32Array),v.instanceOf(Uint32Array),v.instanceOf(Float32Array),v.instanceOf(Float64Array)]),e_=[v.string,v.instanceOf(ArrayBuffer),v.shape({data:v.oneOfType([v.string,v.instanceOf(ArrayBuffer),v.arrayOf(v.number.isRequired),eA]).isRequired}),v.shape({range:v.instanceOf(ev).isRequired}),v.shape({url:v.string.isRequired})];"undefined"!=typeof Blob&&e_.push(v.instanceOf(Blob));let eS=v.oneOfType([v.string,v.arrayOf(v.string)]),ex=v.oneOfType(e_);v.instanceOf(Q),v.oneOf(["_self","_blank","_parent","_top"]),v.shape({commonObjs:v.shape({}).isRequired,getAnnotations:v.func.isRequired,getTextContent:v.func.isRequired,getViewport:v.func.isRequired,render:v.func.isRequired});let eE=function(a,h,d){let{[h]:c,pageNumber:u,pdf:g}=a;if(!ei(g))return null;if(ei(c)){if("number"!=typeof c)return Error(`\`${h}\` of type \`${typeof c}\` supplied to \`${d}\`, expected \`number\`.`);if(c<0)return Error(`Expected \`${h}\` to be greater or equal to 0.`);let{numPages:a}=g;if(c+1>a)return Error(`Expected \`${h}\` to be less or equal to ${a-1}.`)}else if(!ei(u))return Error(`\`${h}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${d}\`.`);return null},eC=function(a,h,d){let{[h]:c,pageIndex:u,pdf:g}=a;if(!ei(g))return null;if(ei(c)){if("number"!=typeof c)return Error(`\`${h}\` of type \`${typeof c}\` supplied to \`${d}\`, expected \`number\`.`);if(c<1)return Error(`Expected \`${h}\` to be greater or equal to 1.`);let{numPages:a}=g;if(c>a)return Error(`Expected \`${h}\` to be less or equal to ${a}.`)}else if(!ei(u))return Error(`\`${h}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${d}\`.`);return null},eT=v.oneOfType([v.any,v.oneOf([!1])]),eP=v.oneOfType([v.func,v.exact({current:v.any})]),ew=v.oneOf(["canvas","custom","none","svg"]),eR=v.oneOf([0,90,180,270]);var ek=function(a,h,d,c){function u(a){return a instanceof d?a:new d(function(h){h(a)})}return new(d||(d=Promise))(function(d,g){function m(a){try{v(c.next(a))}catch(a){g(a)}}function b(a){try{v(c.throw(a))}catch(a){g(a)}}function v(a){a.done?d(a.value):u(a.value).then(m,b)}v((c=c.apply(a,h||[])).next())})},eM=function(a,h){var d={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&0>h.indexOf(c)&&(d[c]=a[c]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var u=0,c=Object.getOwnPropertySymbols(a);u<c.length;u++)0>h.indexOf(c[u])&&Object.prototype.propertyIsEnumerable.call(a,c[u])&&(d[c[u]]=a[c[u]]);return d};let{PDFDataRangeTransport:eF}=b,eO=(a,h)=>{switch(h){case Z.NEED_PASSWORD:a(prompt("Enter the password to open this PDF file."));break;case Z.INCORRECT_PASSWORD:a(prompt("Invalid password. Please try again."))}},eI=(0,m.forwardRef)(function(a,h){var{children:d,className:c,error:u="Failed to load PDF file.",externalLinkRel:g,externalLinkTarget:v,file:y,inputRef:A,imageResourcesPath:_,loading:S="Loading PDF…",noData:E="No PDF file specified.",onItemClick:C,onLoadError:T,onLoadProgress:w,onLoadSuccess:R,onPassword:k=eO,onSourceError:M,onSourceSuccess:F,options:O,renderMode:I,rotate:D}=a,L=eM(a,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);let[N,j]=eb(),{value:B,error:G}=N,[z,V]=eb(),{value:$,error:J}=z,Z=(0,m.useRef)(new Q),et=(0,m.useRef)([]),ei=(0,m.useRef)({scrollPageIntoView:a=>{let{dest:h,pageNumber:d,pageIndex:c=d-1}=a;if(C){C({dest:h,pageIndex:c,pageNumber:d});return}let u=et.current[c];if(u){u.scrollIntoView();return}X(!1,`An internal link leading to page ${d} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});function er(){F&&F()}function es(){G&&(X(!1,G.toString()),M&&M(G))}function eh(){j({type:"RESET"})}(0,m.useImperativeHandle)(h,()=>({linkService:Z,pages:et,viewer:ei}),[]),(0,m.useEffect)(eh,[y,j]);let ed=(0,m.useCallback)(()=>ek(this,void 0,void 0,function*(){if(!y)return null;if("string"==typeof y)return eo(y)?{data:el(y)}:(ec(),{url:y});if(y instanceof eF)return{range:y};if(en(y))return{data:y};if(ee&&ea(y))return{data:yield eg(y)};if(W("object"==typeof y,"Invalid parameter in file, need either Uint8Array, string or a parameter object"),W("data"in y||"range"in y||"url"in y,"Invalid parameter object: need either .data, .range or .url"),"url"in y&&"string"==typeof y.url){if(eo(y.url)){let{url:a}=y,h=eM(y,["url"]);return Object.assign({data:el(a)},h)}ec()}return y}),[y]);function ep(){$&&(R&&R($),et.current=Array($.numPages),Z.current.setDocument($))}function ef(){J&&(X(!1,J.toString()),T&&T(J))}function em(){V({type:"RESET"})}function ev(){if(!B)return;let a=O?Object.assign(Object.assign({},B),O):B,h=b.getDocument(a);w&&(h.onProgress=w),k&&(h.onPassword=k);let d=h;return d.promise.then(a=>{V({type:"RESOLVE",value:a})}).catch(a=>{d.destroyed||V({type:"REJECT",error:a})}),()=>{d.destroy()}}function ey(){Z.current.setViewer(ei.current),Z.current.setExternalLinkRel(g),Z.current.setExternalLinkTarget(v)}function eA(a,h){et.current[a]=h}function e_(a){delete et.current[a]}(0,m.useEffect)(()=>{let a=H(ed());return a.promise.then(a=>{j({type:"RESOLVE",value:a})}).catch(a=>{j({type:"REJECT",error:a})}),()=>{eu(a)}},[ed,j]),(0,m.useEffect)(()=>{if(void 0!==B){if(!1===B){es();return}er()}},[B]),(0,m.useEffect)(em,[V,B]),(0,m.useEffect)(ev,[O,V,B]),(0,m.useEffect)(()=>{if(void 0!==$){if(!1===$){ef();return}ep()}},[$]),(0,m.useEffect)(ey,[g,v]);let eS=(0,m.useMemo)(()=>({imageResourcesPath:_,linkService:Z.current,onItemClick:C,pdf:$,registerPage:eA,renderMode:I,rotate:D,unregisterPage:e_}),[_,C,$,I,D]),ex=(0,m.useMemo)(()=>U(L,()=>$),[L,$]);function eE(){return m.createElement(Y.Provider,{value:eS},d)}function eC(){return y?null==$?m.createElement(K,{type:"loading"},"function"==typeof S?S():S):!1===$?m.createElement(K,{type:"error"},"function"==typeof u?u():u):eE():m.createElement(K,{type:"no-data"},"function"==typeof E?E():E)}return m.createElement("div",Object.assign({className:q("react-pdf__Document",c),ref:A,style:{"--scale-factor":"1"}},ex),eC())}),eD=v.oneOfType([v.func,v.node]);eI.propTypes=Object.assign(Object.assign({},ey),{children:v.node,className:eS,error:eD,externalLinkRel:v.string,externalLinkTarget:v.oneOf(["_self","_blank","_parent","_top"]),file:ex,imageResourcesPath:v.string,inputRef:eP,loading:eD,noData:eD,onItemClick:v.func,onLoadError:v.func,onLoadProgress:v.func,onLoadSuccess:v.func,onPassword:v.func,onSourceError:v.func,onSourceSuccess:v.func,options:v.shape({canvasFactory:v.any,canvasMaxAreaInBytes:v.number,cMapPacked:v.bool,CMapReaderFactory:v.any,cMapUrl:v.string,disableAutoFetch:v.bool,disableFontFace:v.bool,disableRange:v.bool,disableStream:v.bool,docBaseUrl:v.string,enableXfa:v.bool,filterFactory:v.any,fontExtraProperties:v.bool,httpHeaders:v.object,isEvalSupported:v.bool,isOffscreenCanvasSupported:v.bool,length:v.number,maxImageSize:v.number,ownerDocument:v.any,password:v.string,pdfBug:v.bool,rangeChunkSize:v.number,StandardFontDataFactory:v.any,standardFontDataUrl:v.string,stopAtErrors:v.bool,useSystemFonts:v.bool,useWorkerFetch:v.bool,verbosity:v.number,withCredentials:v.bool,worker:v.any}),rotate:v.number});let eL=eI;function eN(){for(var a=[],h=0;h<arguments.length;h++)a[h]=arguments[h];var d=a.filter(Boolean);return d.length<=1?d[0]||null:function(a){d.forEach(function(h){"function"==typeof h?h(a):h&&(h.current=a)})}}let ej=(0,m.createContext)(null),eB={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},eU=/^H(\d+)$/;function eH(a){return a in eB}function eG(a){return"children"in a}function eq(a){return!!eG(a)&&1===a.children.length&&0 in a.children&&"id"in a.children[0]}function ez(a){let h={};if(eG(a)){let{role:d}=a,c=d.match(eU);if(c)h.role="heading",h["aria-level"]=Number(c[1]);else if(eH(d)){let a=eB[d];a&&(h.role=a)}}return h}function eV(a){let h={};if(eG(a)){if(void 0!==a.alt&&(h["aria-label"]=a.alt),void 0!==a.lang&&(h.lang=a.lang),eq(a)){let[d]=a.children;if(d){let a=eV(d);return Object.assign(Object.assign({},h),a)}}}else"id"in a&&(h["aria-owns"]=a.id);return h}function eW(a){return a?Object.assign(Object.assign({},ez(a)),eV(a)):null}function e$({className:a,node:h}){let d=(0,m.useMemo)(()=>eW(h),[h]),c=(0,m.useMemo)(()=>!eG(h)||eq(h)?null:h.children.map((a,h)=>m.createElement(e$,{key:h,node:a})),[h]);return m.createElement("span",Object.assign({className:a},d),c)}function eX(){return(0,m.useContext)(ej)}function eY(){let a=eX();W(a,"Unable to find Page context.");let{onGetStructTreeError:h,onGetStructTreeSuccess:d}=a,[c,u]=eb(),{value:g,error:b}=c,{customTextRenderer:v,page:y}=a;function A(){g&&d&&d(g)}function _(){b&&(X(!1,b.toString()),h&&h(b))}function S(){u({type:"RESET"})}function E(){if(v||!y)return;let a=H(y.getStructTree()),h=a;return a.promise.then(a=>{u({type:"RESOLVE",value:a})}).catch(a=>{u({type:"REJECT",error:a})}),()=>eu(h)}return((0,m.useEffect)(S,[u,y]),(0,m.useEffect)(E,[v,y,u]),(0,m.useEffect)(()=>{if(void 0!==g){if(!1===g){_();return}A()}},[g]),g)?m.createElement(e$,{className:"react-pdf__Page__structTree structTree",node:g}):null}let eK=b.AnnotationMode;function eJ(a){let h=eX();W(h,"Unable to find Page context.");let{_className:d,canvasBackground:c,devicePixelRatio:u=eh(),onRenderError:g,onRenderSuccess:b,page:v,renderForms:y,renderTextLayer:A,rotate:_,scale:S}=Object.assign(Object.assign({},h),a),{canvasRef:E}=a;W(v,"Attempted to render page canvas, but no page was specified.");let C=(0,m.useRef)(null);function T(){v&&b&&b(ep(v,S))}function w(a){!ef(a)&&(X(!1,a.toString()),g&&g(a))}let R=(0,m.useMemo)(()=>v.getViewport({scale:S*u,rotation:_}),[u,v,_,S]),k=(0,m.useMemo)(()=>v.getViewport({scale:S,rotation:_}),[v,_,S]);function M(){if(!v)return;v.cleanup();let{current:a}=C;if(!a)return;a.width=R.width,a.height=R.height,a.style.width=`${Math.floor(k.width)}px`,a.style.height=`${Math.floor(k.height)}px`,a.style.visibility="hidden";let h={annotationMode:y?eK.ENABLE_FORMS:eK.ENABLE,canvasContext:a.getContext("2d",{alpha:!1}),viewport:R};c&&(h.background=c);let d=v.render(h),u=d;return d.promise.then(()=>{a.style.visibility="",T()}).catch(w),()=>eu(u)}(0,m.useEffect)(M,[c,C,u,v,y,R,k]);let F=(0,m.useCallback)(()=>{let{current:a}=C;a&&(a.width=0,a.height=0)},[C]);return(0,m.useEffect)(()=>F,[F]),m.createElement("canvas",{className:`${d}__canvas`,dir:"ltr",ref:eN(E,C),style:{display:"block",userSelect:"none"}},A?m.createElement(eY,null):null)}function eQ(){let a=eX();W(a,"Unable to find Page context.");let{_className:h,onRenderSuccess:d,onRenderError:c,page:u,rotate:g,scale:v}=a;W(u,"Attempted to render page SVG, but no page was specified.");let[y,A]=eb(),{value:_,error:S}=y;function E(){u&&d&&d(ep(u,v))}function C(){!(!S||ef(S))&&(X(!1,S.toString()),c&&c(S))}let T=(0,m.useMemo)(()=>u.getViewport({scale:v,rotation:g}),[u,g,v]);function w(){A({type:"RESET"})}function R(){if(!u)return;let a=H(u.getOperatorList());return a.promise.then(a=>{new b.SVGGraphics(u.commonObjs,u.objs).getSVG(a,T).then(a=>{A({type:"RESOLVE",value:a})}).catch(a=>{A({type:"REJECT",error:a})})}).catch(a=>{A({type:"REJECT",error:a})}),()=>eu(a)}function k(a){if(!a||!_)return;a.firstElementChild||a.appendChild(_);let{width:h,height:d}=T;_.setAttribute("width",`${h}`),_.setAttribute("height",`${d}`)}(0,m.useEffect)(w,[u,A,T]),(0,m.useEffect)(R,[u,A,T]),(0,m.useEffect)(()=>{if(void 0!==_){if(!1===_){C();return}E()}},[_]);let{width:M,height:F}=T;return m.createElement("div",{className:`${h}__svg`,ref:a=>k(a),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:M,height:F,userSelect:"none"}})}function eZ(a){return"str"in a}function e0(){let a=eX();W(a,"Unable to find Page context.");let{customTextRenderer:h,onGetTextError:d,onGetTextSuccess:c,onRenderTextLayerError:u,onRenderTextLayerSuccess:g,page:v,pageIndex:y,pageNumber:A,rotate:_,scale:S}=a;W(v,"Attempted to load page text content, but no page was specified.");let[E,C]=eb(),{value:T,error:w}=E,R=(0,m.useRef)(null),k=(0,m.useRef)();function M(){T&&c&&c(T)}function F(){w&&(X(!1,w.toString()),d&&d(w))}function O(){C({type:"RESET"})}function I(){if(!v)return;let a=H(v.getTextContent()),h=a;return a.promise.then(a=>{C({type:"RESOLVE",value:a})}).catch(a=>{C({type:"REJECT",error:a})}),()=>eu(h)}X(1===parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,m.useEffect)(O,[v,C]),(0,m.useEffect)(I,[v,C]),(0,m.useEffect)(()=>{if(void 0!==T){if(!1===T){F();return}M()}},[T]);let D=(0,m.useCallback)(()=>{g&&g()},[g]),L=(0,m.useCallback)(a=>{X(!1,a.toString()),u&&u(a)},[u]);function N(){let a=k.current;a&&a.classList.add("active")}function j(){let a=k.current;a&&a.classList.remove("active")}let B=(0,m.useMemo)(()=>v.getViewport({scale:S,rotation:_}),[v,_,S]);function U(){if(!v||!T)return;let{current:a}=R;if(!a)return;a.innerHTML="";let d={container:a,textContentSource:v.streamTextContent({includeMarkedContent:!0}),viewport:B},c=b.renderTextLayer(d),u=c;return c.promise.then(()=>{let d=document.createElement("div");d.className="endOfContent",a.append(d),k.current=d;let c=a.querySelector(".markedContent")?a.querySelectorAll(".markedContent > *:not(.markedContent"):a.children;if(h){let a=0;T.items.forEach((d,u)=>{if(!eZ(d))return;let g=c[a];if(!g)return;let m=h(Object.assign({pageIndex:y,pageNumber:A,itemIndex:u},d));g.innerHTML=m,a+=d.str&&d.hasEOL?2:1})}D()}).catch(L),()=>eu(u)}return(0,m.useLayoutEffect)(U,[h,L,D,v,y,A,T,B]),m.createElement("div",{className:q("react-pdf__Page__textContent","textLayer"),onMouseUp:j,onMouseDown:N,ref:R})}function e2(){return(0,m.useContext)(Y)}function e3(){let a=e2();W(a,"Unable to find Document context. Did you wrap <Page /> in <Document />?");let h=eX();W(h,"Unable to find Page context.");let{imageResourcesPath:d,linkService:c,onGetAnnotationsError:u,onGetAnnotationsSuccess:g,onRenderAnnotationLayerError:v,onRenderAnnotationLayerSuccess:y,page:A,pdf:_,renderForms:S,rotate:E,scale:C=1}=Object.assign(Object.assign({},a),h);W(A,"Attempted to load page annotations, but no page was specified.");let[T,w]=eb(),{value:R,error:k}=T,M=(0,m.useRef)(null);function F(){R&&g&&g(R)}function O(){k&&(X(!1,k.toString()),u&&u(k))}function I(){w({type:"RESET"})}function D(){if(!A)return;let a=H(A.getAnnotations()),h=a;return a.promise.then(a=>{w({type:"RESOLVE",value:a})}).catch(a=>{w({type:"REJECT",error:a})}),()=>{eu(h)}}function L(){y&&y()}function N(a){X(!1,`${a}`),v&&v(a)}X(1===parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,m.useEffect)(I,[w,A]),(0,m.useEffect)(D,[w,A,S]),(0,m.useEffect)(()=>{if(void 0!==R){if(!1===R){O();return}F()}},[R]);let j=(0,m.useMemo)(()=>A.getViewport({scale:C,rotation:E}),[A,E,C]);function B(){if(!_||!A||!R)return;let{current:a}=M;if(!a)return;let h=j.clone({dontFlip:!0}),u={annotations:R,annotationStorage:_.annotationStorage,div:a,downloadManager:null,imageResourcesPath:d,linkService:c,page:A,renderForms:S,viewport:h};a.innerHTML="";try{b.AnnotationLayer.render(u),L()}catch(a){N(a)}return()=>{}}return(0,m.useEffect)(B,[R,d,c,A,S,j]),m.createElement("div",{className:q("react-pdf__Page__annotations","annotationLayer"),ref:M})}var e5=function(a,h){var d={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&0>h.indexOf(c)&&(d[c]=a[c]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var u=0,c=Object.getOwnPropertySymbols(a);u<c.length;u++)0>h.indexOf(c[u])&&Object.prototype.propertyIsEnumerable.call(a,c[u])&&(d[c[u]]=a[c[u]]);return d};let e8=1,e4=function(a){let h=e2();W(h,"Unable to find Document context. Did you wrap <Page /> in <Document />?");let d=Object.assign(Object.assign({},h),a),{_className:c="react-pdf__Page",_enableRegisterUnregisterPage:u=!0,canvasBackground:g,canvasRef:b,children:v,className:y,customRenderer:A,customTextRenderer:_,devicePixelRatio:S,error:E="Failed to load the page.",height:C,inputRef:T,loading:w="Loading page…",noData:R="No page specified.",onGetAnnotationsError:k,onGetAnnotationsSuccess:M,onGetStructTreeError:F,onGetStructTreeSuccess:O,onGetTextError:I,onGetTextSuccess:D,onLoadError:L,onLoadSuccess:N,onRenderAnnotationLayerError:j,onRenderAnnotationLayerSuccess:B,onRenderError:G,onRenderSuccess:z,onRenderTextLayerError:V,onRenderTextLayerSuccess:$,pageIndex:Y,pageNumber:J,pdf:Q,registerPage:Z,renderAnnotationLayer:ee=!0,renderForms:et=!1,renderMode:ei="canvas",renderTextLayer:es=!0,rotate:en,scale:ea=e8,unregisterPage:eo,width:el}=d,eh=e5(d,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[ed,ec]=eb(),{value:ef,error:eg}=ed,em=(0,m.useRef)(null);W(Q,"Attempted to load a page, but no document was specified.");let ev=er(J)?J-1:null!=Y?Y:null,ey=null!=J?J:er(Y)?Y+1:null,eA=null!=en?en:ef?ef.rotate:null,e_=(0,m.useMemo)(()=>{if(!ef)return null;let a=1,h=null!=ea?ea:e8;if(el||C){let h=ef.getViewport({scale:1,rotation:eA});el?a=el/h.width:C&&(a=C/h.height)}return h*a},[C,ef,eA,ea,el]);function eS(){return()=>{er(ev)&&u&&eo&&eo(ev)}}function ex(){if(N){if(!ef||!e_)return;N(ep(ef,e_))}if(u&&Z){if(!er(ev)||!em.current)return;Z(ev,em.current)}}function eE(){eg&&(X(!1,eg.toString()),L&&L(eg))}function eC(){ec({type:"RESET"})}function eT(){if(!Q||!ey)return;let a=H(Q.getPage(ey)),h=a;return a.promise.then(a=>{ec({type:"RESOLVE",value:a})}).catch(a=>{ec({type:"REJECT",error:a})}),()=>eu(h)}(0,m.useEffect)(eS,[u,Q,ev,eo]),(0,m.useEffect)(eC,[ec,Q,ev]),(0,m.useEffect)(eT,[ec,Q,ev,ey,Z]),(0,m.useEffect)(()=>{if(void 0!==ef){if(!1===ef){eE();return}ex()}},[ef,e_]);let eP=(0,m.useMemo)(()=>ef&&er(ev)&&ey&&er(eA)&&er(e_)?{_className:c,canvasBackground:g,customTextRenderer:_,devicePixelRatio:S,onGetAnnotationsError:k,onGetAnnotationsSuccess:M,onGetStructTreeError:F,onGetStructTreeSuccess:O,onGetTextError:I,onGetTextSuccess:D,onRenderAnnotationLayerError:j,onRenderAnnotationLayerSuccess:B,onRenderError:G,onRenderSuccess:z,onRenderTextLayerError:V,onRenderTextLayerSuccess:$,page:ef,pageIndex:ev,pageNumber:ey,renderForms:et,renderTextLayer:es,rotate:eA,scale:e_}:null,[c,g,_,S,k,M,F,O,I,D,j,B,G,z,V,$,ef,ev,ey,et,es,eA,e_]),ew=(0,m.useMemo)(()=>U(eh,()=>ef?e_?ep(ef,e_):void 0:ef),[eh,ef,e_]),eR=`${ev}@${e_}/${eA}`,ek=`${ev}/${eA}`;function eM(){switch(ei){case"custom":return W(A,'renderMode was set to "custom", but no customRenderer was passed.'),m.createElement(A,{key:`${eR}_custom`});case"none":return null;case"svg":return m.createElement(eQ,{key:`${ek}_svg`});default:return m.createElement(eJ,{key:`${eR}_canvas`,canvasRef:b})}}function eF(){return es?m.createElement(e0,{key:`${eR}_text`}):null}function eO(){return ee?m.createElement(e3,{key:`${eR}_annotations`}):null}function eI(){return m.createElement(ej.Provider,{value:eP},eM(),eF(),eO(),v)}function eD(){return ey?null===Q||null==ef?m.createElement(K,{type:"loading"},"function"==typeof w?w():w):!1===Q||!1===ef?m.createElement(K,{type:"error"},"function"==typeof E?E():E):eI():m.createElement(K,{type:"no-data"},"function"==typeof R?R():R)}return m.createElement("div",Object.assign({className:q(c,y),"data-page-number":ey,ref:eN(T,em),style:{"--scale-factor":`${e_}`,backgroundColor:g||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},ew),eD())},e6=v.oneOfType([v.func,v.node]);e4.propTypes=Object.assign(Object.assign({},ey),{canvasBackground:v.string,canvasRef:eP,children:v.node,className:eS,customRenderer:v.func,customTextRenderer:v.func,devicePixelRatio:v.number,error:e6,height:v.number,imageResourcesPath:v.string,inputRef:eP,loading:e6,noData:e6,onGetTextError:v.func,onGetTextSuccess:v.func,onLoadError:v.func,onLoadSuccess:v.func,onRenderError:v.func,onRenderSuccess:v.func,onRenderTextLayerError:v.func,onRenderTextLayerSuccess:v.func,pageIndex:eE,pageNumber:eC,pdf:eT,renderAnnotationLayer:v.bool,renderForms:v.bool,renderMode:ew,renderTextLayer:v.bool,rotate:eR,scale:v.number,width:v.number});let e7=e4;d(9060),d(8801),b.GlobalWorkerOptions.workerSrc="/pdf.worker.min.js";let e9=({pdfUrl:a})=>{let[h,d]=(0,m.useState)(0),[u,b]=(0,m.useState)(1);function v({numPages:a}){d(a)}return(0,c.jsxs)("div",{className:"jsx-e36719410cb68058 pdf-viewer",children:[c.jsx(eL,{file:a,onLoadSuccess:v,options:{cMapUrl:"https://cdn.jsdelivr.net/npm/pdfjs-dist@3.4.120/cmaps/",cMapPacked:!0},children:c.jsx(e7,{pageNumber:u,renderTextLayer:!1,renderAnnotationLayer:!1})}),(0,c.jsxs)("div",{className:"jsx-e36719410cb68058 pdf-controls",children:[c.jsx("button",{onClick:()=>b(a=>Math.max(1,a-1)),disabled:u<=1,className:"jsx-e36719410cb68058",children:"Previous"}),(0,c.jsxs)("span",{className:"jsx-e36719410cb68058",children:["Page ",u," of ",h]}),c.jsx("button",{onClick:()=>b(a=>Math.min(h,a+1)),disabled:u>=h,className:"jsx-e36719410cb68058",children:"Next"})]}),c.jsx(g(),{id:"e36719410cb68058",children:".pdf-viewer.jsx-e36719410cb68058{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%;max-width:800px;margin:0 auto}.pdf-controls.jsx-e36719410cb68058{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:1rem;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-top:1rem}button.jsx-e36719410cb68058{padding:.5rem 1rem;background:#0070f3;color:white;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer}button.jsx-e36719410cb68058:disabled{background:#ccc;cursor:not-allowed}"})]})},te=()=>(0,c.jsxs)("div",{className:"jsx-32806f238afa3d0b research-container",children:[c.jsx("h1",{className:"jsx-32806f238afa3d0b",children:"Research Papers"}),(0,c.jsxs)("section",{className:"jsx-32806f238afa3d0b paper-section",children:[c.jsx("h2",{className:"jsx-32806f238afa3d0b",children:"AI Agent Systems"}),c.jsx(e9,{pdfUrl:"/ai-research-sc-analytics-v2/pdfs/ai-agent-systems.pdf"})]}),(0,c.jsxs)("section",{className:"jsx-32806f238afa3d0b paper-section",children:[c.jsx("h2",{className:"jsx-32806f238afa3d0b",children:"Open Interpreter"}),c.jsx(e9,{pdfUrl:"/ai-research-sc-analytics-v2/pdfs/open-interpreter.pdf"})]}),c.jsx(g(),{id:"32806f238afa3d0b",children:".research-container.jsx-32806f238afa3d0b{padding:2rem;max-width:1200px;margin:0 auto}h1.jsx-32806f238afa3d0b{text-align:center;margin-bottom:2rem}.paper-section.jsx-32806f238afa3d0b{margin-bottom:4rem}h2.jsx-32806f238afa3d0b{margin-bottom:1rem}"})]})},1342:(a,h,d)=>{"use strict";d.r(h),d.d(h,{default:()=>y,metadata:()=>v});var c=d(5036),u=d(3640),g=d.n(u);d(5023);var m=d(646),b=d.n(m);let v={title:"AI Research & Supply Chain Analytics Portfolio",description:"Showcasing research papers and supply chain analytics projects"};function y({children:a}){return c.jsx("html",{lang:"en",className:g().className,children:(0,c.jsxs)("body",{children:[c.jsx("nav",{className:"bg-gray-900 border-b border-gray-800",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsx("div",{className:"flex items-center justify-between h-16",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx(b(),{href:"/",className:"text-2xl font-bold gradient-text",children:"Portfolio"}),c.jsx("div",{className:"hidden md:block ml-10",children:(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[c.jsx(b(),{href:"/research",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Research Papers"}),c.jsx(b(),{href:"/supply-chain",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Supply Chain & Analytics"})]})})]})})})}),c.jsx("main",{className:"min-h-screen",children:a})]})})}},8206:(a,h,d)=>{"use strict";d.r(h),d.d(h,{$$typeof:()=>g,__esModule:()=>u,default:()=>m});let c=(0,d(6843).createProxy)(String.raw`D:\Projects\webpage\ai-research-sc-analytics-main\jw-ai-sc-de\src\app\not-found.tsx`),{__esModule:u,$$typeof:g}=c,m=c.default},4709:(a,h,d)=>{"use strict";d.r(h),d.d(h,{$$typeof:()=>g,__esModule:()=>u,default:()=>m});let c=(0,d(6843).createProxy)(String.raw`D:\Projects\webpage\ai-research-sc-analytics-main\jw-ai-sc-de\src\app\research\page.tsx`),{__esModule:u,$$typeof:g}=c,m=c.default},9060:()=>{},8801:()=>{},5023:()=>{}};var __webpack_require__=require("../../webpack-runtime.js");__webpack_require__.C(exports);var __webpack_exec__=a=>__webpack_require__(__webpack_require__.s=a),__webpack_exports__=__webpack_require__.X(0,[709],()=>__webpack_exec__(3856));module.exports=__webpack_exports__})();